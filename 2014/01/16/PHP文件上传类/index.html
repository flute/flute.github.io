<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>PHP文件上传类 - Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Ludis"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Ludis"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="class uploadFile { public $max_size &amp;#x3D; ‘1000000’;&amp;#x2F;&amp;#x2F;设置上传文件大小 public $file_name &amp;#x3D; ‘date’;&amp;#x2F;&amp;#x2F;重命名方式代表以时间命名，其他则使用给予的名称 public $allow_types;&amp;#x2F;&amp;#x2F;允许上传的文件扩展名，不同文件类型用“|”隔开 public $errmsg &amp;#x3D; ‘’;&amp;#x2F;&amp;#x2F;错误信息 public $uploade"><meta property="og:type" content="blog"><meta property="og:title" content="PHP文件上传类"><meta property="og:url" content="https://ldsun.com/2014/01/16/PHP%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B1%BB/"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="class uploadFile { public $max_size &amp;#x3D; ‘1000000’;&amp;#x2F;&amp;#x2F;设置上传文件大小 public $file_name &amp;#x3D; ‘date’;&amp;#x2F;&amp;#x2F;重命名方式代表以时间命名，其他则使用给予的名称 public $allow_types;&amp;#x2F;&amp;#x2F;允许上传的文件扩展名，不同文件类型用“|”隔开 public $errmsg &amp;#x3D; ‘’;&amp;#x2F;&amp;#x2F;错误信息 public $uploade"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ldsun.com/img/og_image.png"><meta property="article:published_time" content="2014-01-16T08:26:55.000Z"><meta property="article:modified_time" content="2014-02-20T20:36:06.000Z"><meta property="article:author" content="Ludis"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ldsun.com/2014/01/16/PHP%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B1%BB/"},"headline":"PHP文件上传类","image":["https://ldsun.com/img/og_image.png"],"datePublished":"2014-01-16T08:26:55.000Z","dateModified":"2014-02-20T20:36:06.000Z","author":{"@type":"Person","name":"Ludis"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"https://ldsun.com/img/facvion.png"}},"description":"class uploadFile { public $max_size &#x3D; ‘1000000’;&#x2F;&#x2F;设置上传文件大小 public $file_name &#x3D; ‘date’;&#x2F;&#x2F;重命名方式代表以时间命名，其他则使用给予的名称 public $allow_types;&#x2F;&#x2F;允许上传的文件扩展名，不同文件类型用“|”隔开 public $errmsg &#x3D; ‘’;&#x2F;&#x2F;错误信息 public $uploade"}</script><link rel="canonical" href="https://ldsun.com/2014/01/16/PHP%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B1%BB/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/facvion.png" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/flute"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-01-16T08:26:55.000Z" title="1/16/2014, 4:26:55 PM">2014-01-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-02-20T20:36:06.000Z" title="2/21/2014, 4:36:06 AM">2014-02-21</time></span><span class="level-item">20 minutes read (About 2948 words)</span><span class="level-item twikoo_visitors" id="/2014/01/16/PHP%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B1%BB/" data-flag-title="PHP文件上传类"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="twikoo_visitors"><i class="fa fa-spinner fa-spin"></i></span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">PHP文件上传类</h1><div class="content"><p><strong>class</strong> uploadFile { <strong>public</strong> $max_size = <strong>‘1000000’</strong>;//设置上传文件大小 <strong>public</strong> $file_name = <strong>‘date’</strong>;//重命名方式代表以时间命名，其他则使用给予的名称 <strong>public</strong> $allow_types;//允许上传的文件扩展名，不同文件类型用“|”隔开 <strong>public</strong> $errmsg = <strong>‘’</strong>;//错误信息 <strong>public</strong> $uploaded = <strong>‘’</strong>;//上传后的文件名(包括文件路径) <strong>public</strong> $save_path;//上传文件保存路径 <strong>private</strong> $files;//提交的等待上传文件 <strong>private</strong> $file_type = <strong>array</strong>();//文件类型 <strong>private</strong> $ext = <strong>‘’</strong>;//上传文件扩展名 /** * 构造函数，初始化类 * @access public * <strong>@param</strong> string $file_name 上传后的文件名 * <strong>@param</strong> string $save_path 上传的目标文件夹 <em>/ <strong>public</strong></em><em>function</em>* __construct($save_path = <strong>‘./upload/‘</strong>,$file_name = <strong>‘date’</strong>,$allow_types = <strong>‘’</strong>) { $this-&gt;file_name   = $file_name;//重命名方式代表以时间命名，其他则使用给予的名称 $this-&gt;save_path   = (preg_match(<strong>‘//$/‘</strong>,$save_path)) ? $save_path : $save_path . <strong>‘/‘</strong>; $this-&gt;allow_types = $allow_types == <strong>‘’</strong> ? <strong>‘jpg|jpeg|gif|png|zip|rar’</strong> : $allow_types; } /** * 上传文件 * @access public * <strong>@param</strong> $files 等待上传的文件(表单传来的$_FILES[]) * <strong>@return</strong> boolean 返回布尔值 <em>/ <strong>public</strong></em><em>function</em>* upload_file($files) { $name = $files[<strong>‘name’</strong>]; $type = $files[<strong>‘type’</strong>]; $size = $files[<strong>‘size’</strong>]; $tmp_name = $files[<strong>‘tmp_name’</strong>]; $error = $files[<strong>‘error’</strong>]; <strong>switch</strong> ($error) { <strong>case</strong> 0 : $this-&gt;errmsg = <strong>‘’</strong>; <strong>break</strong>; <strong>case</strong> 1 : $this-&gt;errmsg = <strong>‘*<em><strong>超过了php.ini中文件大小’</strong>; <strong>break</strong>; <strong>case</strong> 2 : $this-&gt;errmsg = **’*<em><strong>超过了MAX_FILE_SIZE 选项指定的文件大小’</strong>; <strong>break</strong>; <strong>case</strong> 3 : $this-&gt;errmsg = **’*<em><strong>文件只有部分被上传’</strong>; <strong>break</strong>; <strong>case</strong> 4 : $this-&gt;errmsg = **’*<em><strong>没有文件被上传’</strong>; <strong>break</strong>; <strong>case</strong> 5 : $this-&gt;errmsg = **’*<em><strong>上传文件大小为0’</strong>; <strong>break</strong>; <strong>default</strong> : $this-&gt;errmsg = **’<strong><strong>上传文件失败！’</strong>; <strong>break</strong>; } <strong>if</strong>($error == 0 &amp;&amp; is_uploaded_file($tmp_name)) { //检测文件类型 <strong>if</strong>($this-&gt;check_file_type($name) == <strong>FALSE</strong>){ *<em>return</em>***FALSE</strong>; } //检测文件大小 <strong>if</strong>($size &gt; $this-&gt;max_size){ $this-&gt;errmsg = <strong>‘*<em><strong>上传文件<font color=red>‘</strong>.$name.</em>*’</font>*<em><strong>太大，最大支持<font color=red>‘</strong>.ceil($this-&gt;max_size/1024).</em>*’</font>kb</strong></em>*的文件’**; <strong>return</strong></em><em>FALSE</em>*; } $this-&gt;set_save_path();//设置文件存放路径 $new_name = $this-&gt;file_name != <strong>‘date’</strong> ? $this-&gt;file_name.</em>*’.’**.$this-&gt;ext : date(</em>*’YmdHis’**).</em>*’.’<strong>.$this-&gt;ext;//设置新文件名 $this-&gt;uploaded = $this-&gt;save_path.$new_name;//上传后的文件名 //移动文件 <strong>if</strong>(move_uploaded_file($tmp_name,$this-&gt;uploaded)){ $this-&gt;errmsg = <strong>‘*<em><strong>文件<font color=red>‘</strong>.$this-&gt;uploaded.</em><em>‘</font><strong><strong>上传成功！’</strong>; *<em>return</em>***TRUE</strong>; }<strong>else</strong>{ $this-&gt;errmsg = <strong>‘<strong><strong>文件<font color=red>‘</strong>.$this-&gt;uploaded.**’</font><strong><strong>上传失败！’</strong>; *<em>return</em>***FALSE</strong>; } } } /** * 检查上传文件类型 * @access public * <strong>@param</strong> string $filename 等待检查的文件名 * <strong>@return</strong> 如果检查通过返回TRUE 未通过则返回FALSE和错误消息 <em>/ <strong>public</strong></em>*function</strong> check_file_type($filename){ $ext = $this-&gt;get_file_type($filename); $this-&gt;ext = $ext; $allow_types = explode(**’|’</strong>,$this-&gt;allow_types);//分割允许上传的文件扩展名为数组 //echo $ext; //检查上传文件扩展名是否在请允许上传的文件扩展名中 <strong>if</strong>(in_array($ext,$allow_types)){ <strong>return</strong>*</em>TRUE**; }<strong>else</strong>{ $this-&gt;errmsg = <strong>‘*<em><strong>上传文件<font color=red>‘</strong>.$filename.</em>*’</font>*<em><strong>类型错误，只支持上传<font color=red>‘</strong>.str_replace(</em>*’|’</strong>,**’,’</strong>,$this-&gt;allow_types).</strong>‘</font> <strong><strong>等文件类型!’</strong>; *<em>return</em>***FALSE</strong>; } } /** * 取得文件类型 * @access public * <strong>@param</strong> string $filename 要取得文件类型的目标文件名 * <strong>@return</strong> string 文件类型 <em>/ <strong>public</strong></em><em>function</em>* get_file_type($filename){ $info = pathinfo($filename); $ext = $info[<strong>‘extension’</strong>]; <strong>return</strong> $ext; } /** * 设置文件上传后的保存路径 <em>/ <strong>public</strong></em><em>function</em>* set_save_path(){ $this-&gt;save_path = (preg_match(<strong>‘//$/‘</strong>,$this-&gt;save_path)) ? $this-&gt;save_path : $this-&gt;save_path . <strong>‘/‘</strong>; <strong>if</strong>(!is_dir($this-&gt;save_path)){ //如果目录不存在，创建目录 $this-&gt;set_dir(); } } /</strong> * 创建目录 * @access public * <strong>@param</strong> string $dir 要创建目录的路径 * <strong>@return</strong> boolean 失败时返回错误消息和FALSE <em>/ <strong>public</strong></em><em>function</em>* set_dir($dir = <strong>null</strong>){ //检查路径是否存在 <strong>if</strong>(!$dir){ $dir = $this-&gt;save_path; } <strong>if</strong>(is_dir($dir)){ $this-&gt;errmsg = <strong>‘*<em><strong>需要创建的文件夹已经存在！’</strong>; } $dir = explode(</em>*’/‘</strong>, $dir); <strong>foreach</strong>($dir <strong>as</strong> $v){ <strong>if</strong>($v){ $d .= $v . <strong>‘/‘</strong>; <strong>if</strong>(!is_dir($d)){ $state = mkdir($d, 0777); <strong>if</strong>(!$state) $this-&gt;errmsg = <strong>‘<strong><strong>在创建目录<font color=red>‘</strong> . $d . <strong>‘<strong><strong>时出错！’</strong>; } } } *<em>return</em>***true</strong>; } } /**</strong></strong>****</strong>************************************* * 图片处理类 * * 可以对图片进行生成缩略图，打水印等操作 * 本类默认编码为UTF8 如果要在GBK下使用请将img_mark方法中打中文字符串水印iconv注释去掉 * * 由于UTF8汉字和英文字母大小(像素)不好确定，在中英文混合出现太多时可能会出现字符串偏左 * 或偏右,请根据项目环境对get_mark_xy方法中的$strc_w = strlen($this-&gt;mark_str)*7+5进 * 行调整 * 需要GD库支持，为更好使用本类推荐使用GD库2.0+ * * <strong>@author</strong> <a href="mailto:&#x6b;&#105;&#x63;&#107;&#102;&#108;&#x69;&#112;&#64;&#51;&#x70;&#x70;&#116;&#46;&#99;&#x6f;&#x6d;">&#x6b;&#105;&#x63;&#107;&#102;&#108;&#x69;&#112;&#64;&#51;&#x70;&#x70;&#116;&#46;&#99;&#x6f;&#x6d;</a> *************************************************/ <strong>class</strong> uploadImg <strong>extends</strong> uploadFile { <strong>public</strong> $mark_str = <strong>‘<a href="mailto:&#107;&#105;&#99;&#x6b;&#102;&#x6c;&#x69;&#112;&#64;&#x33;&#112;&#112;&#x74;&#x2e;&#99;&#111;&#x6d;">&#107;&#105;&#99;&#x6b;&#102;&#x6c;&#x69;&#112;&#64;&#x33;&#112;&#112;&#x74;&#x2e;&#99;&#111;&#x6d;</a>‘</strong>;  //水印字符串 <strong>public</strong> $str_r = 0; //字符串颜色R <strong>public</strong> $str_g = 0; //字符串颜色G <strong>public</strong> $str_b = 0; //字符串颜色B <strong>public</strong> $mark_ttf = <strong>‘./upload/SIMSUN.TTC’</strong>; //水印文字字体文件(包含路径) <strong>public</strong> $mark_logo = <strong>‘./upload/logo.png’</strong>;    //水印图片 <strong>public</strong> $resize_h;//生成缩略图高 <strong>public</strong> $resize_w;//生成缩略图宽 <strong>public</strong> $source_img;//源图片文件 <strong>public</strong> $dst_path = <strong>‘./upload/‘</strong>;//缩略图文件存放目录，不填则为源图片存放目录 /** * 生成缩略图 生成后的图 * @access public * <strong>@param</strong> integer $w 缩小后图片的宽（px） * <strong>@param</strong> integer $h 缩小后图片的高（px） * <strong>@param</strong> string $source_img 源图片(路径+文件名) <em>/ <strong>public</strong></em><em>function</em>* img_resized($w,$h,$source_img = <strong>NULL</strong>){ $source_img = $source_img == <strong>NULL</strong> ? $this-&gt;uploaded : $source_img;//取得源文件的地址，如果为空则默认为上次上传的图片 <strong>if</strong>(!is_file($source_img)) { //检查源图片是否存在 $this-&gt;errmsg = <strong>‘*<em><strong>文件’</strong>.$source_img.</em>*’<strong><strong>不存在’</strong>; *<em>return</em>***FALSE</strong>; } $this-&gt;source_img = $source_img; $img_info = getimagesize($source_img); $source = $this-&gt;img_create($source_img); //创建源图片 $this-&gt;resize_w = $w; $this-&gt;resize_h = $h; $thumb = imagecreatetruecolor($w,$h); imagecopyresized($thumb,$source,0,0,0,0,$w,$h,$img_info[0],$img_info[1]);//生成缩略图片 $dst_path = $this-&gt;dst_path == <strong>‘’</strong> ? $this-&gt;save_path : $this-&gt;dst_path; //取得目标文件夹路径 $dst_path = (preg_match(**’//$/‘</strong>,$dst_path)) ? $dst_path : $dst_path . <strong>‘/‘</strong>;//将目标文件夹后加上/ <strong>if</strong>(!is_dir($dst_path)) $this-&gt;set_dir($dst_path); //如果不存在目标文件夹则创建 $dst_name = $this-&gt;set_newname($source_img); $this-&gt;img_output($thumb,$dst_name);//输出图片 imagedestroy($source); imagedestroy($thumb); } /** *打水印 *@access public <em><strong>@param</strong> string $source_img 源图片路径+文件名 <strong><em>@param</em>* integer $mark_type 水印类型(1为英文字符串，2为中文字符串，3为图片logo,默认为英文字符串) ***@param** integer $mark_postion 水印位置(1为左下角,2为右下角,3为左上角,4为右上角,默认为右下角); <em><strong>@return</strong> 打上水印的图片 <em>/ <strong>public</strong></em></em>function</strong> img_mark($source_img = <strong>NULL</strong>,$mark_type = 1,$mark_postion = 2) { $source_img = $source_img == <strong>NULL</strong> ? $this-&gt;uploaded : $source_img;//取得源文件的地址，如果为空则默认为上次上传的图片 <strong>if</strong>(!is_file($source_img)) { //检查源图片是否存在 $this-&gt;errmsg = **’*<em><strong>文件’</strong>.$source_img.</em>*’<strong><strong>不存在’</strong>; *<em>return</em>***FALSE</strong>; } $this-&gt;source_img = $source_img; $img_info = getimagesize($source_img); $source = $this-&gt;img_create($source_img); //创建源图片 $mark_xy = $this-&gt;get_mark_xy($mark_postion);//取得水印位置 $mark_color = imagecolorallocate($source,$this-&gt;str_r,$this-&gt;str_g,$this-&gt;str_b); <strong>switch</strong>($mark_type) { <strong>case</strong> 1 : //加英文字符串水印 $str = $this-&gt;mark_str; imagestring($source,5,$mark_xy[0],$mark_xy[1],$str,$mark_color); $this-&gt;img_output($source,$source_img); <strong>break</strong>; <strong>case</strong> 2 : //加中文字符串水印 <strong>if</strong>(!is_file($this-&gt;mark_ttf)) { //检查字体文件是否存在 $this-&gt;errmsg = **’*<em><strong>打水印失败：字体文件’</strong>.$this-&gt;mark_ttf.</em>*’<strong><strong>不存在!’</strong>; *<em>return</em>***FALSE</strong>; } $str = $this-&gt;mark_str; //$str = iconv(‘gbk’,’utf-8’,$str);//转换字符编码 如果使用GBK编码请去掉此行注释 imagettftext($source,12,0,$mark_xy[2],$mark_xy[3],$mark_color,$this-&gt;mark_ttf,$str); $this-&gt;img_output($source,$source_img); <strong>break</strong>; <strong>case</strong> 3 : //加图片水印 <strong>if</strong>(is_file($this-&gt;mark_logo)){  //如果存在水印logo的图片则取得logo图片的基本信息,不存在则退出 $logo_info = getimagesize($this-&gt;mark_logo); }<strong>else</strong>{ $this-&gt;errmsg = **’*<em><strong>打水印失败：logo文件’</strong>.$this-&gt;mark_logo.</em>*’<strong><strong>不存在！’</strong>; *<em>return</em>***FALSE</strong>; } $logo_info = getimagesize($this-&gt;mark_logo); <strong>if</strong>($logo_info[0]&gt;$img_info[0] || $logo_info[1]&gt;$img_info[1]) { //如果源图片小于logo大小则退出 $this-&gt;errmsg = **’*<em><strong>打水印失败：源图片’</strong>.$this-&gt;source_img.</em>*’*<em><strong>比’</strong>.$this-&gt;mark_logo.</em>*’<strong><strong>小！’</strong>; *<em>return</em>***FALSE</strong>; } $logo = $this-&gt;img_create($this-&gt;mark_logo); imagecopy ( $source, $logo, $mark_xy[4], $mark_xy[5], 0, 0, $logo_info[0], $logo_info[1]); $this-&gt;img_output($source,$source_img); <strong>break</strong>; <strong>default</strong>: //其它则为文字图片 $str = $this-&gt;mark_str; imagestring($source,5,$mark_xy[0],$mark_xy[1],$str,$mark_color); $this-&gt;img_output($source,$source_img); <strong>break</strong>; } imagedestroy($source); } /</em>* * 取得水印位置 * @access private * <strong>@param</strong> integer $mark_postion 水印的位置(1为左下角,2为右下角,3为左上角,4为右上角,其它为右下角) * <strong>@return</strong> array $mark_xy 水印位置的坐标(索引0为英文字符串水印坐标X,索引1为英文字符串水印坐标Y， * 索引2为中文字符串水印坐标X，索引3为中文字符串水印坐标Y,索引4为水印图片坐标X，索引5为水印图片坐标Y) <em>/ <strong>private</strong></em><em>function</em>* get_mark_xy($mark_postion){ $img_info = getimagesize($this-&gt;source_img); $stre_w = strlen($this-&gt;mark_str)<em>9+5 ; //水印英文字符串的长度(px)(5号字的英文字符大小约为9px 为了美观再加5px) //(12号字的中文字符大小为12px,在utf8里一个汉字长度为3个字节一个字节4px 而一个英文字符长度一个字节大小大约为9px // 为了在中英文混合的情况下显示完全 设它的长度为字节数</em>7px) $strc_w = strlen($this-&gt;mark_str)<em>7+5 ; //水印中文字符串的长度(px) <strong>if</strong>(is_file($this-&gt;mark_logo)){ //如果存在水印logo的图片则取得logo图片的基本信息 $logo_info = getimagesize($this-&gt;mark_logo); } //由于imagestring函数和imagettftext函数中对于字符串开始位置不同所以英文和中文字符串的Y位置也有所不同 //imagestring函数是从文字的左上角为参照 imagettftext函数是从文字左下角为参照 <strong>switch</strong>($mark_postion){ <strong>case</strong> 1: //位置左下角 $mark_xy[0] = 5; //水印英文字符串坐标X $mark_xy[1] = $img_info[1]-20;//水印英文字符串坐标Y $mark_xy[2] = 5; //水印中文字符串坐标X $mark_xy[3] = $img_info[1]-5;//水印中文字符串坐标Y $mark_xy[4] = 5;//水印图片坐标X $mark_xy[5] = $img_info[1]-$logo_info[1]-5;//水印图片坐标Y <strong>break</strong>; <strong>case</strong> 2: //位置右下角 $mark_xy[0] = $img_info[0]-$stre_w; //水印英文字符串坐标X $mark_xy[1] = $img_info[1]-20;//水印英文字符串坐标Y $mark_xy[2] = $img_info[0]-$strc_w; //水印中文字符串坐标X $mark_xy[3] = $img_info[1]-5;//水印中文字符串坐标Y $mark_xy[4] = $img_info[0]-$logo_info[0]-5;//水印图片坐标X $mark_xy[5] = $img_info[1]-$logo_info[1]-5;//水印图片坐标Y <strong>break</strong>; <strong>case</strong> 3: //位置左上角 $mark_xy[0] = 5; //水印英文字符串坐标X $mark_xy[1] = 5;//水印英文字符串坐标Y $mark_xy[2] = 5; //水印中文字符串坐标X $mark_xy[3] = 15;//水印中文字符串坐标Y $mark_xy[4] = 5;//水印图片坐标X $mark_xy[5] = 5;//水印图片坐标Y <strong>break</strong>; <strong>case</strong> 4: //位置右上角 $mark_xy[0] = $img_info[0]-$stre_w; //水印英文字符串坐标X $mark_xy[1] = 5;//水印英文字符串坐标Y $mark_xy[2] = $img_info[0]-$strc_w; //水印中文字符串坐标X $mark_xy[3] = 15;//水印中文字符串坐标Y $mark_xy[4] = $img_info[0]-$logo_info[0]-5;//水印图片坐标X $mark_xy[5] = 5;//水印图片坐标Y <strong>break</strong>; <strong>default</strong> : //其它默认为右下角 $mark_xy[0] = $img_info[0]-$stre_w; //水印英文字符串坐标X $mark_xy[1] = $img_info[1]-5;//水印英文字符串坐标Y $mark_xy[2] = $img_info[0]-$strc_w; //水印中文字符串坐标X $mark_xy[3] = $img_info[1]-15;//水印中文字符串坐标Y $mark_xy[4] = $img_info[0]-$logo_info[0]-5;//水印图片坐标X $mark_xy[5] = $img_info[1]-$logo_info[1]-5;//水印图片坐标Y <strong>break</strong>; } <strong>return</strong> $mark_xy; } /</em>* * 创建源图片 * @access private * <strong>@param</strong> string $source_img 源图片(路径+文件名) * <strong>@return</strong> img 从目标文件新建的图像 <em>/ <strong>private</strong></em><em>function</em>* img_create($source_img) { $info = getimagesize($source_img); <strong>switch</strong> ($info[2]){ <strong>case</strong> 1: <strong>if</strong>(!function_exists(<strong>‘imagecreatefromgif’</strong>)){ $source = @imagecreatefromjpeg($source_img); }<strong>else</strong>{ $source = @imagecreatefromgif($source_img); } <strong>break</strong>; <strong>case</strong> 2: $source = @imagecreatefromjpeg($source_img); <strong>break</strong>; <strong>case</strong> 3: $source = @imagecreatefrompng($source_img); <strong>break</strong>; <strong>case</strong> 6: $source = @imagecreatefromwbmp($source_img); <strong>break</strong>; <strong>default</strong>: $source = <strong>FALSE</strong>; <strong>break</strong>; } <strong>return</strong> $source; } /** * 重命名图片 * @access private * <strong>@param</strong> string $source_img <a target="_blank" rel="noopener" href="http://www.3ppt.com/">www.3ppt.com</a> 源图片路径+文件名 * <strong>@return</strong> string $dst_name 重命名后的图片名(路径+文件名) <em>/ <strong>private</strong></em><em>function</em>* set_newname($sourse_img) { $info = pathinfo($sourse_img); $new_name = $this-&gt;resize_w.<strong>‘_’</strong>.$this-&gt;resize_h.<strong>‘_’</strong>.$info[<strong>‘basename’</strong>];//将文件名修改为：宽_高_文件名 <strong>if</strong>($this-&gt;dst_path == <strong>‘’</strong>){ //如果存放缩略图路径为空则默认为源文件同文件夹 $dst_name = str_replace($info[<strong>‘basename’</strong>],$new_name,$sourse_img); }<strong>else</strong>{ $dst_name = $this-&gt;dst_path.$new_name; } <strong>return</strong> $dst_name; } /** * 输出图片 * @access private * <strong>@param</strong> $im 处理后的图片 * <strong>@param</strong> $dst_name 输出后的的图片名(路径+文件名) * <strong>@return</strong> 输出图片 <em>/ <strong>public</strong></em><em>function</em>* img_output($im,$dst_name) { $info = getimagesize($this-&gt;source_img); <strong>switch</strong> ($info[2]){ <strong>case</strong> 1: <strong>if</strong>(!function_exists(<strong>‘imagegif’</strong>)){ imagejpeg($im,$dst_name); }<strong>else</strong>{ imagegif($im, $dst_name); } <strong>break</strong>; <strong>case</strong> 2: imagejpeg($im,$dst_name); <strong>break</strong>; <strong>case</strong> 3: imagepng($im,$dst_name); <strong>break</strong>; <strong>case</strong> 6: imagewbmp($im,$dst_name); <strong>break</strong>; } } } <strong>?&gt;</strong></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>PHP文件上传类</p><p><a href="https://ldsun.com/2014/01/16/PHP文件上传类/">https://ldsun.com/2014/01/16/PHP文件上传类/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Ludis</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2014-01-16</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2014-02-21</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=613983f6e53fae00128c5f66&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/img/alipay.JPG" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/wechat.JPG" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2014/01/16/php-mysql%E7%AE%80%E5%8D%95%E7%95%99%E8%A8%80%E6%9D%BF/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">php+mysql简单留言板</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2014/01/01/%E7%94%A8PHP%E5%88%B6%E4%BD%9CASCII%E5%8C%96%E7%9A%84%E5%9B%BE%E5%83%8F/"><span class="level-item">用PHP制作ASCII化的图像</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'https://twikoo-teal.vercel.app/'
    });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/user-avatar.png" alt="Ludis"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Ludis</p><p class="is-size-6 is-block">Valar Morghulis, Valar Dohaeris</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">177</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">17</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/flute" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/flute"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/3852099619"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:552452006@qq.com"><i class="far fa-envelope"></i></a></div></div></div><!--!--><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-30T07:42:16.000Z">2021-06-30</time></p><p class="title"><a href="/2021/06/30/React-Antd-Warning%E7%A7%BB%E9%99%A4%E5%A4%A7%E6%B3%95%E2%80%94%E2%80%94%E6%95%B4%E4%B8%AA%E4%B8%96%E7%95%8C%E6%B8%85%E5%87%80%E4%BA%86/">React/Antd Warning移除大法——整个世界清净了</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-05-14T10:41:14.000Z">2020-05-14</time></p><p class="title"><a href="/2020/05/14/IntersectionObserver/">IntersectionObserver</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-06T13:45:55.000Z">2020-02-06</time></p><p class="title"><a href="/2020/02/06/%E5%BE%AE%E5%B1%81%E6%81%A9%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%E4%B9%8B-%E2%80%94%E2%80%94-V2Ray/">微屁恩使用指南之 —— V2Ray</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-10T07:45:26.000Z">2019-12-10</time></p><p class="title"><a href="/2019/12/10/H5%E5%9C%A8%E5%85%A8%E5%B1%8FWebview%E4%B8%AD%E5%8F%8C%E7%AB%AF%E9%80%82%E9%85%8D%E5%88%98%E6%B5%B7%E5%B1%8F/">H5在全屏Webview中双端适配刘海屏</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-07-25T09:58:45.000Z">2019-07-25</time></p><p class="title"><a href="/2019/07/25/vue-%E9%A1%B9%E7%9B%AE%E5%9C%A8%E4%BD%8E%E9%85%8D%E6%9C%BA%E5%99%A8%E4%B8%8A%E7%BA%BF%E5%8F%8A%E4%BC%98%E5%8C%96/">vue 项目在低配机器上线及优化</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">March 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">December 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/11/"><span class="level-start"><span class="level-item">November 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/10/"><span class="level-start"><span class="level-item">October 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/09/"><span class="level-start"><span class="level-item">September 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/08/"><span class="level-start"><span class="level-item">August 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/07/"><span class="level-start"><span class="level-item">July 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/02/"><span class="level-start"><span class="level-item">February 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/12/"><span class="level-start"><span class="level-item">December 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/11/"><span class="level-start"><span class="level-item">November 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/10/"><span class="level-start"><span class="level-item">October 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/09/"><span class="level-start"><span class="level-item">September 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/08/"><span class="level-start"><span class="level-item">August 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/07/"><span class="level-start"><span class="level-item">July 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/06/"><span class="level-start"><span class="level-item">June 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/05/"><span class="level-start"><span class="level-item">May 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/04/"><span class="level-start"><span class="level-item">April 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/03/"><span class="level-start"><span class="level-item">March 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/02/"><span class="level-start"><span class="level-item">February 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">January 2015</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/12/"><span class="level-start"><span class="level-item">December 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/11/"><span class="level-start"><span class="level-item">November 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/10/"><span class="level-start"><span class="level-item">October 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/09/"><span class="level-start"><span class="level-item">September 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/08/"><span class="level-start"><span class="level-item">August 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/07/"><span class="level-start"><span class="level-item">July 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/06/"><span class="level-start"><span class="level-item">June 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/05/"><span class="level-start"><span class="level-item">May 2014</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/04/"><span class="level-start"><span class="level-item">April 2014</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/03/"><span class="level-start"><span class="level-item">March 2014</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/02/"><span class="level-start"><span class="level-item">February 2014</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/01/"><span class="level-start"><span class="level-item">January 2014</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/12/"><span class="level-start"><span class="level-item">December 2013</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/11/"><span class="level-start"><span class="level-item">November 2013</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/10/"><span class="level-start"><span class="level-item">October 2013</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ghost/"><span class="tag">Ghost</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/H5/"><span class="tag">H5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTTPS/"><span class="tag">HTTPS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React-Native/"><span class="tag">React Native</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sublime/"><span class="tag">Sublime</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/npm/"><span class="tag">npm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E8%A7%86%E5%89%A7/"><span class="tag">电视剧</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BE%8E%E9%A3%9F/"><span class="tag">美食</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">3</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/facvion.png" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2023 Ludis</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">京ICP备19027325号-2</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/flute"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>