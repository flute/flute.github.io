<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Ludis"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Ludis"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Hexo"><meta property="og:url" content="https://ldsun.com/"><meta property="og:site_name" content="Hexo"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ldsun.com/img/og_image.png"><meta property="article:author" content="Ludis"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ldsun.com"},"headline":"Hexo","image":["https://ldsun.com/img/og_image.png"],"author":{"@type":"Person","name":"Ludis"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"https://ldsun.com/img/facvion.png"}},"description":""}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/facvion.png" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/flute"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-10-19T10:37:35.000Z" title="10/19/2014, 6:37:35 PM">2014-10-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-10-19T10:37:35.000Z" title="10/19/2014, 6:37:35 PM">2014-10-19</time></span><span class="level-item">2 minutes read (About 324 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/10/19/Svn-commit-editor-error-on-Mac/">Svn-commit editor error on Mac</a></h1><div class="content"><p>If you are trying to commit the source code in SVN very first time and you see the following error that means You have not set the correct editor for the SVN.</p>
<p>If you look closely the SVN suggests the possible fixes.</p>
<p>svn commit svn: Commit failed (details follow): svn: Could not use external editor to fetch log message; consider setting the $SVN_EDITOR environment variable or using the –message (-m) or –file (-F) options svn: None of the environment variables SVN_EDITOR, VISUAL or EDITOR are set, and no ‘editor-cmd’ run-time configuration option was found</p>
<h3 id="Possible-fixes"><a href="#Possible-fixes" class="headerlink" title="Possible fixes"></a>Possible fixes</h3><p>You can use either of the following options.</p>
<ul>
<li>Set the one of the following global variables’ value in <code>~/.bashrc</code> file. The value can be your favorite editor command e.g vim, emac, nano, gedit etc.</li>
</ul>
<p>export SVN_EDITOR=vim export VISUAL=vim export EDITOR=vim</p>
<p>Once the above line is set in the <code>~/.bashrc</code> file, then run the following command.</p>
<p>source ~/.bashrc</p>
<p>Now try to run SVN commit command again. This time SVN will ask you to provide the commit message in the editor. You can provide the commit message, save it, and exit.</p>
<ul>
<li>If you don’t like setting the global variable, you can provide the editor command during the execution of <code>svn commit</code> command like as following. svn commit –editor-cmd vim</li>
</ul>
<p>In the above command I have specified <code>vim</code> . You can specify your favorite editor command.</p>
<ul>
<li>There is another shortcut, you can provide the commit message inline. svn commit -m “Your commit message!”</li>
</ul>
<p>Hope one of the above solutions will fix your problem. If you have figured out other way to fix it, then please share it in the comment section. If you like this post, please share it using social media buttons given on the left side of this page. Please feel free to leave your comments or suggestions about the above post or the website. Thank you.</p>
<p> </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-10-18T07:19:28.000Z" title="10/18/2014, 3:19:28 PM">2014-10-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-10-18T07:19:28.000Z" title="10/18/2014, 3:19:28 PM">2014-10-18</time></span><span class="level-item">10 minutes read (About 1480 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/10/18/Mac%E4%B8%8BSVN%E7%9A%84%E4%BD%BF%E7%94%A8/">Mac下SVN的使用</a></h1><div class="content"><p>在Windows环境中，一般使用TortoiseSVN来搭建svn环境。在Mac环境下，由于Mac自带了svn的服务器端和客户端功能，所以我们可以在不装任何第三方软件的前提下使用svn功能，不过还需做一下简单的配置。</p>
<p>如果你有安装XCode，只需要在code &gt; Preferences &gt; download &gt; Command Line Tools &gt; Install即可，速度很快，基本1分钟搞定。 这个Command Line Tools包含最新的SVN。然后如果你没有安装XCode的话，就会很痛苦，采用这种办法就会很痛苦，因为XCode接近于1.5GB了！尤其是对于那些只是需要SVN，而不会用到XCode的朋友来讲。</p>
<p>幸运的是，可以做到在没有安装XCode 的前提下安装SVN，只需要在Apple Developer网站下载一个116MB的<a target="_blank" rel="noopener" href="https://developer.apple.com/downloads/index.action">https://developer.apple.com/downloads/index.action</a> Command Line Tools(OS X Mountain Lion)独立安装包。当然你需要一个Apple Developer的ID（可以免费注册的）。</p>
<p>安装之后，可以适用Terminal来确认一下你的SVN版本：svn –version</p>
<p>一、在Mac环境下搭建svn服务器端环境。</p>
<h2 id="创建代码仓库，用来存储客户端所上传的代码"><a href="#创建代码仓库，用来存储客户端所上传的代码" class="headerlink" title="创建代码仓库，用来存储客户端所上传的代码"></a>创建代码仓库，用来存储客户端所上传的代码</h2><p>我先在/User/apple目录下新建一个svn目录，以后可以在svn目录下创建多个仓库目录</p>
<p>打开终端，创建一个mycode仓库，输入指令：<strong>svnadmin create /Users/apple/svn/mycode</strong></p>
<p>指令执行成功后，会发现硬盘上多了个/Users/apple/svn/mycode目录，目录结构如下：</p>
<p><img src="http://images.cnitblog.com/blog/497279/201303/10002140-c4cf85b829bd477ea3a3779a4cd0d7fd.png"></p>
<h2 id="配置svn的用户权限"><a href="#配置svn的用户权限" class="headerlink" title="配置svn的用户权限"></a>配置svn的用户权限</h2><p>主要是修改/svn/mycode/conf目录下的三个文件</p>
<p>1.打开svnserve.conf，将下列配置项前面的#和空格都去掉</p>
<h1 id="anon-access-read-auth-access-write-password-db-passwd-authz-db-authz"><a href="#anon-access-read-auth-access-write-password-db-passwd-authz-db-authz" class="headerlink" title="anon-access = read # auth-access = write # password-db = passwd # authz-db = authz"></a>anon-access = read # auth-access = write # password-db = passwd # authz-db = authz</h1><p><code>anon-access = read</code>代表匿名访问的时候是只读的，若改为<code>anon-access = none</code>代表禁止匿名访问，需要帐号密码才能访问</p>
<p>2.打开passwd，在[users]下面添加帐号和密码，比如：</p>
<p> [users] mj = 123 jj = 456</p>
<p>帐号是mj，密码是123</p>
<p>3.打开authz，配置用户组和权限</p>
<p>我们可以将在passwd里添加的用户分配到不同的用户组里，以后的话，就可以对不同用户组设置不同的权限，没有必要对每个用户进行单独设置权限。</p>
<p>在[groups]下面添加组名和用户名，多个用户之间用逗号(,)隔开</p>
<p> [groups] topgroup=mj,jj</p>
<p>说明mj和jj都是属于topgroup这个组的，接下来再进行权限配置。</p>
<p>使用[/]代表svn服务器中的所有资源库</p>
<p> [/] @topgroup = rw</p>
<p>上面的配置说明topgroup这个组中的所有用户对所有资源库都有读写(rw)权限，组名前面要用@</p>
<p>如果是用户名，不用加@，比如mj这个用户有读写权限</p>
<div> [/] mj = rw

<p>至于其他精细的权限控制，可以参考authz文件中的其他内容</p>
<p>4.启动svn服务器</p>
<p>前面配置了这么多，最关键还是看能否正常启动服务器，若启动不来，前面做再多工作也是徒劳。</p>
<p>在终端输入下列指令：<code>&lt;strong&gt;svnserve -d -r /Users/apple/svn&lt;/strong&gt;</code></p>
<p>或者输入：<code>&lt;strong&gt;svnserve -d -r /Users/apple/svn&lt;/strong&gt;&lt;strong&gt;/mycode&lt;/strong&gt;</code></p>
<p>没有任何提示就说明启动成功了</p>
<p>5.关闭svn服务器</p>
<p>如果你想要关闭svn服务器，最有效的办法是打开实用工具里面的“活动监视器”<img src="http://images.cnitblog.com/blog/497279/201303/10002641-8b49f872b6cd438c80f76f098d99db93.png"></p>
<p><img src="http://images.cnitblog.com/blog/497279/201303/10002744-ce32c627b0b34f02a4067568bdc5e786.png"></p>
<p>综合上述，我们就可以轻松搭建svn服务器环境了</p>
<h2 id="使用svn客户端功能"><a href="#使用svn客户端功能" class="headerlink" title="使用svn客户端功能"></a><a href=""></a>使用svn客户端功能</h2><p>1.从本地导入代码到服务器(第一次初始化导入)</p>
<p>在终端中输入  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn import /Users/apple/Documents/eclipse_workspace/weibo svn://localhost/mycode/weibo –username=mj –password=123 -m <span class="string">&quot;初始化导入&quot;</span>&lt;/strong&gt;</span><br></pre></td></tr></table></figure>

<p>我解释下指令的意思：将<code>/Users/apple/Documents/eclipse_workspace/weibo</code>中的所有内容，上传到服务器mycode仓库的weibo目录下，后面双引号中的”初始化导入”是注释</p>
<p>2.从服务器端下载代码到客户端本地</p>
<p>在终端中输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn checkout svn://localhost/mycode –username=mj –password=123 /Users/apple/Documents/code&lt;/strong&gt;</span><br></pre></td></tr></table></figure>

<p>我解释下指令的意思：将服务器中mycode仓库的内容下载到/Users/apple/Documents/code目录中</p>
<p>3.提交更改过的代码到服务器</p>
<p>在步骤2中已经将服务器端的代码都下载到/Users/apple/Documents/code目录中，现在修改下里面的一些代码，然后提交这些修改到服务器</p>
<p>1&gt; 打开终端，先定位到<code>/Users/apple/Documents/code</code>目录，输入：<code>&lt;strong&gt;cd/Users/apple/Documents/code&lt;/strong&gt;</code></p>
<p>2&gt; 输入提交指令：<code>&lt;strong&gt;svn commit -m &quot;修改了main.m文件&quot;&lt;/strong&gt;</code></p>
<p>这个指令会将/Users/apple/Documents/code下的所有修改都同步到服务器端，假如这次我只修改了main.文件</p>
<p>可以看到终端的打印信息：</p>
<p><code>Sending weibo/weibo/main.m Transmitting file data . Committed revision 2.</code></p>
<p>4.更新服务器端的代码到客户端</p>
<p>这个应该是最简单的指令了，在终端中定位到客户端代码目录后，比如上面的/Users/apple/Documents/code目录，然后再输入指令：<code>&lt;strong&gt;svn update&lt;/strong&gt;</code></p>
<p> </p>
<p>5.至于svn的其他用法，可以在终端输入：<code>&lt;strong&gt;svn help&lt;/strong&gt;</code></p>
<p><strong><img src="http://images.cnitblog.com/blog/497279/201303/10010442-37644dc2b0d54f7b8b421ede25d2f749.png"></strong></p>
<p>这里列出一大堆svn指令，后面括号中的内容的一般代表着指令的简称，比如我们可以用svn ci代替svn commit，用svn co代替svn checkout</p>
</div>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-10-10T12:37:24.000Z" title="10/10/2014, 8:37:24 PM">2014-10-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-10-10T12:37:24.000Z" title="10/10/2014, 8:37:24 PM">2014-10-10</time></span><span class="level-item">3 minutes read (About 481 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/10/10/Sublime-Text-zen-coding%E7%BC%96%E7%A0%81%E7%A5%9E%E5%99%A8/">Sublime Text + zen coding编码神器</a></h1><div class="content"><p>欲利其工，必先利其器！我认为无论做什么，一款优秀的工具永远是极为重要的。这里分享程序猿的一款神器。</p>
<p>之前一直使用notepad++写代码，非常的轻量级，打开速度快，支持的语言多。后来又发现了zen coding的插件，安装后阵容为Notepad++ + Zen coding，zen coding支持代码缩写补全，尤其写前段页面html,css时简直是神器，效率非常的高，简直爱不释手。</p>
<p>换OSX系统后notepad不再支持，支持急需入手新的编码神器，换了好多总是不合人意。终于是找到Sublime Text，同样的轻量，高亮和黑色背景美到窒息，简洁的UI界面，配上行云流水操作，写代码简直是一种享受，不幸的是Sublime Text是收费软件，59刀也配的上它的优秀表现，不过好消息是作者还是比较厚道的，只是偶尔提醒购买，丝毫不影响编码。如果这么好的编辑器能用zen coding，绝对的完美，事实证明完美的东西是绝对的。简单操作后便可以舒适的享受写代码的过程了：</p>
<p>1.Sublime Text 官网下载<a target="_blank" rel="noopener" href="http://www.sublimetext.com/%E5%AF%B9%E5%BA%94%E7%9A%84%E7%89%88%E6%9C%AC%E3%80%82Sublime">http://www.sublimetext.com/对应的版本。Sublime</a> Text 2是比较成熟稳定的版本，也是我的选择；</p>
<p>2.安装完Sublime Text 2后打开；</p>
<p>3.按shift+command+P打开命令行，输入install，会自动提示install package,回车选择；</p>
<p><a href="/wp-content/uploads/2014/10/st1.jpg"><img src="/wp-content/uploads/2014/10/st1.jpg" alt="st1"></a></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>4.然后输入Emmet（zen coding已经改名）回车即可；</p>
<p>5.等提示成功后重启Sublime Text即可，此时zencoding已添加，神器已经祭出！</p>
<p><a href="/wp-content/uploads/2014/10/bt2.jpg"><img src="/wp-content/uploads/2014/10/bt2.jpg" alt="bt2"></a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-09-22T09:58:52.000Z" title="9/22/2014, 5:58:52 PM">2014-09-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-09-22T09:58:52.000Z" title="9/22/2014, 5:58:52 PM">2014-09-22</time></span><span class="level-item">4 minutes read (About 668 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/09/22/jQuery-Mobile-Popups/">jQuery Mobile Popups</a></h1><div class="content"><p>jQuery Mobile Popup弹窗集合。</p>
<p>带有样式风格的弹出框</p>
<p><a href="#uedcool" data-rel="popup">显示信息</a> <div data-role="popup" id="uedcool" data-theme="e" style="max-width:350px;"> <p>可自定义样式和最大宽度定义的弹出框 <strong>自定义弹窗</strong></p> </div></p>
<p>弹出菜单</p>
<p><a href="#uedcool" data-rel="popup">显示信息</a> <div data-role="popup" id="uedcool" data-theme="a"> <ul data-role="listview" data-inset="true" style="min-width:210px;" data-theme="b"> <li data-role="divider" data-theme="a">弹出菜单</li> <li><a href="#">文件</a></li> <li><a href="#">选项</a></li> <li><a href="#">退出</a></li> </ul> </div></p>
<p>弹出表单</p>
<p><a href="#uedcool" data-rel="popup">显示信息</a> <div data-role="popup" id="uedcool" data-theme="a"> <form> <div style="padding:10px 20px;"> <h3>登录系统</h3> <label for="un">帐号:</label> <input type="text" name="user" id="un" value="" placeholder="输入帐号" data-theme="a" /> <label for="pw">密码:</label> <input type="password" name="pass" id="pw" value="" placeholder="输入密码" data-theme="a" /> <button type="submit" data-theme="b">登录</button> </div> </form> </div></p>
<p>弹出窗口</p>
<p><a href="#uedcool" data-rel="popup">显示信息</a> <div data-role="popup" id="uedcool" data-overlay-theme="a" data-theme="c" style="max-width:400px;"> <div data-role="header" data-theme="a"> <h1>文件删除</h1> </div> <div data-role="content" data-theme="d"> <h3>确定要删除这个文件吗？</h3> <p>该操作不可撤销。</p> <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">删除</a> <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">取消</a> </div> </div></p>
<p>弹出图片</p>
<p><a href="#uedcool" data-rel="popup">显示信息</a> <div data-role="popup" id="uedcool" data-overlay-theme="a" data-corners="false"> <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext">Close</a> <img src="http://4.ibin.sinaapp.com/public/img/bg.jpg" alt="Photo landscape"> </div></p>
<p>调用方法：</p>
<p>这个部件在jQueryMobile中会自动初始化，但是你也可以通过popup()方法来调用。<br><code>$(‘#uedcool’).popup();</code></p>
<p>调用打开弹出框方法：</p>
<p>除了通过一个带有data-rel=’popup’的链接来触发部件显示，还可以调用open方法来打开弹出框部件，如：<br><code>$(‘#uedcool’).popup(‘open’);</code></p>
<p>关闭部件的方法：</p>
<p>弹出框可以通过按Esc键或者点击弹出框外面的区域来关闭，除此之外也可以通过调用close方法来关闭，如：<br><code>$(‘#uedcool’).popup(‘close’);</code></p>
<p>还可以通过在弹出框中添加关闭按钮的方式来调用关闭方法，只需要在关闭按钮或者链接中添加data-rel=’back’属性就可以通过点击来隐式调用关闭方法，例如：</p>
<div data-role="popup"> <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext">Close</a> 这里显示内容 </div>

<p>注：可以通过定义<code>ui-btn-right</code>或者<code>ui-btn-left</code>来控制按钮的显示位置。</p>
<p>部件容器内边距：</p>
<p>建议在弹出框的的div上添加ui-content样式，这样可以使这个容器内内部定义一个15px的内边距，使容器的布局更加自然，如下:</p>
<div data-role="popup" id="popupPadded"> <p>在容器上添加<code>ui-content</code> 样式</p> </div>

<p>定位：</p>
<p>在默认情况下，弹出框的中心点是和触发元素的中心点重合的（除在对边界位置进行修正的情况下），这样可以很方便的来实现菜单或者提示功能。</p>
<p>除此之外，可以通过在触发的链接上定义data-position-to来实现类似对话框或者lightbox风格在页面上居中的显示效果，例如：</p>
<p>弹出框的中心点与页面的中心点对应：</p>
<div data-role="popup" id="uedcool"> <p>I am positioned to the window.</p> </div> <a href="#uedcool" data-rel="popup" data-position-to="window" />

<p>弹出框的中心点与触发元素的中心点对应：</p>
<div data-role="popup" id="uedcool"> <p>I am positioned to the window.</p> </div> <a href="#uedcool" data-rel="popup" data-position-to="origin" />

<p>除了以上window和origin这两个参数外，还可以在data-position-to属性中设置一个元素的id来使弹出框在该元素的位置显示。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-09-19T00:25:46.000Z" title="9/19/2014, 8:25:46 AM">2014-09-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-09-19T00:25:46.000Z" title="9/19/2014, 8:25:46 AM">2014-09-19</time></span><span class="level-item">2 minutes read (About 275 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/09/19/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E5%88%A9%E5%99%A8%E2%80%94%E2%80%94PHP-Simple-HTML-DOM-Parser/">数据采集利器——PHP Simple HTML DOM Parser</a></h1><div class="content"><p>PHP Simple HTML DOM Parser（PHP实现的简单的HTML DOM解析器）。</p>
<h1 id="Description-Requirement-amp-Features"><a href="#Description-Requirement-amp-Features" class="headerlink" title="Description, Requirement &amp; Features"></a><span style="font-size: 16px; line-height: 29.600000381469727px;">Description, Requirement &amp; Features</span></h1><ul>
<li>A HTML DOM parser written in PHP5+ let you manipulate HTML in a very easy way!</li>
<li>Require <strong>PHP 5+</strong>.</li>
<li>Supports invalid HTML.</li>
<li>Find tags on an HTML page with selectors just like jQuery.</li>
<li>Extract contents from HTML in a single line.</li>
</ul>
<h2 id="Download-amp-Documents"><a href="#Download-amp-Documents" class="headerlink" title="Download &amp; Documents"></a><span style="font-size: 16px; line-height: 29.600000381469727px;">Download</span><strong><span style="font-size: 16px; line-height: 29.600000381469727px;"> &amp; Documents</span></strong></h2><ul>
<li>Download latest version form <a target="_blank" rel="noopener" href="http://sourceforge.net/project/showfiles.php?group_id=218559">Sourceforge</a>.</li>
<li>Read <a target="_blank" rel="noopener" href="http://simplehtmldom.sourceforge.net/manual.htm">Online Document</a>.</li>
</ul>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a><span style="font-size: 16px; line-height: 29.600000381469727px;">Quick Start</span></h2><ul>
<li><span style="text-indent: 2em;">How to get HTML elements?</span></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create DOM from URL or file  </span></span><br><span class="line"> <span class="variable">$html</span> = &lt;strong&gt;file_get_html&lt;/strong&gt;(‘http:<span class="comment">//www.google.com/’);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Find all images  </span></span><br><span class="line"> <span class="keyword">foreach</span>(<span class="variable">$html</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘img’) <span class="keyword">as</span> <span class="variable">$element</span>)  </span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$element</span>-&gt;&lt;strong&gt;src&lt;/strong&gt; . ‘&lt;br&gt;’;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Find all links  </span></span><br><span class="line"> <span class="keyword">foreach</span>(<span class="variable">$html</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘a’) <span class="keyword">as</span> <span class="variable">$element</span>)  </span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$element</span>-&gt;&lt;strong&gt;href&lt;/strong&gt; . ‘&lt;br&gt;’;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>How to modify HTML elements?</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create DOM from string  </span></span><br><span class="line"> <span class="variable">$html</span> = &lt;strong&gt;str_get_html&lt;/strong&gt;(‘&lt;div id=<span class="string">&quot;hello&quot;</span>&gt;Hello&lt;/div&gt;&lt;div id=<span class="string">&quot;world&quot;</span>&gt;World&lt;/div&gt;’);</span><br><span class="line"></span><br><span class="line"><span class="variable">$html</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘div’, <span class="number">1</span>)-&gt;&lt;strong&gt;<span class="class"><span class="keyword">class</span>&lt;/<span class="title">strong</span>&gt; = ‘<span class="title">bar</span>’;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">$<span class="title">html</span>-&gt;&lt;<span class="title">strong</span>&gt;<span class="title">find</span>&lt;/<span class="title">strong</span>&gt;(‘<span class="title">div</span>[<span class="title">id</span>=<span class="title">hello</span>]’, 0)-&gt;&lt;<span class="title">strong</span>&gt;<span class="title">innertext</span>&lt;/<span class="title">strong</span>&gt; = ‘<span class="title">foo</span>’;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">echo</span> $<span class="title">html</span>; // <span class="title">Output</span>: &lt;<span class="title">div</span> <span class="title">id</span>=&quot;<span class="title">hello</span>&quot;&gt;&lt;<span class="title">strong</span>&gt;<span class="title">foo</span>&lt;/<span class="title">strong</span>&gt;&lt;/<span class="title">div</span>&gt;&lt;<span class="title">div</span> <span class="title">id</span>=&quot;<span class="title">world</span>&quot; &lt;<span class="title">strong</span>&gt;<span class="title">class</span>=&quot;<span class="title">bar</span>&quot;&lt;/<span class="title">strong</span>&gt;&gt;<span class="title">World</span>&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Extract contents from HTML</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dump contents (without tags) from HTML  </span></span><br><span class="line"> <span class="keyword">echo</span> &lt;strong&gt;file_get_html&lt;/strong&gt;(‘http:<span class="comment">//www.google.com/’)-&gt;&lt;strong&gt;plaintext&lt;/strong&gt;;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>Scraping Slashdot!</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create DOM from URL  </span></span><br><span class="line"> <span class="variable">$html</span> = &lt;strong&gt;file_get_html&lt;/strong&gt;(‘http:<span class="comment">//slashdot.org/’);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Find all article blocks  </span></span><br><span class="line"> <span class="keyword">foreach</span>(<span class="variable">$html</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘div.article’) <span class="keyword">as</span> <span class="variable">$article</span>) &#123;  </span><br><span class="line"> <span class="variable">$item</span>[‘title’]     = <span class="variable">$article</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘div.title’, <span class="number">0</span>)-&gt;&lt;strong&gt;plaintext&lt;/strong&gt;;  </span><br><span class="line"> <span class="variable">$item</span>[‘intro’]    = <span class="variable">$article</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘div.intro’, <span class="number">0</span>)-&gt;&lt;strong&gt;plaintext&lt;/strong&gt;;  </span><br><span class="line"> <span class="variable">$item</span>[‘details’] = <span class="variable">$article</span>-&gt;&lt;strong&gt;find&lt;/strong&gt;(‘div.details’, <span class="number">0</span>)-&gt;&lt;strong&gt;plaintext&lt;/strong&gt;;  </span><br><span class="line"> <span class="variable">$articles</span>[] = <span class="variable">$item</span>;  </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$articles</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-09-04T07:52:50.000Z" title="9/4/2014, 3:52:50 PM">2014-09-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-09-04T07:52:50.000Z" title="9/4/2014, 3:52:50 PM">2014-09-04</time></span><span class="level-item">2 minutes read (About 231 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/09/04/jquery-mobile-post%E6%95%B0%E6%8D%AE%E9%97%AE%E9%A2%98/">jquery mobile post数据问题</a></h1><div class="content"><p>做了个jQuery mobile的表单页面，结果发现提交后没任何反映。。仔细的看了几遍代码都无果，怀疑与JQM有关，试着去掉JQM的css和js，果然好使了，但想不出为何。</p>
<p>码一天代码了，先去洗衣服歇歇再说~</p>
<p>洗完衣服，瞬间想起上回的jQuery mobile缓存问题——JQM默认使用Ajax提交数据，而我用的是post，怎么会好使呢，于是机智的禁掉Ajax提交，完美解决：</p>
<p>给form加上<code>data-ajax=&quot;false&quot;</code>即可。</p>
<p>另附两个今天新get的技能：</p>
<p>1.让表哥（表格）迅速显示出分割线：</p>
<p>table{width:100%;border-collapse: collapse;border: none;color:white;} table td{border: solid black 1px;}</p>
<p>2.从数组中随机选择一个或多个字符串：</p>
<p>$color=array(‘aquamarine’,’chartreuse’,’darkorange’,’darkviolet’,’deeppink’); array_rand($color,1)；//1表示选择1个</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-08-28T04:57:59.000Z" title="8/28/2014, 12:57:59 PM">2014-08-28</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-08-28T04:57:59.000Z" title="8/28/2014, 12:57:59 PM">2014-08-28</time></span><span class="level-item">a minute read (About 208 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/08/28/jquery-mobile%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98/">jquery mobile缓存问题</a></h1><div class="content"><p>如题，jQuery mobile做自适应页面时遇到小问题：A页面跳到B页面，B页面返回A页面后存在B页面的缓存。不论a标签使用的是<code>&lt;a data-rel=&quot;back&quot;&gt;</code>还是<code>&lt;a href=&quot;&quot;&gt;</code>都有缓存存在！</p>
<p>原来做过很多jqw页面了没问题，也不知道为啥这次就缓存出问题了，先不管了，解决再说。</p>
<p>网上游了2小时找到了解决方法：原来其实不管页面内链接还是页面间切换，jQuery Mobile都是发起Ajax请求加载新的页面。如果想链接到一个新界面，可以通过在加入链接属性<code>rel=&quot;external&quot;</code>或<code>data-ajax=&quot;false&quot;</code>，告诉jQuery Mobile需要重新加载一个新的页面，而且URL也是全新的。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-08-20T11:02:29.000Z" title="8/20/2014, 7:02:29 PM">2014-08-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-08-20T11:23:29.000Z" title="8/20/2014, 7:23:29 PM">2014-08-20</time></span><span class="level-item">11 minutes read (About 1594 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/08/20/face-%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/">face++人脸识别</a></h1><div class="content"><p><a href="/wp-content/uploads/2014/08/11.jpg"><img src="/wp-content/uploads/2014/08/11.jpg" alt="1"></a><br><a href="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%87201408121839581.jpg"><img src="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%87201408121839581.jpg" alt="QQ图片20140812183958"></a><br><a href="/wp-content/uploads/2014/08/20140812_124221.jpg"><img src="/wp-content/uploads/2014/08/20140812_124221.jpg" alt="20140812_124221"></a><br><a href="/wp-content/uploads/2014/08/20140812_143408.jpg"><img src="/wp-content/uploads/2014/08/20140812_143408.jpg" alt="20140812_143408"></a></p>
<p>上星期去参加TC 北京（Tech China Beijing）峰会，当然是免费学生票啦…..2800的门票我就呵呵了，不过学生票除了参加论坛之外权限慢慢，很满足啦<del>展会上体验了些类似iwatch，自平衡脚踏车，虚拟3D等设备，整体来说还不错，其实我就是奔着两样东西去的：午餐+Google glass。哈哈哈，不多说了，跑远了。Google glass一直就想玩玩，毕竟一万多买不起，这次算是实现了。只不过比较坑的是只搭载了出门问问一个app，只能问问路。我最想体验的是人脸识别功能，可惜了</del></p>
<p>刚好最近在做微信，鉴于此，于是想到了加入人脸识别功能。</p>
<p>算是试玩吧，我就选择了<a target="_blank" rel="noopener" href="http://www.faceplusplus.com.cn/">face++</a>，看上去还不错的样子。</p>
<p>首先当然是注册，创建应用，获取API Key和API Secret了，这里不多说。</p>
<p>Face++提供人脸识别接口，检测给定图片(Image)中的所有人脸(Face)的位置和相应的面部属性接口地址如下：</p>
<p><span style="color: #ff6600;"><a target="_blank" rel="noopener" href="http://apicn.faceplusplus.com/v2/detection/detect?api_key=YOUR_API_KEY&amp;">http://apicn.faceplusplus.com/v2/detection/detect?api_key=YOUR_API_KEY&amp;</a></span></p>
<p><span style="color: #ff6600;">api_secret=YOUR_API_SECRET&amp;url=http%3A%2F%2Ffaceplusplus.com%2Fstatic%2Fimg%2Fdemo%2F1.jpg</span></p>
<p><span style="color: #ff6600;">&amp;attribute=glass,pose,gender,age,race,smiling</span></p>
<div align="center"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td width="86">**参数**

</td><td width="64">**是否必须**

</td><td width="451">**含义**

</td></tr><tr><td width="86">api_key

</td><td width="64">必须

</td><td width="451">App的Face++ API Key

</td></tr><tr><td width="86">api_secret

</td><td width="64">必须

</td><td width="451">APP的Face++ API Secret

</td></tr><tr><td width="86">url 或 img[POST]

</td><td width="64">必须

</td><td width="451">待检测图片的URL 或者 通过POST方法上传的二进制数据，原始图片大小需要小于3M

</td></tr><tr><td width="86">mode

</td><td width="64">可选

</td><td width="451">检测模式可以是normal(默认) 或者 oneface 。在oneface模式中，检测器仅找出图片中最大的一张脸。

</td></tr><tr><td width="86">attribute

</td><td width="64">可选

</td><td width="451">可以是none或者由逗号分割的属性列表。默认为gender, age, race, smiling。目前支持的属性包括：gender, age, race, smiling, glass, pose

</td></tr><tr><td width="86">tag

</td><td width="64">可选

</td><td width="451">可以为图片中检测出的每一张Face指定一个不包含^@,&=*'”等非法字符且不超过255字节的字符串作为tag，tag信息可以通过 /info/get_face 查询

</td></tr><tr><td width="86">async

</td><td width="64">可选

</td><td width="451">如果置为true，该API将会以异步方式被调用；也就是立即返回一个session id，稍后可通过/info/get_session查询结果。默认值为false。

</td></tr></tbody></table></div>返回结果如下：

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;face&quot;</span>: [&#123;</span><br><span class="line">    <span class="string">&quot;attribute&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;age&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;range&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: <span class="number">24</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;gender&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;confidence&quot;</span>: <span class="number">99.9999</span>,</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Female&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;glass&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;confidence&quot;</span>: <span class="number">99.4157</span>,</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: <span class="string">&quot;None&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;pose&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;pitch_angle&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="number">1e-06</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;roll_angle&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="number">0.650337</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;yaw_angle&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: -<span class="number">0.42409</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;race&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;confidence&quot;</span>: <span class="number">98.058</span>,</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Asian&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;smiling&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: <span class="number">3.78394</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;face_id&quot;</span>: <span class="string">&quot;9b4e21eba34985325293d5add1c7e255&quot;</span>,</span><br><span class="line">    <span class="string">&quot;position&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;center&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;x&quot;</span>: <span class="number">50.121951</span>,</span><br><span class="line">        <span class="string">&quot;y&quot;</span>: <span class="number">35.97561</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;eye_left&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;x&quot;</span>: <span class="number">43.465122</span>,</span><br><span class="line">        <span class="string">&quot;y&quot;</span>: <span class="number">30.670488</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;eye_right&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;x&quot;</span>: <span class="number">56.80878</span>,</span><br><span class="line">        <span class="string">&quot;y&quot;</span>: <span class="number">30.821951</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;height&quot;</span>: <span class="number">27.560976</span>,</span><br><span class="line">      <span class="string">&quot;mouth_left&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;x&quot;</span>: <span class="number">45.649512</span>,</span><br><span class="line">        <span class="string">&quot;y&quot;</span>: <span class="number">45.041707</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;mouth_right&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;x&quot;</span>: <span class="number">55.134878</span>,</span><br><span class="line">        <span class="string">&quot;y&quot;</span>: <span class="number">44.858049</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;nose&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;x&quot;</span>: <span class="number">50.183415</span>,</span><br><span class="line">        <span class="string">&quot;y&quot;</span>: <span class="number">38.410732</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;width&quot;</span>: <span class="number">27.560976</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="string">&quot;img_height&quot;</span>: <span class="number">410</span>,</span><br><span class="line">  <span class="string">&quot;img_id&quot;</span>: <span class="string">&quot;438d1eea1ba05fb112c8f3430f0b219b&quot;</span>,</span><br><span class="line">  <span class="string">&quot;img_width&quot;</span>: <span class="number">410</span>,</span><br><span class="line">  <span class="string">&quot;session_id&quot;</span>: <span class="string">&quot;d48f8e1acb2d421c8ae2cb146298a7f4&quot;</span>,</span><br><span class="line">  <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://faceplusplus.com/static/img/demo/1.jpg&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>取结果参数中的gender，age，race，smiling等参数 ，如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;attribute&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;range&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: <span class="number">17</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;gender&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;confidence&quot;</span>: <span class="number">99.9781</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Female&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;glass&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;confidence&quot;</span>: <span class="number">99.9815</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: <span class="string">&quot;None&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;pose&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;pitch_angle&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="number">0.000019753399999999996</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;roll_angle&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="number">1.75177</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;yaw_angle&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;race&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;confidence&quot;</span>: <span class="number">99.471</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Asian&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;smiling&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: <span class="number">87.1365</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述结果表示：</p>
<p>年龄age为17，误差在5岁 性别为female，表示女，置信度为99% 种族为亚洲Asian， 微笑度 87%</p>
<p>和图片比较一下，还是比较一致的</p>
<p><a href="/wp-content/uploads/2014/08/040959401895877.jpg"><img src="/wp-content/uploads/2014/08/040959401895877.jpg" alt="040959401895877"></a></p>
<p>face++的<strong>SDK如下：</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;!–?PHP  </span><br><span class="line"> <span class="comment">/** * Face++ PHP SDK * author: Tianye * since: 2013-12-11 **/</span>  </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Facepp</span></span>&#123;  </span><br><span class="line"> <span class="comment">######################################################  </span></span><br><span class="line"> <span class="comment">### If you choose Amazon(US) server,please use the ###  </span></span><br><span class="line"> <span class="comment">### http://apius.faceplusplus.com/v2 ### ### or ###  </span></span><br><span class="line"> <span class="comment">### https://apius.faceplusplus.com/v2 ###  </span></span><br><span class="line"> <span class="comment">######################################################  </span></span><br><span class="line"> <span class="keyword">var</span> <span class="variable">$server</span> = ‘http:<span class="comment">//apicn.faceplusplus.com/v2’;  </span></span><br><span class="line"> <span class="comment">#var $server = ‘https://apicn.faceplusplus.com/v2’;  </span></span><br><span class="line"> <span class="comment">#var $server = ‘http://apius.faceplusplus.com/v2’;  </span></span><br><span class="line"> <span class="comment">#var $server = ‘https://apius.faceplusplus.com/v2’;  </span></span><br><span class="line"> <span class="comment">#############################################  </span></span><br><span class="line"> <span class="comment">### set your api key and api secret here. ###  </span></span><br><span class="line"> <span class="comment">#############################################  </span></span><br><span class="line"> <span class="keyword">var</span> <span class="variable">$api_key</span> = ‘你的api_key ‘;  </span><br><span class="line"> <span class="keyword">var</span> <span class="variable">$api_secret</span> = ‘你的api_secret ‘;  </span><br><span class="line"> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$api_key</span>=<span class="literal">NULL</span>, <span class="variable">$api_secret</span>=<span class="literal">NULL</span>, <span class="variable">$server</span>=<span class="literal">NULL</span></span>)  </span></span><br><span class="line"><span class="function"> </span>&#123;  </span><br><span class="line"> <span class="keyword">if</span>(<span class="variable">$api_key</span>)&#123; <span class="keyword">$this</span>—&gt;api_key = <span class="variable">$api_key</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="keyword">if</span>(<span class="variable">$api_secret</span>)&#123;  </span><br><span class="line"> <span class="keyword">$this</span>-&gt;api_secret = <span class="variable">$api_secret</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="keyword">if</span>(<span class="variable">$server</span>)&#123;  </span><br><span class="line"> <span class="keyword">$this</span>-&gt;server = <span class="variable">$server</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $method : The Face++ API  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $params : Request Parameters  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> : Array &#123;‘http_code’:’Http Status Code’, ‘request_url’:’Http Request URL’,’body’:’ JSON Response’&#125;  </span></span><br><span class="line"><span class="comment"> **/</span>  </span><br><span class="line"> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params"><span class="variable">$method</span>,<span class="variable">$params</span></span>)</span>&#123;  </span><br><span class="line"> <span class="keyword">if</span>(<span class="keyword">empty</span>(<span class="variable">$params</span>))&#123;  </span><br><span class="line"> <span class="variable">$params</span>=<span class="keyword">array</span>();  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="variable">$params</span>[‘api_key’] = <span class="keyword">$this</span>-&gt;api_key;  </span><br><span class="line"> <span class="variable">$params</span>[‘api_secret’] = <span class="keyword">$this</span>-&gt;api_secret;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;request(<span class="string">&quot;<span class="subst">&#123;$this-&gt;server&#125;</span><span class="subst">&#123;$method&#125;</span>&quot;</span>,<span class="variable">$params</span>);  </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params"><span class="variable">$request_url</span> , <span class="variable">$request_body</span></span>)</span>&#123;  </span><br><span class="line"> <span class="variable">$useragent</span> = ‘Faceplusplus PHP SDK/<span class="number">1.0</span>’;  </span><br><span class="line"> <span class="variable">$curl_handle</span> = curl_init();  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_URL, <span class="variable">$request_url</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_FILETIME, <span class="literal">TRUE</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_FRESH_CONNECT, <span class="literal">FALSE</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_CLOSEPOLICY, CURLCLOSEPOLICY_LEAST_RECENTLY_USED);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_MAXREDIRS, <span class="number">5</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_HEADER, <span class="literal">FALSE</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_RETURNTRANSFER, <span class="literal">TRUE</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_TIMEOUT, <span class="number">5184000</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_CONNECTTIMEOUT, <span class="number">120</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_NOSIGNAL, <span class="literal">TRUE</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_REFERER, <span class="variable">$request_url</span>);  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_USERAGENT, <span class="variable">$useragent</span>);  </span><br><span class="line"> <span class="keyword">if</span> (extension_loaded(‘zlib’))&#123;  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_ENCODING, ”);  </span><br><span class="line"> &#125;  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_POST, <span class="literal">TRUE</span>);  </span><br><span class="line"> <span class="keyword">if</span>(array_key_exists(‘img’,<span class="variable">$request_body</span>))&#123;  </span><br><span class="line"> <span class="variable">$request_body</span>[‘img’] = ‘@’.<span class="variable">$request_body</span>[‘img’];  </span><br><span class="line"> &#125;<span class="keyword">else</span>&#123;  </span><br><span class="line"> <span class="variable">$request_body</span>=http_build_query(<span class="variable">$request_body</span>);  </span><br><span class="line"> &#125;  </span><br><span class="line"> curl_setopt(<span class="variable">$curl_handle</span>, CURLOPT_POSTFIELDS, <span class="variable">$request_body</span>);  </span><br><span class="line"> <span class="variable">$response_text</span> = curl_exec(<span class="variable">$curl_handle</span>);  </span><br><span class="line"> <span class="variable">$reponse_header</span> = curl_getinfo(<span class="variable">$curl_handle</span>);  </span><br><span class="line"> curl_close(<span class="variable">$curl_handle</span>);  </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">array</span>(‘http_code’=&gt;<span class="variable">$reponse_header</span>[‘http_code’],’request_url’=&gt;<span class="variable">$request_url</span>,’body’=&gt;<span class="variable">$response_text</span>);  </span><br><span class="line"> &#125;  </span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>调用方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!–?PHP <span class="keyword">require_once</span> ‘facepp_sdk.php’; <span class="comment">######################## ### example ### ######################## $facepp = new Facepp(); #detect local image $params=array(‘img’=–&gt;&#x27;&#123;image file path&#125;’);  </span></span><br><span class="line"> <span class="variable">$params</span>[‘attribute’] = ‘gender,age,race,smiling,glass,pose’;  </span><br><span class="line"> <span class="variable">$response</span> = <span class="variable">$facepp</span>-&gt;execute(‘/detection/detect’,<span class="variable">$params</span>);  </span><br><span class="line"> print_r(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#detect image by url  </span></span><br><span class="line"> <span class="variable">$params</span>=<span class="keyword">array</span>(‘url’=&gt;’http:<span class="comment">//www.faceplusplus.com.cn/wp-content/themes/faceplusplus/assets/img/demo/1.jpg’);  </span></span><br><span class="line"> <span class="variable">$response</span> = <span class="variable">$facepp</span>-&gt;execute(‘/detection/detect’,<span class="variable">$params</span>);  </span><br><span class="line"> print_r(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$response</span>[‘http_code’]==<span class="number">200</span>)&#123;  </span><br><span class="line"> <span class="comment">#json decode  </span></span><br><span class="line"> <span class="variable">$data</span> = json_decode(<span class="variable">$response</span>[‘body’],<span class="number">1</span>);  </span><br><span class="line"> <span class="comment">#get face landmark  </span></span><br><span class="line"> <span class="keyword">foreach</span> (<span class="variable">$data</span>[‘face’] <span class="keyword">as</span> <span class="variable">$face</span>) &#123;  </span><br><span class="line"> <span class="variable">$response</span> = <span class="variable">$facepp</span>-&gt;execute(‘/detection/landmark’,<span class="keyword">array</span>(‘face_id’=&gt;<span class="variable">$face</span>[‘face_id’]));  </span><br><span class="line"> print_r(<span class="variable">$response</span>);  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="comment">#create person  </span></span><br><span class="line"> <span class="variable">$response</span> = <span class="variable">$facepp</span>-&gt;execute(‘/person/create’,<span class="keyword">array</span>(‘person_name’=&gt;’unique_person_name’));  </span><br><span class="line"> print_r(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#delete person  </span></span><br><span class="line"> <span class="variable">$response</span> = <span class="variable">$facepp</span>-&gt;execute(‘/person/delete’,<span class="keyword">array</span>(‘person_name’=&gt;’unique_person_name’));  </span><br><span class="line"> print_r(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在微信中再将结果整理成文本消息就可以了。下面是实际使用结果：<br><a href="/wp-content/uploads/2014/08/getimgdata.jpg"><img src="/wp-content/uploads/2014/08/getimgdata.jpg" alt="getimgdata"></a></p>
<p><span style="text-indent: 2em;">感兴趣的可以关注服务号bistu体验。</span></p>
<p>当然了，这只是最简单的face++和微信结合使用的案例，face++还有许多更为强大的功能等待着大家的实际应用。</p>
<p>悲剧的是本人识别了几张。。奈何长相太老成，识别最低年龄也要28…..俺才大二啊。。说多了都是泪~</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-08-12T09:06:35.000Z" title="8/12/2014, 5:06:35 PM">2014-08-12</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-08-12T09:06:35.000Z" title="8/12/2014, 5:06:35 PM">2014-08-12</time></span><span class="level-item">5 minutes read (About 735 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/08/12/Bistu-Library-API/">Bistu Library API</a></h1><div class="content"><p>北京信息科技大学图书馆API。（PHP语言实现）</p>
<p>思路：</p>
<p>1.post数据，分析网页url。</p>
<p>2.加壳。</p>
<p>说说大概过程，首先登陆图书馆主页，进入图书检索页面:</p>
<p><a target="_blank" rel="noopener" href="http://211.68.37.131/book/queryIn.jsp">http://211.68.37.131/book/queryIn.jsp</a></p>
<p>提交查询数据，用chrome或Firefox等开发工具抓取到post数据包，分析之，如本校图书检索，提交检索词之后跳到新页面（<span style="color: #00ccff;"><a target="_blank" rel="noopener" href="http://211.68.37.131/book/queryOut.jsp">http://211.68.37.131/book/queryOut.jsp</a></span>）。表面上看不出post地址，抓包也看不出提交地址：</p>
<p><a href="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140812201608.jpg"><img src="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140812201608.jpg" alt="QQ图片20140812201608"></a></p>
<p>但区区方正系统怎么能难倒聪明的大家呢，对搜索结果的页面：</p>
<p>（<span style="color: #00ccff;"><a target="_blank" rel="noopener" href="http://211.68.37.131/book/queryOut.jsp">http://211.68.37.131/book/queryOut.jsp</a></span>）分析，不难发现，search result实则是iframe框架：</p>
<p>iframe src=’search.jsp?recordtype=all&amp;library_id=all&amp;kind=simple&amp;word=PHP&amp;cmatch=qx&amp;searchtimes=1&amp;type=title’ name=”ivote” id=”ss1” frameborder=0 width=”990” height=”450” style=”overflow:hidden”</p>
<p>取数据就跟看人一样。一眼看上去没啥，还不错。但等你细心去观察它，去测试它，它就马上原形毕露，将本质暴露出来：</p>
<p><code>search.jsp?recordtype=all&amp;library_id=all&amp;kind=simple&amp;word=PHP&amp;cmatch=qx&amp;searchtimes=1&amp;type=title</code></p>
<p>主要参数说明：</p>
<p>recordtype：资料类型，默认为all</p>
<p>library_id：分馆名称，默认为all</p>
<p>kind： 隐藏字段，默认为simple</p>
<p>word：检索词，必填</p>
<p>cmatch：匹配方式，默认为qx</p>
<p>searchtimes：默认为1</p>
<p>type：检索词类型，默认为title</p>
<p>post之后获取到的是默认的前10条数据，怎么破？easy，直接请求post的url页面</p>
<p>（<span style="color: #00ccff;"><a target="_blank" rel="noopener" href="http://211.68.37.131/book/search.jsp?recordtype=all&amp;library_id=all&amp;kind=simple">http://211.68.37.131/book/search.jsp?recordtype=all&amp;library_id=all&amp;kind=simple</a></span></p>
<p><span style="color: #00ccff;">&amp;word=PHP&amp;cmatch=qx&amp;searchtimes=1&amp;type=title</span>），再分析之：</p>
<p><a href="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140812203903.jpg"><img src="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140812203903.jpg" alt="QQ图片20140812203903"></a></p>
<p>你会发现，你会流泪，真正…….好吧，我走神了。。。你会发现size参数，测试下，在url后直接加上<code>&amp;size=50</code>，发现数据增加到50条。OK，这样算是有API了。</p>
<p>我的初衷是做微信查图书的功能。所以还需改造一番，比如取到数据后，还需取到图书的详细信息（在架？可借？等），其详细信息在图书title的link中，正则出来即可，然后再取到详细信息。</p>
<p>整体流程：<span style="color: #ff6600;">user post data -&gt; get search result -&gt; print/get link -&gt;get book info -&gt;print</span></p>
<p>效果图如下：</p>
<p><a href="/wp-content/uploads/2014/08/libarary1.jpg"><img src="/wp-content/uploads/2014/08/libarary1.jpg" alt="libarary1"></a> <a href="/wp-content/uploads/2014/08/libarary2.jpg"><img src="/wp-content/uploads/2014/08/libarary2.jpg" alt="libarary2"></a> <a href="/wp-content/uploads/2014/08/libarary3.jpg"><img src="/wp-content/uploads/2014/08/libarary3.jpg" alt="libarary3"></a></p>
<p>可通过关注服务号【bistu】查看。</p>
<p><a href="/wp-content/uploads/2014/08/qrcode_for_gh_0098f95b28a8_430-2.jpg"><img src="/wp-content/uploads/2014/08/qrcode_for_gh_0098f95b28a8_430-2.jpg" alt="qrcode_for_gh_0098f95b28a8_430 (2)"></a></p>
<p><span style="font-size: medium;"><strong>代码已提交之github：<a target="_blank" rel="noopener" href="https://github.com/flute/Bistu-library-API">https://github.com/flute/Bistu-library-API</a></strong></span></p>
<p>欢迎交流学习。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2014-08-05T11:42:09.000Z" title="8/5/2014, 7:42:09 PM">2014-08-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2014-08-05T11:42:09.000Z" title="8/5/2014, 7:42:09 PM">2014-08-05</time></span><span class="level-item">8 minutes read (About 1174 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2014/08/05/%E5%9F%BA%E4%BA%8E%E5%BE%AE%E4%BF%A1%E7%9A%84%E3%80%90%E7%82%B9%E6%AD%8C%E5%8F%B0%E3%80%91%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91/">基于微信的【点歌台】功能开发</a></h1><div class="content"><p>微网站，微社区，微店铺……现在是实打实的微时代啊。据我观测，随着移动互联时代的推进，web app将会走红，人们习惯于APP的操作界面，又不喜欢安装各种APP，所以基于云端的web app势必要走红，而微信的火热恰好为微网站提供了大显身手的舞台~废话太多了，进入主题吧，好久没写时间写博客了。</p>
<p>思路是用户提交关键字后，利用百度音乐API取出音乐地址，然后以音乐的格式返回。</p>
<p>百度API：<a target="_blank" rel="noopener" href="http://box.zhangmen.baidu.com/x?op=12&amp;count=1&amp;title=%E5%B0%8F%E8%8B%B9%E6%9E%9C$$%E7%AD%B7%E5%AD%90%E5%85%84%E5%BC%9F$$$$">http://box.zhangmen.baidu.com/x?op=12&amp;count=1&amp;title=小苹果$$筷子兄弟$$$$</a></p>
<p>可见API中需要提交音乐名称和歌手名字，而且歌手名字需要准确。像我这种只听歌，不记歌手的人来说，这接口基本算是废了。怎么办？easy，我的思路是先到比较大的音乐站点，提交歌名，然后抓取到返回结果中第一首歌的歌手名，其实一般大家熟知的歌，在搜索结果中排名都是第一位的。所以这样返回的歌手基本上90%就是你所需要的。</p>
<p>既然有了思路就开工呗，先喵一个音乐网站被，我就选酷我了，登陆酷我首页，提交关键字“小苹果”，得到返回结果，用chrome工具分析post数据，可以看到提交的url为：</p>
<p><a target="_blank" rel="noopener" href="http://sou.kuwo.cn/ws/NSearch?type=all&amp;key=%E5%B0%8F%E8%8B%B9%E6%9E%9C">http://sou.kuwo.cn/ws/NSearch?type=all&amp;key=%E5%B0%8F%E8%8B%B9%E6%9E%9C</a></p>
<p>用urldecode反编码即为：<a target="_blank" rel="noopener" href="http://sou.kuwo.cn/ws/NSearch?type=all&amp;key=%E5%B0%8F%E8%8B%B9%E6%9E%9C">http://sou.kuwo.cn/ws/NSearch?type=all&amp;key=小苹果</a></p>
<p>可以看到搜索结果的前五首都是筷子兄弟，所以准确率还是可以的，然后就是抓取这个搜索页面，分析网页，正则匹配出我们所需的第一首歌的歌手，这个我就不多说了，正则是个耐心活，自己慢慢匹吧~</p>
<p>现在我们已经内容那个通过歌名获取到歌手名字了，接下来解释post百度API了，返回XML形式的数据：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&lt;result&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;count&gt;<span class="number">1</span>&lt;/count&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible1&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;url&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible2&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;encode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible3&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;![CDATA[&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;http:<span class="comment">//zhangmenshiting.baidu.com/data2/music/121184680/YmRkZW1qbXBhYKCkaHWvm6CWmHGXbGxslZNmZpiZmmxia2NrbGpoaJRplZqZl2yZY2KUZGZmnJphlWZqZpxpaWpkbG1bo6CcbmJham5tbWhnaGVnZW5ramcy&lt;/div&gt;  </span></span><br><span class="line">&lt;div&gt;]]&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/encode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible4&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;decode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible5&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;![CDATA[&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;<span class="number">121184680</span>.mp3?xcode=b654da32ccc419077410c7bfda5a20a010eb0c361f219299&amp;mid=<span class="number">0.69760662308426</span>&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;]]&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/decode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;type&gt;<span class="number">8</span>&lt;/type&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;lrcid&gt;<span class="number">25467</span>&lt;/lrcid&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;flag&gt;<span class="number">0</span>&lt;/flag&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/url&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible6&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;durl&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible7&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;encode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible8&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;![CDATA[&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;http:<span class="comment">//zhangmenshiting2.baidu.com/data2/music/121184718/YmRkZW1qbmlpYKCkaHWvm6CWmHGXbGxslZNmZpiZmmxia2NrbGpoaJRplZqZl2yZY2KUZJZpbmhjZWZpZ22camKXZJVbo6CcbmJham5tbWhnaGVnZW5ramcy&lt;/div&gt;  </span></span><br><span class="line">&lt;div&gt;]]&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/encode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible9&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;decode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div id=<span class="string">&quot;collapsible10&quot;</span>&gt;  </span><br><span class="line">&lt;div&gt;  </span><br><span class="line">&lt;div&gt;&lt;![CDATA[&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;<span class="number">121184718</span>.mp3?xcode=b654da32ccc419077410c7bfda5a20a0a370233527e21e1a&amp;mid=<span class="number">0.69760662308426</span>&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;]]&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/decode&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;type&gt;<span class="number">8</span>&lt;/type&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;lrcid&gt;<span class="number">25467</span>&lt;/lrcid&gt;&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;flag&gt;<span class="number">0</span>&lt;/flag&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/durl&gt;&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">&lt;div&gt;&lt;/result&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这里第一个encode返回的url并不是MP3的真实地址，而是encode的url去掉最后一串字符串然后加上decode的url，就是他的低品质MP3地址，本例就是<a target="_blank" rel="noopener" href="http://zhangmenshiting.baidu.com/data2/music/121184680/121184680.mp3?xcode=b654da32ccc419077410c7bfda5a20a010eb0c361f219299&amp;mid=0.69760662308426">http://zhangmenshiting.baidu.com/data2/music/121184680/121184680.mp3?xcode=b654da32ccc419077410c7bfda5a20a010eb0c361f219299&amp;mid=0.69760662308426</a></p>
<p>第二个encode和decode合并出来的是高品质的MP3地址。</p>
<p>XML中还包含歌词信息，取出<lrcid>25467</lrcid>标签中的数字，歌词地址就是<a target="_blank" rel="noopener" href="http://box.zhangmen.baidu.com/bdlrc/254/25467.lrc%EF%BC%8C%E7%9B%B8%E4%BF%A1%E8%81%AA%E6%98%8E%E7%9A%84%E5%A4%A7%E5%AE%B6%E5%B7%B2%E7%BB%8F%E6%98%8E%E7%99%BD%E4%BA%86%E7%AE%97%E6%B3%95%EF%BC%8C%E5%B0%B1%E6%98%AFhttp://box.zhangmen.baidu.com/bdlrc/%E3%80%90%E6%95%B0%E5%AD%97/100%E5%8F%96%E6%95%B4%E3%80%91/%E6%95%B0%E5%AD%97%EF%BC%8C%E7%84%B6%E5%BD%93%E7%84%B6%E8%BF%99%E4%B8%AA%E6%98%AF%E9%A2%9D%E4%B8%BA%E7%9A%84%E8%AF%9D%E9%A2%98%E4%BA%86%E3%80%82">http://box.zhangmen.baidu.com/bdlrc/254/25467.lrc，相信聪明的大家已经明白了算法，就是http://box.zhangmen.baidu.com/bdlrc/【数字/100取整】/数字，然当然这个是额为的话题了。</a></p>
<p>知道了真实链接的获取方法，剩下的就是用正则匹配处理了,然后与微信返回音乐的格式相结合就OK了。</p>
<p>微信返回音乐的格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>12345678<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[music]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">Music</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[TITLE]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[DESCRIPTION]]&gt;<span class="tag">&lt;/<span class="name">Description</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">MusicUrl</span>&gt;</span>&lt;![CDATA[MUSIC_Url]]&gt;<span class="tag">&lt;/<span class="name">MusicUrl</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">HQMusicUrl</span>&gt;</span>&lt;![CDATA[HQ_MUSIC_Url]]&gt;<span class="tag">&lt;/<span class="name">HQMusicUrl</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">ThumbMediaId</span>&gt;</span>&lt;![CDATA[media_id]]&gt;<span class="tag">&lt;/<span class="name">ThumbMediaId</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">Music</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">xml</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<p>最后将整个流程封装成一个类（最经发现有点强迫症心里，写的方法不封装就心里不爽= =），截个图供参考，想要代码自己照着敲吧<del>鄙视伸手党，哈哈</del></p>
<p><a href="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140805232940.jpg"><img src="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140805232940.jpg" alt="QQ图片20140805232940"></a>调用方法很简单，实例化后直接传入参数：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$music</span> = <span class="keyword">new</span> MusicUrl();  </span><br><span class="line"> <span class="variable">$key</span> = str_replace(<span class="string">&quot;音乐&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$key</span>);  </span><br><span class="line"> <span class="variable">$contents</span> = <span class="variable">$music</span> -&gt; get_musicurl(<span class="variable">$key</span>);  </span><br><span class="line"> <span class="variable">$content</span> = <span class="keyword">array</span>();  </span><br><span class="line"> <span class="variable">$content</span>[] = <span class="keyword">array</span>(  </span><br><span class="line"> <span class="string">&quot;Title&quot;</span>=&gt;<span class="variable">$contents</span>[‘Title’].<span class="string">&quot;—&quot;</span>.<span class="variable">$contents</span>[‘Description’],  </span><br><span class="line"> <span class="string">&quot;Description&quot;</span>=&gt;<span class="variable">$contents</span>[‘Description’],  </span><br><span class="line"> <span class="string">&quot;PicUrl&quot;</span>=&gt;<span class="string">&quot;http://attach.bbs.miui.com/forum/201106/23/2102102z5ajpqgd2hwjn20.jpg&quot;</span>,  </span><br><span class="line"> <span class="string">&quot;Url&quot;</span> =&gt;<span class="string">&quot;http://1.wesae.sinaapp.com/play.php?title=&quot;</span>.<span class="variable">$contents</span>[‘Title’].<span class="string">&quot;&amp;description=&quot;</span>.<span class="variable">$contents</span>[‘Description’].<span class="string">&quot;&amp;musicurl=&quot;</span>.<span class="variable">$contents</span>[‘MusicUrl’]  </span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<p>如果想用微信自带浏览器播放的话，介绍一款js播放器：audio.js，方便调用，可以试试。</p>
<p>最终效果图如下：</p>
<p><a href="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140805233748.jpg"><img src="/wp-content/uploads/2014/08/QQ%E5%9B%BE%E7%89%8720140805233748.jpg" alt="QQ图片20140805233748"></a>大家可以关注服务号【bistu】查看，有问题欢迎留言探讨~</p>
<p><a href="/wp-content/uploads/2014/08/qrcode_for_gh_0098f95b28a8_430-2.jpg"><img src="/wp-content/uploads/2014/08/qrcode_for_gh_0098f95b28a8_430-2.jpg" alt="qrcode_for_gh_0098f95b28a8_430 (2)"></a></p>
<p> </p>
<p> </p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/8/">Previous</a></div><div class="pagination-next"><a href="/page/10/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/8/">8</a></li><li><a class="pagination-link is-current" href="/page/9/">9</a></li><li><a class="pagination-link" href="/page/10/">10</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/18/">18</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://img.ikstatic.cn/MTYzMTE3MTU3NDM3MCM1MzYjcG5n.png" alt="Ludis"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Ludis</p><p class="is-size-6 is-block">Valar Morghulis, Valar Dohaeris</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">177</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">17</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/flute" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/flute"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/3852099619"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:552452006@qq.com"><i class="far fa-envelope"></i></a></div></div></div><!--!--><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-30T07:42:16.000Z">2021-06-30</time></p><p class="title"><a href="/2021/06/30/React-Antd-Warning%E7%A7%BB%E9%99%A4%E5%A4%A7%E6%B3%95%E2%80%94%E2%80%94%E6%95%B4%E4%B8%AA%E4%B8%96%E7%95%8C%E6%B8%85%E5%87%80%E4%BA%86/">React/Antd Warning移除大法——整个世界清净了</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-05-14T10:41:14.000Z">2020-05-14</time></p><p class="title"><a href="/2020/05/14/IntersectionObserver/">IntersectionObserver</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-06T13:45:55.000Z">2020-02-06</time></p><p class="title"><a href="/2020/02/06/%E5%BE%AE%E5%B1%81%E6%81%A9%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%E4%B9%8B-%E2%80%94%E2%80%94-V2Ray/">微屁恩使用指南之 —— V2Ray</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-10T07:45:26.000Z">2019-12-10</time></p><p class="title"><a href="/2019/12/10/H5%E5%9C%A8%E5%85%A8%E5%B1%8FWebview%E4%B8%AD%E5%8F%8C%E7%AB%AF%E9%80%82%E9%85%8D%E5%88%98%E6%B5%B7%E5%B1%8F/">H5在全屏Webview中双端适配刘海屏</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-07-25T09:58:45.000Z">2019-07-25</time></p><p class="title"><a href="/2019/07/25/vue-%E9%A1%B9%E7%9B%AE%E5%9C%A8%E4%BD%8E%E9%85%8D%E6%9C%BA%E5%99%A8%E4%B8%8A%E7%BA%BF%E5%8F%8A%E4%BC%98%E5%8C%96/">vue 项目在低配机器上线及优化</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">March 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">December 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/11/"><span class="level-start"><span class="level-item">November 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/10/"><span class="level-start"><span class="level-item">October 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/09/"><span class="level-start"><span class="level-item">September 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/08/"><span class="level-start"><span class="level-item">August 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/07/"><span class="level-start"><span class="level-item">July 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/02/"><span class="level-start"><span class="level-item">February 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/12/"><span class="level-start"><span class="level-item">December 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/11/"><span class="level-start"><span class="level-item">November 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/10/"><span class="level-start"><span class="level-item">October 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/09/"><span class="level-start"><span class="level-item">September 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/08/"><span class="level-start"><span class="level-item">August 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/07/"><span class="level-start"><span class="level-item">July 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/06/"><span class="level-start"><span class="level-item">June 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/05/"><span class="level-start"><span class="level-item">May 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/04/"><span class="level-start"><span class="level-item">April 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/03/"><span class="level-start"><span class="level-item">March 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/02/"><span class="level-start"><span class="level-item">February 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">January 2015</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/12/"><span class="level-start"><span class="level-item">December 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/11/"><span class="level-start"><span class="level-item">November 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/10/"><span class="level-start"><span class="level-item">October 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/09/"><span class="level-start"><span class="level-item">September 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/08/"><span class="level-start"><span class="level-item">August 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/07/"><span class="level-start"><span class="level-item">July 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/06/"><span class="level-start"><span class="level-item">June 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/05/"><span class="level-start"><span class="level-item">May 2014</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/04/"><span class="level-start"><span class="level-item">April 2014</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/03/"><span class="level-start"><span class="level-item">March 2014</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/02/"><span class="level-start"><span class="level-item">February 2014</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/01/"><span class="level-start"><span class="level-item">January 2014</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/12/"><span class="level-start"><span class="level-item">December 2013</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/11/"><span class="level-start"><span class="level-item">November 2013</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/10/"><span class="level-start"><span class="level-item">October 2013</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ghost/"><span class="tag">Ghost</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/H5/"><span class="tag">H5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTTPS/"><span class="tag">HTTPS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React-Native/"><span class="tag">React Native</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sublime/"><span class="tag">Sublime</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/npm/"><span class="tag">npm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E8%A7%86%E5%89%A7/"><span class="tag">电视剧</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BE%8E%E9%A3%9F/"><span class="tag">美食</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">3</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/facvion.png" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2021 Ludis</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/flute"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>