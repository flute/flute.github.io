<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Ludis"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Ludis"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Hexo"><meta property="og:url" content="https://ldsun.com/"><meta property="og:site_name" content="Hexo"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ldsun.com/img/og_image.png"><meta property="article:author" content="Ludis"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ldsun.com"},"headline":"Hexo","image":["https://ldsun.com/img/og_image.png"],"author":{"@type":"Person","name":"Ludis"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"https://ldsun.com/img/facvion.png"}},"description":""}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/facvion.png" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/flute"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-06-30T07:42:16.000Z" title="6/30/2021, 3:42:16 PM">2021-06-30</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-06-30T07:42:16.000Z" title="6/30/2021, 3:42:16 PM">2021-06-30</time></span><span class="level-item">3 minutes read (About 408 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/06/30/React-Antd-Warning%E7%A7%BB%E9%99%A4%E5%A4%A7%E6%B3%95%E2%80%94%E2%80%94%E6%95%B4%E4%B8%AA%E4%B8%96%E7%95%8C%E6%B8%85%E5%87%80%E4%BA%86/">React/Antd Warning移除大法——整个世界清净了</a></h1><div class="content"><p>好久没更了，真的是好久... 续个命233 HP+100</p><p>最近在搬砖搞一套后台系统，用的react 17.0.1 + antd 4.12.3.</p><p>闲下来瞅了瞅控制台，艾玛，几十个warning...</p><p>90%都是eslint对react hook依赖的警告。虽然说可以直接 <code>eslint-disable-next-line</code> 一劳永逸，然而总感觉不太专业...</p><p>于是乎，为了去除warning，按照react官方推荐写法，简简单单的一段代码就变得emmmmmm....</p><p>消除hook warning后，最终剩下两个不明所以的warning：</p><p>这两个警告只能通过升级库解决，并非自身代码问题。</p><p>一、</p><p>SharedArrayBuffer will require cross-origin isolation as of M91, around May 2021. See</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://img.ikstatic.cn/MTYyNTAzODY3MDk0NCM0NzAjanBn.jpg" class="kg-image"></figure><!--kg-card-end: image--><p>原因是react 17.0.1 使用了 SharedArrayBuffer 这个API，这个API在将来随着chrome的更新，可能会导致旧功能不可用，所以会报警告。</p><p><strong>解决方法： 将react 17.0.1 升级至 17.0.2 。</strong><br>react在新版本中解决了这一隐患</p><p>二、</p><p>You are using a whole package of antd, please use <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/babel-plugin-import">https://www.npmjs.com/package/babel-plugin-import</a> to reduce app bundle size.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://img.ikstatic.cn/MTYyNTAzODY3NzM3MSM0OTEjanBn.jpg" class="kg-image"></figure><!--kg-card-end: image--><p>这是antd报的警告，提示antd未按需加载。这个警告困扰了我许久，webpack已经设置babel-plugin-import插件来做tree-shaking了，而且分析打包出的文件，确实实现了按需加载。蛋柿，这个警告阴魂不散... 最终发现时antd的bug，已经在16.13.0修复在本地开发时会报 tree-shaking 警告信息的问题。</p><p><strong>解决方法： 将antd 4.12.3 升级至 4.13.0 以上即可。</strong></p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-05-14T10:41:14.000Z" title="5/14/2020, 6:41:14 PM">2020-05-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-05-14T10:41:14.000Z" title="5/14/2020, 6:41:14 PM">2020-05-14</time></span><span class="level-item">12 minutes read (About 1747 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/05/14/IntersectionObserver/">IntersectionObserver</a></h1><div class="content"><h3 id="IntersectionObserver"><a href="#IntersectionObserver" class="headerlink" title="IntersectionObserver"></a>IntersectionObserver</h3><p>最近发现一个有趣的API，实际上这个api已经面世好几年了，但最初浏览器兼容性有限，加上此功能使用场景不频繁，且有成熟的替代方案，所以知道的人并不多。</p>
<p>这个接口的功能，简单来说就是：<strong>监测页面中的某个元素的可视状态。</strong>可以是该元素相对于整个视窗的可见性，也可以是相对于某个父元素的可见性。我们平时使用较多的场景大概有：</p>
<p>举个栗子：</p>
<ol>
<li>无限加载：滑动到底部时开始加载下页</li>
<li>吸顶效果：在页面滑动时触发某元素的悬浮效果（如下滑到一定位置，顶栏悬浮固定）</li>
</ol>
<p>目前我们常用的成熟方案是，监听页面/元素的scroll事件，在scroll事件中通过判断元素的位置，来进行相应的逻辑处理。或者是分别通过<code>touchstart</code> <code>touchmove</code> <code>touchend</code> 等触摸事件，来判断滑动方向，滑动距离，再做出相应处理。主流的一些相关功能库基本也是这样的实现原理，如<code>iscroll.js</code>等。</p>
<h4 id="从微信小程序的一个bug说起说起"><a href="#从微信小程序的一个bug说起说起" class="headerlink" title="从微信小程序的一个bug说起说起"></a>从微信小程序的一个bug说起说起</h4><p>这些方案使用上并没有太明显的问题，然而最近在开发小程序时，有一个滑动吸顶的效果，需要根据滑动距离变换顶部的背景，采用的便是上述的方案，监听<code>scroll-view</code>的滚动事件，根据元素距离顶部的距离实时判断修改。</p>
<p>为了提高性能，多滚动事件采取了节流，在此过程中发现小程序的一个问题，那就是采用节流后，如果滑动过快，小程序bindscroll事件返回的组件距离顶部位置会有错误，比如我从距顶50像素迅速滑到0，此时回调函数返回的任然是50。试验了下跟节流时间关系不大，即便设置几毫秒的节流间隔，已然存在这个问题。而如果不设置节流，在低端机，尤其安卓机上频繁触发，导致页面相当卡顿。</p>
<p>最后搜索半天，在<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/0008eeba9e0f9062b27780d9856c00?highline=bindscroll%20scrollTop">微信开发者社区</a>发现了原因所在。根据官方给出的解决方案，给<code>scroll-view</code>组件增加一个属性<code>throttle=&quot;&#123;&#123;false&#125;&#125;&quot;</code>（官方文档中并无此属性），原因是官方的组件在配发滑动事件时，默认开启了节流，在滑动过快时，有部分事件可能被节流掉，就出现了上述情况，去掉官方节流，保证事件都能触发，然后自己再实现节流即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;scroll-view</span><br><span class="line">    throttle=&quot;&#123;&#123;false&#125;&#125;&quot;</span><br><span class="line">    bindscroll=&quot;handleScroll&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>说道半途记起的一个bug，回归正题。<br>使用监听scrool事件的方法，不是用节流肯定是不行的，节流事件如果太短，那么节流效果不明显，时间太长的话，事件响应又不够及时。经过权衡设置了大概50~100ms的延时，让事件的配发频率和响应延时都能接受，但效果任然不够理想，达不到极致的体验。理想情况下，我们追求：响应及时、性能负担小。</p>
<p>无意间看到微信的一个新的api <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createIntersectionObserver.html">wx.createIntersectionObserver</a>，简单了解后不明觉厉，然后发现浏览器端也有对应的IntersectionObserver API（“交叉观察器”）。由此引出一种新的更完美的解决方案，即抛弃scroll事件，采用新的“交叉观察器”</p>
<p><strong>scroll事件的一些缺点：</strong><br>1、响应密集，会造成性能问题<br>2、为解决1，采用节流后响应不够及时<br>3、实现某些需求较为复杂：如，当视频滑到可视区域时自动播放等，需要判断列表中某元素的位置，较为复杂<br>4、统计列表中个元素的曝光量（这个用scroll时间监听的话感觉头都裂了）</p>
<h4 id="IntersectionObserver-1"><a href="#IntersectionObserver-1" class="headerlink" title="IntersectionObserver"></a>IntersectionObserver</h4><p>MDN doc介绍：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntersectionObserver接口 (从属于Intersection Observer API) 提供了一种异步观察目标元素与其祖先元素或顶级文档视窗(viewport)交叉状态的方法。祖先元素与视窗(viewport)被称为根(root)。</span><br></pre></td></tr></table></figure>

<p><strong>属性：</strong></p>
<ul>
<li><p>IntersectionObserver.root</p>
<p>  要监听元素的父级窗口，及我要监听的元素，是相对于那个视窗的可见性，是整个全屏的视窗，还是页面中某个容器。不传默认为全局的视窗</p>
</li>
<li><p>IntersectionObserver.rootMargin</p>
<p>  相对于视窗的偏移量</p>
</li>
<li><p>IntersectionObserver.thresholds</p>
<p>  阈值的列表, 按升序排列。阈值指所监听元素的可视比例，全部不可见为0，全部可见为1，配置此属性后，会在到达对应阈值后触发回调事件，如[0.1, 0.4, 1] 表示在可视比例达到10%、40%、100%时，会分别相应回调事件；如果不设置，默认是在元素全显和全隐时分别触发。</p>
</li>
</ul>
<p><strong>方法：</strong></p>
<ul>
<li><p>IntersectionObserver.disconnect()</p>
<p>  使IntersectionObserver对象停止监听工作。</p>
</li>
<li><p>IntersectionObserver.observe()</p>
<p>  使IntersectionObserver开始监听一个目标元素。</p>
</li>
<li><p>IntersectionObserver.takeRecords()</p>
<p>  返回所有观察目标的IntersectionObserverEntry对象数组。</p>
</li>
<li><p>IntersectionObserver.unobserve()</p>
<p>  使IntersectionObserver停止监听特定目标元素。</p>
</li>
</ul>
<p><strong>示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> intersectionObserver = <span class="keyword">new</span> IntersectionObserver(<span class="function"><span class="keyword">function</span>(<span class="params">entries</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// If intersectionRatio is 0, the target is out of view</span></span><br><span class="line">  <span class="comment">// and we do not need to do anything.</span></span><br><span class="line">  <span class="keyword">if</span> (entries[<span class="number">0</span>].intersectionRatio &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  loadItems(<span class="number">10</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Loaded new items&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// start observing</span></span><br><span class="line">intersectionObserver.observe(<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.scrollerFooter&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html">阮一峰老师有一篇文章</a>写的很简洁易懂，推荐去看看。</p>
<h4 id="微信小程序-wx-createIntersectionObserver"><a href="#微信小程序-wx-createIntersectionObserver" class="headerlink" title="微信小程序 wx.createIntersectionObserver"></a>微信小程序 wx.createIntersectionObserver</h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createIntersectionObserver.html">小程序的此API</a>与web端的API如出一辙，使用方法大致相似。</p>
<p>使用步骤：</p>
<p>1、wx.createIntersectionObserver 创建并返回一个IntersectionObserver 对象实例。</p>
<p>2、指定可视窗口参照物</p>
<ul>
<li>IntersectionObserver.relativeTo 传入一个父级元素，作为可视窗口</li>
<li>IntersectionObserver.relativeToViewport 指定页面的整个窗口作为可视参照</li>
</ul>
<p>3、IntersectionObserver.observe 开始监听</p>
<p>使用步骤大概就是这三步，具体的配置可参考文档。</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>研究哇这个api后，果断将判断吸顶时用的scroll时间替换为IntersectionObserver，体验就是写法上更简洁，性能更好，能满足更多需求。</p>
<p>所以基本上IntersectionObserver可以完爆scroll了，一些使用广泛的库也开始使用此方案了，so 赶快用起来吧。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-02-06T13:45:55.000Z" title="2/6/2020, 9:45:55 PM">2020-02-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-06-30T07:41:54.000Z" title="6/30/2021, 3:41:54 PM">2021-06-30</time></span><span class="level-item">14 minutes read (About 2159 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/02/06/%E5%BE%AE%E5%B1%81%E6%81%A9%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%E4%B9%8B-%E2%80%94%E2%80%94-V2Ray/">微屁恩使用指南之 —— V2Ray</a></h1><div class="content"><p>2020.02.06<br>廊坊，大雪；陕南，雨 ；平凉，大晴。<br>新冠，正嚣张；强食自爱，正当时。</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/DC72E462-DEC2-4724-91DE-C19FE3FEE72E_Original.jpg!ghost" alt="DC72E462-DEC2-4724-91DE-C19FE3FEE72E_Origina"></p>
<blockquote>
<p>弱小和无知不是生存的障碍，傲慢才是。</p>
<p align="right">—— 刘慈溪，《三体》</p>
</blockquote>
<p>正值立春，雨雪飘零，又时下革命形式严峻，当即抄写《卜算子·咏梅》。吾辈当继承毛泽东同志坚贞不屈的革命意志，面对疫情，严阵以待，做好防护。</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/IMG_2981.jpg!ghost" alt="IMG_2981"></p>
<p><strong>下文，非刁民勿入！</strong></p>
<blockquote>
<p><em>这些墙很有意思，刚开始你恨它，慢慢的你习惯于其中，时间久了，你发现离不开它了，这就是“体制化”。</em><br><em><p align="right">—— 《肖生克的救赎》（The Shawshank Redemption）</p></em></p>
</blockquote>
<h4 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h4><p>本文旨在介绍新的科学上网方式——<strong>V2Ray</strong>的使用。</p>
<p>从最开始GFW（Great Firewall，中文也称中国国家防火墙）之父，国之栋梁方滨兴院士，主导、研发、建立国家防火墙工程之后，大陆通往世界的互联网道路从此被阻隔。从建立伊始至今，此墙为广大中国人民屏蔽了无数的不良言论，得以使国内长期处于一片祥和的氛围当中。由此也诞生了中国最具良心、以搜索引擎起家的顶级互联网企业百度，此墙可谓国之重器。</p>
<p>然穷山恶水出刁民，总有刁民想翻墙。刁民谓：</p>
<blockquote>
<p><em>面对威权压迫，你是甘为一辈子懦夫，还是坚定勇气，试着改变这个污浊不堪的世界？于此，虽千万人吾往矣。全新的shadowsocksR管理助手——SSR.Go，现已问世。长夜漫漫，父说，擦亮双眸的你，需要一道光明，使者便从了他的意，把光明给带来了。</em><br><em><p align="right">—— Github SSR.Go 作者</p></em></p>
</blockquote>
<p>时过境迁，在广大院士们的忘我科研中，墙越来越不易翻越，刁民们逐渐疲于应对，只能不断更换翻墙方式。从最初的ss到ssr，再到此文介绍的V2Ray，只为了看一眼墙外的景色。</p>
<p>V2Ray相比于ss系列，有何不同。首先直白的说下防火墙及翻墙与被封的原理。</p>
<p><strong>防火墙的原理</strong>，就是通过各电信运营商，在大陆与外网通信的网络出入口，对传输的内容进行筛选、过滤。如果发现是国军，立马原地劝返。如果是共军则放行。至于如何识别是共军还是国军呢，大致的方法有 <strong>IP黑名单</strong>、<strong>内容审查</strong>、<strong>DNS劫持</strong> 等<sup>[1]</sup>。</p>
<ul>
<li>IP黑名单，简单说将外网的一些网站ip地址加入黑名单，如FB/Google等，当你的请求指向的地址在黑名单中，立即截断。</li>
<li>内容审查，会有一份敏感词的列表，对于未加密传播的HTTP内容，拦截解析之，如果内容中包含敏感词，不好意思，白白了您嘞。</li>
<li>DNS劫持，可以理解为域名黑名单，对黑名单中的域名，将其解析到虚拟的ip地址。</li>
</ul>
<p><strong>ss/ssr的原理</strong>相同，都是通过socks5代理。举个栗子，你有一台香港的服务器，搭建了微屁恩，此时你要访问谷歌，会先与香港的服务器建立连接，并告诉香港服务器你要访问的内容，由香港服务器替代你，间接访问谷歌得到内容后，再转述给你。这里可以看到一个关键点就是，需要一个身在大陆防火墙之外的“代理人”，你们之间秘密通信，他替你完成内容的获取后转述给你。</p>
<p>ss作为初代梯子，简单快捷，造福了很多刁民，随后李大钊同志被请去喝茶，迫于淫威删除了开源代码。在李大钊同志倒下后又站起来了陈独秀同学，开源了ssr，并宣布ss已于识别检测，ssr加入了众多的加密混淆方法，更利于开展地下工作。然陈独秀同志最终也难逃被人肉的命运，最终也删除ssr代码。</p>
<p>ss和ssr在与GFW多年的肉搏下，其特性已经逐渐被摸清，GFW已经为这二位定制了一套战术，能够较高效的找到这二者的破绽，识别并封杀。在太平盛世下，这二位还能苟活些时日，然而一到有热点事件发生，GFW便会降低特征匹配率，这二位分分钟别秒杀。这就像人脸识别，系统会将预先录入的人像和当前人像对比，当达到一个设定的相似度，例如90%时，认为匹配成功。当特殊时期时，会将此阈值降低，例如降低到50%，此时只要你稍有国军的一点特征，便把你抓进去。ss和ssr这两位在特殊时期就显得无能为力。而这种时期恰是刁民们翻墙的高峰期。</p>
<p><strong>V2Ray</strong> 在这种情况下应用而生，通过HTTPS、WS等一系列手段<sup>[2]</sup>，将传输数据进行更好的加密伪装，从而能活的更长久。V2Ray由于其良好的防封表现，其功能也相当繁多、复杂。</p>
<p>SS =&gt; SSR =&gt; V2Ray，随着GFW的不断升级，梯子的复杂度也在指数增加，出现的结果就是，梯子越来越隐蔽稳定，但能搞定梯子的人变的越来越少😳</p>
<h4 id="二、V2Ray-服务端配置"><a href="#二、V2Ray-服务端配置" class="headerlink" title="二、V2Ray 服务端配置"></a>二、V2Ray 服务端配置</h4><p>至此处，本文的核心内容已经完结。接下来<del>的都是划水</del> 是一些优秀文章的合集。</p>
<p>服务端推荐使用233boy开发的集成脚本，简单快捷 👉 <a target="_blank" rel="noopener" href="https://github.com/233boy/v2ray/wiki/V2Ray%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B">服务端配置教程</a></p>
<h4 id="三、客户端下载"><a href="#三、客户端下载" class="headerlink" title="三、客户端下载"></a>三、客户端下载</h4><p>暂将客户端分为：</p>
<ul>
<li><p>macOS</p>
<p>  Mac下本人使用的是 👉 <a target="_blank" rel="noopener" href="https://github.com/yanue/V2rayU/releases">V2rayU</a>。</p>
</li>
<li><p>Windows</p>
<p>  未测试，无推荐，软件列表见本节末尾。</p>
</li>
<li><p>iOS</p>
<p>  iOS下暂无免费的客户端，付费客户端推荐<code>Shadowrocket</code>。<br>  找到一个雷锋分享 AppStore 账号，已经购买了此软件，赶紧下起来。</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">账号： rh72uw13@icloud.com</span><br><span class="line">密码： Dd112211</span><br></pre></td></tr></table></figure>
<p>  账号过期的话，可以去此处找 👉 <a target="_blank" rel="noopener" href="https://tlanyan.me/switch-appleid-to-download-apps/">雷锋</a> 获取</p>
</li>
<li><p>Android</p>
<p>  安卓客户端推荐 👉 <a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayNG/releases">V2RayNG</a></p>
</li>
</ul>
<p>V2Ray客户端众多，除了上述推荐的之外，其余各平台的客户端见 👉 <a target="_blank" rel="noopener" href="https://tlanyan.me/v2ray-clients-download/">客户端汇总</a></p>
<h4 id="四、软件配置"><a href="#四、软件配置" class="headerlink" title="四、软件配置"></a>四、软件配置</h4><p>软件配置就不多说了，添加配置，手动填写/导入url/扫码导入都可，导入服务器配置后，开启服务器配置即可。</p>
<p>全局模式即为浏览器所有流量走代理。pac模式即为自动识别是否需要走代理，更加智能，当然也有识别出错的情况。</p>
<p><strong>推荐</strong>： </p>
<p>1、浏览器：这里多说一个 V2Ray 配合谷歌浏览器的神器插件 <strong>SwitchyOmega</strong> 的用法。SwitchyOmega 跟ss/ssr搭配已经很久了。这里不同的是，V2Ray 使用TCP模式时，SwitchyOmega 配置的代理记得从socks5换成HTTP。</p>
<p>2、全局代理：当我们想让电脑除浏览器外的其他软件也能翻墙时，需要使用全局模式，Mac下推荐 <a target="_blank" rel="noopener" href="https://www.proxifier.com/">Proxifier</a> ，具体设置可以自行Google。</p>
<p><strong>附录</strong></p>
<p>[1] <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E">防火长城</a><br>[2] <a target="_blank" rel="noopener" href="https://www.v2ray.com/">V2Ray</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-12-10T07:45:26.000Z" title="12/10/2019, 3:45:26 PM">2019-12-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-12-10T07:48:34.000Z" title="12/10/2019, 3:48:34 PM">2019-12-10</time></span><span class="level-item">16 minutes read (About 2420 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/12/10/H5%E5%9C%A8%E5%85%A8%E5%B1%8FWebview%E4%B8%AD%E5%8F%8C%E7%AB%AF%E9%80%82%E9%85%8D%E5%88%98%E6%B5%B7%E5%B1%8F/">H5在全屏Webview中双端适配刘海屏</a></h1><div class="content"><p>背景：<br>最近遇到一个看似常规的H5需求，是App内嵌的一个功能模块，看样子跟往常一样重复造轮子就OK了，客户端开个Webview加载页面即可。</p>
<p>正常我们遇到最多的是下面这种类型：</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15758605125935.jpg!ghost"></p>
<p>这种的话一般是封装一个Webview包含返回+标题+分享功能，然后加载H5即可，返回即关闭Webview，标题是读取网页的Title属性，分享是调起客户端的分享弹窗。</p>
<p>然是这次的H5有点不寻常的东西：</p>
<ol>
<li>导航栏除了返回键、title、右侧的操作菜单(进入另一个H5页)，在title还有一个操作项❔，用于点击弹出说明框。</li>
<li>有一个穿透状态栏和导航栏的背景<br> 大概长下面这样：<br> <img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15758607927329.jpg!ghost"></li>
</ol>
<p>向上面的这种复杂页面一般是客户端做的，但是！！！</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/IMG_1345_Original.jpg!ghost" alt="IMG_1345_Origina"></p>
<p>因为种种原因，最后商量用H5做。那看到这样的设计图，机智的攻城狮们一般会跟产品<del>争论一番</del>讨论说你这背景图做不了，只能到导航栏以下，并且你这个问号得移到其他地方bulabulabula。。。</p>
<p>然而作为一名专业的攻城狮，我们当然是奔着最佳的视觉感官+用户体验去的，遇到问题要克服之！</p>
<p>那么确定100%还原设计图后，首先想到的一个方法是和双端定义一系列协议，包括设置全屏背景图、在title后面加操作按钮（及隐藏方法，因为到其他页面就没了），在右侧加自定义的菜单，点击后可跳转其他页面。这个看着就很麻烦，涉及到一系列的交互想想就头疼，还不如直接原生写的痛快一点。和客户端你同学讨论后他们果然面露难色，在我说完第二秒就否决的这种做法，原因很简单：</p>
<p>1、交互太复杂<br>2、扩展性太差，下次H5的设计换个样子又得加新交互</p>
<p>最终决定采用全屏Webview的形式，整个页面交给H5控制，这样不管页面设计成什么样都能实现，什么全屏背景，设么导航啦加各种东西通通不在话下。于是愉快的开发开始了。</p>
<p>然鹅在打码到一半的时候我意识到一个问题：双端的状态栏高度不一致，并且现在还有刘海屏存在🌚 这可肿么办？</p>
<h3 id="一、IOS适配"><a href="#一、IOS适配" class="headerlink" title="一、IOS适配"></a>一、IOS适配</h3><p>首先对于IOS来说，乔帮主整的还是比较规范的，毕竟IOS闭源系统只能跑在Apple硬件上，设备型号有限，已知各机型尺寸如下：<br><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15758722783516.jpg!ghost"></p>
<p>注： 这里获取到的px值跟web中的px虽然单位一样，但并不是我们需要的值！！！Web所需的px实际为IOS中的pt值…，px转pt需要根据设备的ppi(Pixels Per Inch: 像素密度)进行转换：</p>
<blockquote>
<p><strong>px:</strong> pixel 像素，是屏幕上的显示的基本点，他并不是长度单位，这个点可以很大，也可以很小。点小的话就很清晰，我们称之为“分辨率高”，反之就是“分辨率低”。所以像素是一个相对单位。</p>
<p><strong>pt:</strong> point 准确的说法是一个专用印刷单位“镑”，大小为1/72英寸，是一个长度单位。也是绝对长度。</p>
</blockquote>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15758725469497.jpg!ghost"></p>
<p>可以看到ios中的px转pt根据设备的ppi大概是3:1/2:1/1:1转换。<br>转换完可以看到：</p>
<ul>
<li>4.7寸6、6s、7、8，状态栏高度为20pt，导航栏高度为44pt.</li>
<li>5.5寸的6p、6sp、7p、8p，状态栏高度为18pt，导航栏高度为44pt.</li>
<li>拥有刘海屏的X、XR、XS、XS MAX、11等一系列刘海屏，状态栏高度为44pt，导航栏高度为44pt.</li>
</ul>
<p>不难发现：</p>
<ul>
<li><strong>导航栏</strong> 高度所有机型都为44pt；</li>
<li><strong>状态栏</strong> 高度大致可以根据是否为刘海屏分为两类。没有刘海屏的大小机型分别为18和20pt，可以近似的看成都是20pt来处理，问题不大，有刘海屏的则统一为44pt高，跟导航栏高度相同。</li>
</ul>
<h4 id="适配方案："><a href="#适配方案：" class="headerlink" title="适配方案："></a>适配方案：</h4><p>iOS端的适配方案有两种：Apple官方适配方案、机型区分适配、jsBridge方案</p>
<h5 id="Apple官方适配方案："><a href="#Apple官方适配方案：" class="headerlink" title="Apple官方适配方案："></a>Apple官方适配方案：</h5><p>1、在粪叉之后引入了一个新概念：“safe area（安全区域）”，安全区域指屏幕内不受圆角、齐刘海、底部小黑条等元素影响的可视窗口。如下图：</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15758752223986.jpg!ghost"></p>
<p>2、同时，从iOS11开始，为了适配刘海屏，Apple公司对HTML的viewport meta标签做了扩展</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;viewport-fit=cover&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>viewport-fit=cover</code>可设置为<code>auto</code>, <code>contain</code>, <code>cover</code>三种状态，这里我们重点使用<code>cover</code>值，指页面完全充满屏幕。</p>
<p>3、iOS11同时新增了一个特性，constant(safe-area-inset-*)，这是Webkit的一个CSS函数，用于获取安全区域与边界的距离，有四个预定义的变量（单位px）:</p>
<ul>
<li>safe-area-inset-left：安全区域距离左边界距离，横屏时适配</li>
<li>safe-area-inset-right：安全区域距离右边界距离，横屏时适配</li>
<li>safe-area-inset-top：安全区域距离顶部边界距离，竖屏下刘海屏为44px，iphone6系列20px，竖屏刘海适配关键</li>
<li>safe-area-inset-bottom：安全区域距离底部边界距离，竖屏下为34px，竖屏小黑条适配关键</li>
</ul>
<p>这样适配方案就比较明确了：</p>
<ol>
<li>首先通过设置<code>&lt;meta name=&quot;viewport&quot; content=&quot;viewport-fit=cover&quot;&gt;</code>让页面充满全屏</li>
<li>通过Webkit内置的CSS函数，获取安全区域与各边之间的间距，然后通过padding/margin/绝对定位等方式，让页面元素展示在安全区域内。</li>
</ol>
<p>注： Webkit在iOS11中新增CSS Functions: env( )替代constant( )，文档中推荐使用env( )，而 constant( ) 从Safari Techology Preview 41 和iOS11.2 Beta开始会被弃用。在不支持env( )的浏览器中，会自动忽略这一样式规则，不影响网页正常的渲染。为了达到最大兼容目的，我们可以 constant( ) 和 env( ) 同时使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">padding-top: constant(safe-area-inset-top); /* iOS 11.0 */</span><br><span class="line">padding-top: env(safe-area-inset-top); /* iOS 11.2 */</span><br></pre></td></tr></table></figure>

<p>最终适配代码如下：</p>
<p>使用<code>@supports</code>查询机型是否支持<code>constant() / env()</code>实现兼容代码隔离，个别安卓也会成功进入这个判断，因此加上<code>-webkit-overflow-scrolling: touch</code>的判断可以有效规避安卓机。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span> ((<span class="attribute">height</span>: constant(safe-area-inset-top)) <span class="keyword">or</span> (<span class="attribute">height</span>: env(safe-area-inset-top))) <span class="keyword">and</span> (<span class="attribute">-webkit-overflow-scrolling</span>: touch) &#123;</span><br><span class="line">  <span class="selector-class">.fullscreen</span> &#123;</span><br><span class="line">    <span class="comment">/* 适配齐刘海 */</span></span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">20</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="built_in">constant</span>(safe-area-inset-top);</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="built_in">env</span>(safe-area-inset-top);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 适配底部小黑条 */</span></span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="built_in">costant</span>(safe-area-inset-bottom);</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="机型区分适配"><a href="#机型区分适配" class="headerlink" title="机型区分适配"></a>机型区分适配</h5><p>这个就比较简单粗暴无脑了。因为目前市面上已有的Apple手机尺寸我们都是已知的，那剩下的就是css中的media适配了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* iphone x / xs / 11 pro*/</span></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">device-width</span>: <span class="number">375px</span>) <span class="keyword">and</span> (<span class="attribute">device-height</span>: <span class="number">812px</span>) <span class="keyword">and</span> (<span class="attribute">-webkit-device-pixel-ratio</span>: <span class="number">3</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* iphone xr / 11 */</span></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">device-width</span>: <span class="number">414px</span>) <span class="keyword">and</span> (<span class="attribute">device-height</span>: <span class="number">896px</span>) <span class="keyword">and</span> (<span class="attribute">-webkit-device-pixel-ratio</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* iphone xs max / 11 pro max */</span></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">device-width</span>: <span class="number">414px</span>) <span class="keyword">and</span> (<span class="attribute">device-height</span>: <span class="number">896px</span>) <span class="keyword">and</span> (<span class="attribute">-webkit-device-pixel-ratio</span>: <span class="number">3</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p>emmmmmm… 工作量大了点，另外每年9月份发布会后要及时更新代码🙈</p>
<h5 id="jsBridge方案"><a href="#jsBridge方案" class="headerlink" title="jsBridge方案"></a>jsBridge方案</h5><p>如果你跟客户端小哥哥的关系比较好的话，就用这种方案吧😳，让客户端写个方法获取状态栏高度，然后在页面加载的时候通过jsbridge调用获取到状态栏高度，然后设置页面样式即可。</p>
<p>好了，鄙人想到的iOS适配方案到此为止。</p>
<h3 id="二、Android适配方案"><a href="#二、Android适配方案" class="headerlink" title="二、Android适配方案"></a>二、Android适配方案</h3><p>整完相对规范的iOS，开源的Android就相当眼花缭乱了，机器厂商百花齐放，各厂商的机型也是眼花缭乱。Android机型成百上千，适配方案反而变的简单了！！！why? 因为只有一种方案：JSBridge</p>
<p>像上述iOS的适配方案中，官方适配方案Android肯定是么得了，毕竟机型太多，搞不了官方规范。其次就是CSS media 查询精准适配，如果你的应用只针对于少数机型，那这种方案还是可以用用的，倘若不是那就拜拜了您嘞。</p>
<h4 id="jsBridge方案-1"><a href="#jsBridge方案-1" class="headerlink" title="jsBridge方案"></a>jsBridge方案</h4><p>同iOS，客户端获取状态栏高度后，H5通过JSBridge交互拿到状态栏高度，设置页面样式避开齐刘海区域。</p>
<h4 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h4><ul>
<li><a target="_blank" rel="noopener" href="https://kapeli.com/cheat_sheets/iOS_Design.docset/Contents/Resources/Documents/index">iOS 不同机型尺寸信息</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dingyufenglian/p/4816411.html">px及pt区别</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5dad1bd3518825119c47c46a">iOS齐刘海适配方案</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-07-25T09:58:45.000Z" title="7/25/2019, 5:58:45 PM">2019-07-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-07-25T09:58:45.000Z" title="7/25/2019, 5:58:45 PM">2019-07-25</time></span><span class="level-item">8 minutes read (About 1181 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/07/25/vue-%E9%A1%B9%E7%9B%AE%E5%9C%A8%E4%BD%8E%E9%85%8D%E6%9C%BA%E5%99%A8%E4%B8%8A%E7%BA%BF%E5%8F%8A%E4%BC%98%E5%8C%96/">vue 项目在低配机器上线及优化</a></h1><div class="content"><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p><strong>功能</strong>：最近帮朋友的忙，抽空用vue-cli3脚手架，开发一个网站，适配pc和mobile，两端分别有约10个页面，也就是十个路由，网站中的图片比较多，且使用了几个自定义字体，ttf文件都在2m左右。</p>
<p><strong>服务器环境</strong>：本着能抠一点就抠一点的原则，购买的是阿里云ECS的入门配置，1核1G，40G硬盘，1M带宽，基本上是最低配了。（本来想用搬瓦工来着，但最近搬瓦工被封的厉害，风险比较大，可能买来用一两周就GG了。）</p>
<p>由于是空闲时间搞得，时间也比较急，前期没进过任何优化，直接编译完上线，发现首次全部加载完成耗时32s ！分析发现原因如下：</p>
<ul>
<li>每页加载的图片都在10<del>25张左右，所有的图片全部没有压缩，尺寸较大，尤其顶部banner达1</del>2M左右，其余大图在700<del>800kb之间，每页的图片加起来在5M</del>10M之间。</li>
<li>引入的自定义平方字体，使用了regular,medium,thin等几种，每种ttf字体都在2M左右，加起来字体有7、8M。</li>
<li>首屏加载所有路由，加载耗时。</li>
<li>由于服务器是1M带宽，那么每秒下行的最高速度约在120k左右，加载以上超过10M的资源，最快理论速度也在10s以上，且由于不是固态硬盘，速度上也不快。</li>
</ul>
<p>综合以上的问题，对存在的问题进行逐个优化：</p>
<h4 id="1、路由懒加载："><a href="#1、路由懒加载：" class="headerlink" title="1、路由懒加载："></a>1、路由懒加载：</h4><p>对于多路由的SPA，首次加载如果引入所有路由，那么首屏的时间势必会比较耗时。采用路由懒加载，只有当访问到相应的路由时，才会加载对应路由，缩短首屏加载时间。 <a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html">参考</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Home from &#x27;./pages/pc/home.vue&#x27;</span><br><span class="line">&#123; path: &#x27;/home&#x27;, component: Hone, label: &#x27;首页&#x27;&#125;,</span><br></pre></td></tr></table></figure>
<p>=&gt;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; path: &#x27;/home&#x27;, component: () =&gt; import(&#x27;./pages/pc/home.vue&#x27;), label: &#x27;首页&#x27;&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="2、图片压缩优化："><a href="#2、图片压缩优化：" class="headerlink" title="2、图片压缩优化："></a>2、图片压缩优化：</h4><p>所有图片使用 <a target="_blank" rel="noopener" href="https://tinypng.com/">https://tinypng.com</a> 进行压缩，可以压缩约80%左右的大小，同时图片显示效果基本不变。</p>
<h4 id="3、字体压缩："><a href="#3、字体压缩：" class="headerlink" title="3、字体压缩："></a>3、字体压缩：</h4><p>当引用自定义的字体后，往往字体文件达1~2M，严重拖累加载进度。<br>使用 <a target="_blank" rel="noopener" href="http://font-spider.org/">font-spider</a> 按需加载字体，可由2M缩减为3k，效果显著。</p>
<p>字体压缩步骤是：</p>
<ol>
<li>先将vue编译</li>
<li>执行 <code>font-spider index.html</code></li>
</ol>
<p>如果将资源文件放置在非本地（如cdn），那么无法直接使用font-spider压缩远程资源。<br>此时可以使用 <a target="_blank" rel="noopener" href="https://github.com/allanguys/font-spider-plus">fsp</a> 压缩远程资源。示例配置如<code>fspconfig.js</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;localPath&quot; : &quot;./static/fonts/&quot;,</span><br><span class="line">    &quot;onlinePath&quot; : &quot;http://cdn.lantianren.net/static/fonts/&quot;,</span><br><span class="line">    &quot;url&quot; :  [</span><br><span class="line">        &quot;http://lantianren.net/index.html&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行 <code>fsp run</code> 即可。</p>
<h4 id="4、将本地的静态文件批量上传至七牛cdn"><a href="#4、将本地的静态文件批量上传至七牛cdn" class="headerlink" title="4、将本地的静态文件批量上传至七牛cdn"></a>4、将本地的静态文件批量上传至七牛cdn</h4><p>使用 <a target="_blank" rel="noopener" href="https://github.com/qiniu/qshell/blob/master/docs/qupload.md">qshell</a> 工具即可。执行：<code>qshell qupload /Users/ludis/Work/src/qshell/qupload.json</code>。</p>
<p>配置强制刷新，每次修改完文件后，可以强制刷新上传至七牛。同时网站存在cdn缓存，不能及时更新，可以<a target="_blank" rel="noopener" href="https://developer.qiniu.com/fusion/kb/1325/refresh-the-cache-and-the-effect-of-time">手动处理</a></p>
<p>配置文件如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;src_dir&quot;: &quot;/Users/ludis/Desktop/work/lt-educate/dist&quot;,</span><br><span class="line">    &quot;bucket&quot;: &quot;lt&quot;,  </span><br><span class="line">    &quot;overwrite&quot;: true,</span><br><span class="line">    &quot;check_exists&quot;: true,</span><br><span class="line">    &quot;rescan_local&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编译配置"><a href="#编译配置" class="headerlink" title="编译配置"></a>编译配置</h4><p><code>vue.config.json</code>: 根据运行模式设置资源根路径。可以将静态资源上传至cdn（七牛）加速。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  publicPath: process.env.NODE_ENV === &#x27;production&#x27;</span><br><span class="line">  ? &#x27;http://cdn.lantianren.net/&#x27;</span><br><span class="line">  : &#x27;./&#x27;,</span><br><span class="line">  assetsDir: &#x27;static&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>经过这些优化后，首屏加载时间在2s~2.5s之间浮动，由于是SPA应用，所以其他页面基本是秒开，且图片进压缩，cdn处理后，加载也很快。整体上从开始的32S降至2s开屏，基本上达到可接受范围。</p>
<p>👉 <a target="_blank" rel="noopener" href="http://lantianren.net/">体验地址</a></p>
<p>其余优化方式：</p>
<p>1、如果资源放置在本地，可以配置nginx gzip压缩<br>2、如果项目更加庞大复杂，可以继续使用ssr服务端渲染。</p>
<p>结语： </p>
<p>平时在工作中开发小型项目，在公司较高的硬件配置下比较少有优化加载速度的需求和想法。当使用低配环境时，就会发现还是有很多可优化的点。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-03-19T08:02:25.000Z" title="3/19/2019, 4:02:25 PM">2019-03-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-03-19T09:12:17.000Z" title="3/19/2019, 5:12:17 PM">2019-03-19</time></span><span class="level-item">14 minutes read (About 2172 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/03/19/Flutter-%E5%AE%9E%E6%88%98%E8%BF%9B%E9%98%B6/">Flutter 实战进阶</a></h1><div class="content"><p>Flutter 在实际开发中遇到的一些问题及解决方案，作为笔记记录。</p>
<h4 id="1、container-width、height-100"><a href="#1、container-width、height-100" class="headerlink" title="1、container width、height 100%"></a>1、container width、height 100%</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FractionallySizedBox(</span><br><span class="line">      widthFactor: 1,</span><br><span class="line">      heightFactor: 1,</span><br><span class="line">      child: ,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">double width = MediaQuery.of(context).size.width</span><br><span class="line">double height = MediaQuery.of(context).size.height</span><br></pre></td></tr></table></figure>


<h4 id="2、沉浸式背景图片"><a href="#2、沉浸式背景图片" class="headerlink" title="2、沉浸式背景图片"></a>2、沉浸式背景图片</h4><p>背景图片铺满Appbar及状态栏</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">    return new Stack(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Container(</span><br><span class="line">          child: Image.network(&#x27;https://www.bing.com/az/hprichbg/rb/Punakaiki_DE-DE0884339574_1920x1080.jpg&#x27;),</span><br><span class="line">          color: Colors.lightGreen,</span><br><span class="line">        ),</span><br><span class="line">        Scaffold(</span><br><span class="line">          backgroundColor: Colors.transparent,</span><br><span class="line">          appBar: AppBar(</span><br><span class="line">            backgroundColor: Colors.transparent,</span><br><span class="line">            title: Text(&#x27;Coin&#x27;),</span><br><span class="line">          ),</span><br><span class="line">          body: MyCoinPage(),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15506527024380.jpg!ghost"></p>
<h4 id="3、APPBar-no-shadow"><a href="#3、APPBar-no-shadow" class="headerlink" title="3、APPBar no shadow"></a>3、APPBar no shadow</h4><p>AppBar默认底部有阴影。去掉只需要配置参数即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AppBar(</span><br><span class="line">    elevation: 0.0,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="4、自定义字体"><a href="#4、自定义字体" class="headerlink" title="4、自定义字体"></a>4、自定义字体</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">flutter:</span><br><span class="line">  # The following line ensures that the Material Icons font is</span><br><span class="line">  # included with your application, so that you can use the icons in</span><br><span class="line">  # the material Icons class.</span><br><span class="line">  uses-material-design: true</span><br><span class="line"></span><br><span class="line">  fonts: </span><br><span class="line">    - family: Kphi</span><br><span class="line">      fonts: </span><br><span class="line">        - asset: assets/fonts/Komet-Pro-Heavy-Italic.otf</span><br></pre></td></tr></table></figure>

<h4 id="5、Tab切换动画"><a href="#5、Tab切换动画" class="headerlink" title="5、Tab切换动画"></a>5、Tab切换动画</h4><p>Tab切换需加入<code>SingleTickerProviderStateMixin</code></p>
<p>通过 <code>with SingleTickerProviderStateMixin</code> 实现Tab页的切换动画效果。因为初始化<code>animationController</code>的时候需要一个<code>TickerProvider</code>类型的参数<code>Vsync</code>参数，所以我们混入了<code>TickerProvider</code>的子类<code>SingleTickerProviderStateMixin</code>。</p>
<h4 id="6、-逐帧动画-FrameAnimationImage"><a href="#6、-逐帧动画-FrameAnimationImage" class="headerlink" title="6、 逐帧动画 FrameAnimationImage"></a>6、 逐帧动画 <code>FrameAnimationImage</code></h4><p>Flutter 逐帧动画 <code>FrameAnimationImage</code>。 逐帧动画： 依次顺序循环播放多张图片组成一个动画。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">/// Flutter FrameAnimation 逐帧动画</span><br><span class="line">import &#x27;package:flutter/material.dart&#x27;;</span><br><span class="line"></span><br><span class="line">class FrameAnimationImage extends StatefulWidget &#123;</span><br><span class="line">  final List&lt;String&gt; assetList;</span><br><span class="line">  final double width;</span><br><span class="line">  final double height;</span><br><span class="line">  final int interval;</span><br><span class="line"></span><br><span class="line">  FrameAnimationImage(</span><br><span class="line">      &#123;this.assetList, this.width, this.height, this.interval = 200&#125;);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  State&lt;StatefulWidget&gt; createState() &#123;</span><br><span class="line">    return _FrameAnimationImageState();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _FrameAnimationImageState extends State&lt;FrameAnimationImage&gt;</span><br><span class="line">    with SingleTickerProviderStateMixin &#123;</span><br><span class="line">  // 动画控制</span><br><span class="line">  Animation&lt;double&gt; _animation;</span><br><span class="line">  AnimationController _controller;</span><br><span class="line">  int interval = 200;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line"></span><br><span class="line">    if (widget.interval != null) &#123;</span><br><span class="line">      interval = widget.interval;</span><br><span class="line">    &#125;</span><br><span class="line">    final int imageCount = widget.assetList.length;</span><br><span class="line">    final int maxTime = interval * imageCount;</span><br><span class="line"></span><br><span class="line">    // 启动动画controller</span><br><span class="line">    _controller = new AnimationController(</span><br><span class="line">        duration: Duration(milliseconds: maxTime), vsync: this);</span><br><span class="line">    _controller.addStatusListener((AnimationStatus status) &#123;</span><br><span class="line">      if (status == AnimationStatus.completed) &#123;</span><br><span class="line">        _controller.forward(from: 0.0); // 完成后重新开始</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    _animation = new Tween&lt;double&gt;(begin: 0, end: imageCount.toDouble())</span><br><span class="line">        .animate(_controller)</span><br><span class="line">          ..addListener(() &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              // the state that has changed here is the animation object’s value</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">    _controller.forward();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    super.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    int ix = _animation.value.floor() % widget.assetList.length;</span><br><span class="line"></span><br><span class="line">    List&lt;Widget&gt; images = [];</span><br><span class="line">    // 把所有图片都加载进内容，否则每一帧加载时会卡顿</span><br><span class="line">    for (int i = 0; i &lt; widget.assetList.length; ++i) &#123;</span><br><span class="line">      if (i != ix) &#123;</span><br><span class="line">        images.add(Image.asset(</span><br><span class="line">          widget.assetList[i],</span><br><span class="line">          width: 0,</span><br><span class="line">          height: 0,</span><br><span class="line">        ));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    images.add(Image.asset(</span><br><span class="line">      widget.assetList[ix],</span><br><span class="line">      width: widget.width,</span><br><span class="line">      height: widget.height,</span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line">    return Stack(alignment: AlignmentDirectional.center, children: images);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="7、-时间格式化库-intl"><a href="#7、-时间格式化库-intl" class="headerlink" title="7、 时间格式化库 intl"></a>7、 时间格式化库 <code>intl</code></h4><ul>
<li><a target="_blank" rel="noopener" href="https://pub.dartlang.org/packages/intl">pub</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.flutter.io/flutter/intl/DateFormat-class.html">doc</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16126579/how-do-i-format-a-date-with-dart">usage</a></li>
</ul>
<h4 id="8、-时间格式化库intl和textDirection冲突"><a href="#8、-时间格式化库intl和textDirection冲突" class="headerlink" title="8、 时间格式化库intl和textDirection冲突"></a>8、 时间格式化库<code>intl</code>和<code>textDirection</code>冲突</h4><p>报错如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The getter &#x27;rtl&#x27; isn&#x27;t defined for the class &#x27;TextDirection&#x27;</span><br></pre></td></tr></table></figure>
<p>参考： <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/49647795/flutter-rtl-syntax-error-with-packageintl-intl-dart">Stack Overflow</a></p>
<p>解决方案： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;package:intl/intl.dart&#x27; as intl;</span><br></pre></td></tr></table></figure>

<h4 id="9、-convert-string-to-date"><a href="#9、-convert-string-to-date" class="headerlink" title="9、 convert string to date"></a>9、 convert string to date</h4><p>dart将时间字符串转为date库： </p>
<p>参考： <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/49385303/convert-datetime-string-to-datetime-object-in-dart">Stack Overflow</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var parsedDate = DateTime.parse(&#x27;1974-03-20 00:00:00.000&#x27;);</span><br><span class="line">print(&#x27;dateTime: $parsedDate&#x27;);</span><br></pre></td></tr></table></figure>


<h4 id="10、-tabcontroller-addListener"><a href="#10、-tabcontroller-addListener" class="headerlink" title="10、 tabcontroller.addListener"></a>10、 tabcontroller.addListener</h4><p>Tab切换时，可以通过<code>tabcontroller.addListener</code>监听切换事件。在实际开发中发现如下问题，可以根据需求选择不同的判断方式:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_tabController = new TabController(length: 2, vsync: this);</span><br><span class="line">_tabController.addListener(() &#123;</span><br><span class="line">  // _tabController.addListener...</span><br><span class="line">  if (_tabController.indexIsChanging) &#123;</span><br><span class="line">    // _tabController.indexIsChanging...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>当点击切换时:</p>
<ul>
<li>_tabController.addListener 触发两次</li>
<li>_tabController.indexIsChanging 触发一次</li>
</ul>
<p>当滑动切换时:</p>
<ul>
<li>_tabController.addListener 触发一次</li>
<li>_tabController.indexIsChanging 不触发</li>
</ul>
<h4 id="11、-FutureBuilder-gt-Future-widget"><a href="#11、-FutureBuilder-gt-Future-widget" class="headerlink" title="11、 FutureBuilder =&gt; Future widget"></a>11、 FutureBuilder =&gt; Future widget</h4><p>参考: <a target="_blank" rel="noopener" href="https://blog.csdn.net/u011272795/article/details/83010974">FutureBuilder 延迟加载组件</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return new FutureBuilder(</span><br><span class="line">      future: getTextFromFile(),</span><br><span class="line">      initialData: &quot;Loading text..&quot;,</span><br><span class="line">      builder: (BuildContext context, AsyncSnapshot&lt;String&gt; text) &#123;</span><br><span class="line">        return new SingleChildScrollView(</span><br><span class="line">          padding: new EdgeInsets.all(8.0),</span><br><span class="line">          child: new Text(</span><br><span class="line">            text.data,</span><br><span class="line">            style: new TextStyle(</span><br><span class="line">              fontWeight: FontWeight.bold,</span><br><span class="line">              fontSize: 19.0,</span><br><span class="line">            ),</span><br><span class="line">          ));</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;String&gt; getFileData(String path) async &#123;</span><br><span class="line">    return await new Future(() =&gt; &quot;test text&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;String&gt; getTextFromFile() async &#123;</span><br><span class="line">    return getFileData(&quot;test.txt&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="12、获取页面生命周期"><a href="#12、获取页面生命周期" class="headerlink" title="12、获取页面生命周期"></a>12、获取页面生命周期</h4><p>使用 <code>with WidgetsBindingObserver</code>后，可以对页面的生命周期进行监听。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class _LifecycleWatcherState extends State&lt;LifecycleWatcher&gt; with WidgetsBindingObserver &#123;</span><br><span class="line">  AppLifecycleState _lastLifecycleState;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line">    WidgetsBinding.instance.addObserver(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void dispose() &#123;</span><br><span class="line">    WidgetsBinding.instance.removeObserver(this);</span><br><span class="line">    super.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void didChangeAppLifecycleState(AppLifecycleState state) &#123;</span><br><span class="line">    print(&#x27;current state: $state&#x27;);</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _lastLifecycleState = state;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="13、页面重构"><a href="#13、页面重构" class="headerlink" title="13、页面重构"></a>13、页面重构</h4><p><strong>1、TabView + pull_to_refresh 如何优雅共存</strong><br>当页面中有Tab切换，且每个Tab页都是可以下拉刷新、上拉加载的组件时。如果每个<code>TabView</code>使用的是同一个组件，只是根据不同的标识显示不同的内容。在实际开发中发现，这么做虽然可以减少部分代码量，但是出现的问题是，Tab切换时每次都等于是重新渲染公共的组件，导致比较卡顿，且切换时会发生多个TabView间的数据混乱等一些列问题。而且多个TabView公用一个scrollController的话也会出很多问题。</p>
<p>正确的做法是，每个TabView应该是独立组件，包括互相独立的scrollController。只不过其中的一些子组件是可以抽出来共用的，这是没问题的。</p>
<p><strong>2、listView显示占位图。</strong></p>
<p>空列表的一般需要显示占位图，开始的做法是，判断列表为空时，直接返回一个占位图的Container，代替ListView。这样做之后，发现数据为空时就不能下拉刷新了，因为下拉刷新和ListView绑定在一起。于是改为下述方案，当数据为空时任然可以下拉刷新，实时更新数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">child: new SmartRefresher(</span><br><span class="line">headerConfig: const RefreshConfig(completeDuration: 300),</span><br><span class="line">enablePullDown: true,</span><br><span class="line">enablePullUp: true,</span><br><span class="line">onRefresh: _onRefresh,</span><br><span class="line">headerBuilder: LoadingIndicator.buildHeader,</span><br><span class="line">footerBuilder: LoadingIndicator.buildFooter,</span><br><span class="line">controller: _refreshController,</span><br><span class="line">child: (!loading &amp;&amp; _payList.length == 0)</span><br><span class="line">    ? ListView.builder(</span><br><span class="line">        itemCount: 1,</span><br><span class="line">        itemBuilder: (context, i) &#123;</span><br><span class="line">          return _emptyTip();</span><br><span class="line">        &#125;,</span><br><span class="line">      )</span><br><span class="line">    : _listView(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>


<h4 id="14、网络图片加载组件"><a href="#14、网络图片加载组件" class="headerlink" title="14、网络图片加载组件"></a>14、网络图片加载组件</h4><p>默认的图片加载组件 networkImage，当图片链接错误、为空时，会报exception导致Crash。FadeInImage同理。</p>
<p>参考： <a target="_blank" rel="noopener" href="https://github.com/flutter/flutter/issues/20910">GitHub</a></p>
<p>试了好几款组件都没有做错误处理，最终找到一个可用的组件：<a target="_blank" rel="noopener" href="https://github.com/flutter/flutter_image">Flutter_image</a> ，同时配合<code>FadeInImage</code>设置默认占位图，完美。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">adeInImage(</span><br><span class="line">  fit: fit,</span><br><span class="line">  placeholder: AssetImage(placeHolderImage),</span><br><span class="line">  image: NetworkImageWithRetry(imgUrl),</span><br><span class="line">),</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="15、主题颜色-ThemeData"><a href="#15、主题颜色-ThemeData" class="headerlink" title="15、主题颜色 ThemeData"></a>15、主题颜色 ThemeData</h4><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/hekaiyou/article/details/76533014">主体颜色常识</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Norbert515/dynamic_theme">动态设置主题色</a></li>
</ul>
<h4 id="16、网络图片加载失败Exception"><a href="#16、网络图片加载失败Exception" class="headerlink" title="16、网络图片加载失败Exception"></a>16、网络图片加载失败Exception</h4><p>使用 <code>flutter_image</code> 的 <code>NetworkImageWithRetry</code> 代替 <code>NetworkImage</code> 后，当图片404或者错误时，确实没有报Exception奔溃，但是安卓端却显示crash。</p>
<p>换了很多其他的插件都不好使，最终查明，<code>NetworkImageWithRetry</code>虽然可以catch exception不让应用奔溃，但是会触发Flutter.onError，而安卓端在检测到onError之后，当做crash处理，直接将页面关闭….</p>
<p>方案： 修改组件源码，图片加载失败时，不要触发Flutter.onError。</p>
<h4 id="17、ActionSheet-点击隐藏"><a href="#17、ActionSheet-点击隐藏" class="headerlink" title="17、ActionSheet 点击隐藏"></a>17、ActionSheet 点击隐藏</h4><p>点击 ActionSheet 选择某项后，隐藏之。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context, rootNavigator: true).pop(&quot;Discard&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="18、阻止软键盘顶起页面"><a href="#18、阻止软键盘顶起页面" class="headerlink" title="18、阻止软键盘顶起页面"></a>18、阻止软键盘顶起页面</h4><p>当软键盘弹起时，会将页面高度缩减，导致页面中的内容随着父级高度变化而变化。即软键盘弹起时将内容顶起，导致诸多问题。</p>
<p>解决方案：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">return Scaffold(</span><br><span class="line">  appBar: AppBar(</span><br><span class="line">    title: new Text(&quot;通讯录&quot;),</span><br><span class="line">  ),</span><br><span class="line">	resizeToAvoidBottomPadding: false, //输入框抵住键盘 内容不随键盘滚动</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="19、dart正则"><a href="#19、dart正则" class="headerlink" title="19、dart正则"></a>19、<code>dart</code>正则</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RegExp regExp = new RegExp(</span><br><span class="line">  r&#x27;(ludis)&#x27;,</span><br><span class="line">  caseSensitive: false, // 是否大小写敏感</span><br><span class="line">  multiLine: false, // 待匹配文字是否是多行的</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// 正则</span><br><span class="line">var d = regExp.allMatches(text);</span><br><span class="line">d.forEach((f) =&gt; print(f.group(0)));</span><br><span class="line">print(&#x27;match result, $&#123;d.toString()&#125;, $&#123;d.toList()&#125;&#x27;);</span><br></pre></td></tr></table></figure>

<h4 id="20、键盘确认按钮样式"><a href="#20、键盘确认按钮样式" class="headerlink" title="20、键盘确认按钮样式"></a>20、键盘确认按钮样式</h4><p>键盘的确认按钮会显示为“搜索”，点击后触发<code>onSubmitted</code>事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TextFormField( </span><br><span class="line">  ...</span><br><span class="line">  textInputAction: TextInputAction.done,</span><br><span class="line">  ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="21、Map类型错误"><a href="#21、Map类型错误" class="headerlink" title="21、Map类型错误"></a>21、Map类型错误</h4><p>json转换时报错如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;_InternalLinkedHashMap&lt;dynamic, dynamic&gt;&#x27; is not a subtype of type &#x27;Map&lt;String, dynamic&gt;&#x27;</span><br></pre></td></tr></table></figure>

<p>原因: 类型为<code>Map</code>的其实际类型为<code>Map&lt;dynamic, dynamic&gt;</code>而非<code>Map&lt;String, dynamic&gt;</code>。</p>
<p>解决方法： 进行转换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Map json; // Map&lt;dynamic, dynamic&gt;</span><br><span class="line">Map&lt;String, dynamic&gt; = new Map&lt;String, dynamic&gt;.from(json); // Map&lt;String, dynamic&gt;</span><br></pre></td></tr></table></figure>

<h4 id="22、GestureDetector-点击区域小"><a href="#22、GestureDetector-点击区域小" class="headerlink" title="22、GestureDetector 点击区域小"></a>22、GestureDetector 点击区域小</h4><p>使用<code>GestureDetector</code>包裹<code>Container</code>，发现在<code>Container</code>内容为空的区域点击时，捕捉不到<code>onTap</code>点击事件。</p>
<p>参考： <a target="_blank" rel="noopener" href="https://github.com/flutter/flutter/issues/17383">GitHub</a></p>
<p>解决方法： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">    behavior: HitTestBehavior.opaque,</span><br><span class="line">    onTap: ()&#123;&#125;,</span><br><span class="line">    child: Container()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="23、TextField优化："><a href="#23、TextField优化：" class="headerlink" title="23、TextField优化："></a>23、TextField优化：</h4><p><code>TextField decoration</code> 可使用以下两种：</p>
<ul>
<li>使用 <code>InputDecoration.collapsed()</code> 。其高度不能和父级同高，导致可点击区域变小，用户体验不好。优势在于<code>InputDecoration.collapsed()</code>为无边框的输入框。</li>
<li>使用<code>InputDecoration</code>。可使输入框高度和父级同高，扩大可点击区域。去掉边框即可。</li>
</ul>
<p>解决方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">InputDecoration(</span><br><span class="line">    border: InputBorder.none, // 去除输入框边框</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="24、Flutter-hide-keyboard"><a href="#24、Flutter-hide-keyboard" class="headerlink" title="24、Flutter hide keyboard"></a>24、Flutter hide keyboard</h4><p>调用方法隐藏键盘。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FocusScope.of(context).requestFocus(new FocusNode());</span><br></pre></td></tr></table></figure>

<h4 id="25、去除TextFiled水纹效果-ripple-effect"><a href="#25、去除TextFiled水纹效果-ripple-effect" class="headerlink" title="25、去除TextFiled水纹效果 ripple effect"></a>25、去除TextFiled水纹效果 ripple effect</h4><p>参考： <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/50020523/how-to-disable-default-widget-splash-effect-in-flutter">how-to-disable-default-widget-splash-effect-in-flutter</a> </p>
<p>解决方案： </p>
<ol>
<li>使用自定义主体，覆盖默认主题</li>
<li>给组件包裹Theme容器，设置 <code>splashFactory</code> 为 <code>Colors.transparent</code>。✅</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">child: new Theme(</span><br><span class="line">  data: new ThemeData(splashFactory: Colors.transparent),</span><br><span class="line">  child: new TextField(...),</span><br><span class="line">),</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Dart-数组、字符串常用方法："><a href="#Dart-数组、字符串常用方法：" class="headerlink" title="Dart 数组、字符串常用方法："></a>Dart 数组、字符串常用方法：</h4><ul>
<li><p>Dart Array methods: <a target="_blank" rel="noopener" href="https://codeburst.io/top-10-array-utility-methods-you-should-know-dart-feb2648ee3a2">https://codeburst.io/top-10-array-utility-methods-you-should-know-dart-feb2648ee3a2</a></p>
</li>
<li><p>Dart String methods: <a target="_blank" rel="noopener" href="https://codeburst.io/top-10-string-utility-methods-you-should-know-dart-b51ef65b3cc2">https://codeburst.io/top-10-string-utility-methods-you-should-know-dart-b51ef65b3cc2</a> </p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-02-16T13:38:48.000Z" title="2/16/2019, 9:38:48 PM">2019-02-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-02-16T13:38:48.000Z" title="2/16/2019, 9:38:48 PM">2019-02-16</time></span><span class="level-item">17 minutes read (About 2551 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/02/16/%E4%BD%95%E4%BA%BA%E5%9C%A8%E6%AD%A4/">何人在此</a></h1><div class="content"><p>发现现在有些年轻人，看书，看剧，看很多东西，听很多东西。日常表述观点惯用：某某说过，我特别赞同/喜欢某某在哪哪说的什么。遇到事自己没主意时，不先思考下，首先想到的就是去问周边同龄的朋友，或者去网上搜索，然后筛选些自己看着舒服的答案直接拿过来用。这些好像没什么不对。然而自始至终都没有太多的自我思考，大多是嗟来之食。</p><p>人生来就是一张白纸。就中青少而言白纸又分为多种。</p><p>一种，就是开头说的这种。在感觉到自己的空白后，在慌张下开始”学习“，这确实是好事，然而吃相太不讲究，遇到的各种观点，只要看着舒服的，拿来就吃，饥不择食，快速的填充自己的世界观。找到自己觉得不错的观点就狼吞虎咽，收藏起来。到头来，说起什么话题，遇到什么问题，确能迅速从藏品中拿出来一个观点回应，来作为行为的指引，实则是别人的观点。而这些观点一般都是供大众消费用的，类鸡汤文。看似很有见地，但却是真真儿的是受人操控，活在大流中的傀儡。这种人我称之为会吸星大法的，大家都知道，在所有武侠小说中，吸星大法都是极为厉害的武功，能让人快速“变强”，却是一门邪门功夫，正派君子不沾。而这种轻而易举就能变强的功夫，确实让大部分人难以抵挡，这也是当前的主流功法。</p><p>这就像是一个人只知道苹果是吃的，但不知道长什么样子，这时遇到另一个人给他吃了口草莓，并说这是苹果，尝着草莓又甜又软的挺好吃，那他就觉得这是苹果了。因为这确实是吃的，而且挺好吃，就不用再去费劲确认他是不是了。当有人给他真正的苹果时，咬了一口发现没有草莓好吃，他大概率会说这不是苹果，草莓才是苹果。人们更愿意接收自己觉的舒服的观点，而不是去探究自己真正的看法，这毕竟是件费脑的事，而且时长伴随着自我颠覆的痛苦。</p><p>一种，知其白而任其白，属于心大无脑的。这种就不细说。</p><p>一种，白而不自知。这个也好理解。</p><p>一种，称之“半白”。这种人，遇到一个问题，抛给他一个话题，很可能一时半会说不出所以然，需要思考的时间。比起第一种能快速读取丰富档案库的人会显得比较虚。但是会仔细思考自身想法，中途或引经论据，最终得出经过“捯饬”的观点。过程虽然有些费脑辛苦，废了些时间，少了些潇洒，确是自身主观意识为主，即便与主流观念相悖，却也真实可贵。</p><p>至于那些被大众尊为上等人，为大众提供主流观点的这些人。也是从半白走过来的，属于高等半白。但却被很多人尊为真主一样，一副你说啥就是啥，恨不得把这些人的脑子复印一份过来，这样自己就圆满了。</p><p>现在好多的综艺节目，为了收视率，多弄着些吸引年轻人眼球的话题。然后各位"大咖"各抒己见，这些观点大多是些个人的生活经验和鸡汤掺杂的产物，再加点大众心理学作为佐料，乍听起来都是洗涤心灵的好道理，对于嗷嗷待哺的年青一代，简直是天赐良品。然而既然是综艺，就是以逗乐为主，如果从其中汲取一点点有用的观点并转化为自己的观点，就已然是极好的。可是很多年轻人，把这些节目当做学习课堂，把这些娱乐性质的产物一股脑的直接咽下去吸收。同时表现出吃饱后的满足感。实在是…现在的社会确实让年轻人很焦虑，很躁动，但把脑子交出去却是不明智的。</p><p>想起《超人：钢铁之躯》中的场景，佐德江军一意孤行，想用宝典来批量造人，孩子的出生由宝典统一生产，就像基因编码一样造出更强的孩子，而超人作为氪星第一个自然生产的孩子，开启了全新剧情…在这个信息爆炸，各种观点满天飞的时代，这些狂吸不止的年轻人，何尝不是思想层面的被基因编码呢，通过左拼右凑构建出来一个世界观，然后在此指引下快乐不自知的生活着，这跟氪星造出来的没有特色的孩子有啥区别。</p><p>而这些东西还会传染的，物以类聚，人以群分。这些身具吸星大法的人在一起，我在别地儿吸一点，再传给你，双方都会很满足。一个是“知识”的传播者，获得成就感，一个是“知识”的获得者，获得者一般伴随着满足感，所谓知识就是力量。简直比二手烟还上瘾，你一口我一口，大家都是好朋友。</p><p>相比这种思想混搭的人，看上去头头是道的人，我更愿意接触半白，甚至空白的人。就像中午没吃饭很饿，但宁愿喝一口清面汤，也不会吃被汪星人啃过的肉包子。</p><p>跟身兼吸星大法的这种人简单相处并无大碍，一旦交集变深就会初现端倪，就会发现他们坚定拥护别人塞过来的观点，并坚信不疑。他们的世界观、爱情观、价值观等等，竟然大多来自一些素未谋面的大龄作者、大V，或娱乐节目，或是同龄的好友，更或者是微博的狗血话题…很少有自己的观念在其中。</p><p>年纪轻轻的他们，拿着要么是那些比自己年长几十岁的”知名人士“，要么是同龄旁人的观点，并在这些观点的指引下，来度过自己美好的青春。并为年纪轻轻就取得真经而庆幸。实在让人扼腕叹息。生命在于尝试，在于探索，这些尝试的过程或许伴随着痛苦，但却是人生之美。如果自己不去探索，只是按旁人的指引活着，乐趣何在？如果一出生就让你知晓各种精辟的为人处世道理，那走这一遭的乐趣何在？小孩子缺少思考能力，所以常被一股脑的灌输很多东西。但是人年之后，还被一股脑的灌，这就不应该了。这也是中国式教育，从小不引导孩子主动思考，而是被动接受的方式有一定关系。</p><p>网络上现在很多的”教育课“，喜马拉雅、知乎live等等这些平台上（我不是广告君…），大量的提高情商系列，教做人系列课程，有很多看似很有名气（原谅我读书少没听过）的教授大V的爆款课程。带着期待和好奇的心情，我买了一部分，硬着头皮听完了大部分课程，最终得到的结论就是，这些课程几乎都是非常主观的东西，很少有客观的分析在。其实就是这些人对自己的做人做事方式美颜后的分享，作为参考，这自然是没问题的。但却常冠名以”必听的“，”经典的“的精品课程，受到很多青年人的追捧，把这些东西牢记在心作为自己的处事原则。如果这些讲主得知，很多人在按照自己的指引活着，估计会很有成就感吧。其实这些平台上有很多历史、经济、文学等等方面正儿八经的好课程，但相比学会做一个高情商、会说话的人，这些课显然吸引力不足。</p><p>读书是好事，信息量充沛也是好事，但在读主观性太强的书，或者在看、听类似的节目时，一定要谨慎这些教做人的东西。所谓读书启迪智慧，启迪只是是启发，是引子，是开头的工作，后续的主要工作需要自己完成。而不是觉得舒服就拿来用了。不要总按照别人看似正确的指引活着，考虑下真实的自我。</p><p>论还在成长中的青少年们，如何在这股国产泥石流中保持些许清醒🌚</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-02-12T09:00:05.000Z" title="2/12/2019, 5:00:05 PM">2019-02-12</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-04-13T09:18:17.000Z" title="4/13/2019, 5:18:17 PM">2019-04-13</time></span><span class="level-item">17 minutes read (About 2497 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/02/12/Flutter%E7%BB%84%E4%BB%B6%E5%90%88%E9%9B%86/">Flutter组件合集</a></h1><div class="content"><h2 id="Element"><a href="#Element" class="headerlink" title="Element"></a>Element</h2><h4 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h4><p>1、Input</p>
<ul>
<li>TextField  最常用的文本输入组件。<ul>
<li>用户修改文本时，可通过Onchange获取最新的文本信息。</li>
<li>onSubmitted可获取到软键盘的确认按钮。</li>
<li>默认下方有一个横线，decoration属性可以设置图标、padding等更多属性</li>
</ul>
</li>
</ul>
<p>2、Checkbox</p>
<ul>
<li><p>CheckboxListTile<br>下拉复选框，带有复选框的ListTile，带有标签的ListTile<br>整个列表的图块是交互的，点击图块中的任意位置可切换复选框。</p>
</li>
<li><p>Checkbox</p>
</li>
</ul>
<p>3、Button</p>
<ul>
<li><p>FlatButton<br>  默认无边框，无背景色的按钮<br>  FlatButton.icon 为带图标的</p>
</li>
<li><p>RaiseButton<br>  凸起的按钮——带有shadow阴影的质感按钮<br>  RaiseButton.icon 为带图标的</p>
</li>
<li><p>IconButton<br>  纯图标按钮，无边框无背景色</p>
</li>
<li><p>PopupMenuButton<br>  弹出菜单栏的图标。<br>  PopupMenuButton 和 popupMenuItem 配合使用。<br>  选择菜单项时，触发onSelected方法。</p>
</li>
<li><p>FloatingActionButton<br>  默认的圆形悬浮按钮，每个页面最多一个。Scaffold.floatingActionButton</p>
</li>
<li><p>RawMateriaButton<br>  不使用当前Theme或ButtonTheme，高度自定义的Materail button</p>
</li>
<li><p>DropdownButton<br>  从项目列表进行选择的按钮。</p>
</li>
<li><p>OutlineButton<br>  RaisedButton 和 FlatButton的交叉，有边框。高程最初为0，背景透明。按下按钮时，背景变不透明，高程增加</p>
</li>
</ul>
<p>4、Text</p>
<ul>
<li>Text<br>  一行/多行文本显示</li>
<li>RichText</li>
</ul>
<p>5、Radio</p>
<ul>
<li>Radio</li>
<li>RadioListTile<br>  点击按钮附加的文字时，同样可以触发点击效果</li>
</ul>
<p>6、Slider</p>
<ul>
<li>Slider 范围选择滑块</li>
<li>SliderTheme 自定义Slider的样式</li>
<li>SliderThemeData SliderTheme的data修饰属性</li>
</ul>
<p>7、Switch</p>
<ul>
<li><p>Switch<br>  Switch、Switch.adaptive(ios风格)<br>  可自定义背景图、背景颜色等</p>
</li>
<li><p>SwitchListTile<br>  衍生组件，可以通过点击关联的文字标签切换switch</p>
</li>
<li><p>AnimatedSwitcher<br>  一个在新旧组件之间做渐变切换的组件，有一定的动画效果</p>
</li>
</ul>
<h4 id="Frame"><a href="#Frame" class="headerlink" title="Frame"></a>Frame</h4><p>1、Align<br>    Alignment.center/centerLeft/bottomLeft（yx）</p>
<p>2、Stack</p>
<ul>
<li><p>Stack<br>  绝对布局，依次叠加。</p>
</li>
<li><p>IndexedStack<br>  显示一个子项列表中的单个子项（只显示指定的一个子选项）</p>
</li>
</ul>
<p>3、Layout</p>
<ul>
<li>Row</li>
<li>Column</li>
<li>Container<br>  最小空间原则</li>
<li>Center</li>
</ul>
<p>4、Box</p>
<ul>
<li><p>ContainerBox<br>  添加额外的限制条件到child上。比如最大/最小高度/宽度</p>
</li>
<li><p>OverflowBox<br>  对子组件添加的约束，不同于子组件从其父组件获得的约束，<strong>允许child溢出父控件的空间</strong>。</p>
</li>
<li><p>DecoratedBox<br>  在child绘制前或绘制后，添加额外的限制条件到child上，可以用来绘制一个圆形、方形、padding等。</p>
</li>
<li><p>FittedBox<br>  根据需求对child进行缩放、定位。contain/fill/cover/fitHeight/fitWidth</p>
</li>
<li><p>LimitedBox<br>  对最大宽高进行限制（前提是LimitedBox不受约束），即将child限制在指定的最大宽高中。</p>
</li>
<li><p>RoraredBox<br>  可以将子组件旋转整数的四分之一</p>
</li>
<li><p>SizedOverflowBox<br>  特定大小的窗口组件，将其约束传递给其子组件，可能会溢出。</p>
</li>
<li><p>UnconstrainedBox<br>  不限制子组件的大小，让子组件尽可能的扩展</p>
</li>
</ul>
<p>5、Expanded</p>
<ul>
<li>Expanded<br>  撑开flex布局子组件空间</li>
</ul>
<p>6、Spacing</p>
<ul>
<li><p>Padding<br>  内边距</p>
</li>
<li><p>SliverPadding<br>  列表缩进，应用于每个子元素</p>
</li>
<li><p>AnimatedPadding<br>  缩进变化时的动画</p>
</li>
</ul>
<p>7、Table</p>
<ul>
<li>Table</li>
</ul>
<h4 id="Media"><a href="#Media" class="headerlink" title="Media"></a>Media</h4><p>1、Image</p>
<ul>
<li><p>AssetImage<br>  从AssetBundle中获取图像</p>
</li>
<li><p>DecorationImage<br>  修饰Box的图片，一般配合BoxDecoration的img属性使用</p>
</li>
<li><p>ExactAssetImage<br>  带有scale属性的AssetImage</p>
</li>
<li><p>FadeInImage<br>  提供placeholder image到目标图片的过度效果</p>
</li>
<li><p>FileImage<br>  展示本地的文件，将给定的File对象解码为图片。Image.file是ImageFile的简写形式</p>
</li>
<li><p>NetworkImage<br>  网络图片</p>
</li>
<li><p>RawImage<br>  显示dart:ui.Image的组件，很少使用，推荐使用Image</p>
</li>
<li><p>MemoryImage<br>  将给定的Unit8List缓冲区解码为图像的组件</p>
</li>
<li><p>Image<br>  Image.asset 加载项目资源目录的图片，相对路径<br>  Image.network网络资源图片<br>  Image.file加载本地图片<br>  Image.memory 加载Unit8List资源图片</p>
</li>
</ul>
<p>2、Icon</p>
<ul>
<li><p>Icon</p>
</li>
<li><p>ImageIcon<br>  来自ImageProvider的图标，如AssetImage</p>
</li>
<li><p>IconTheme<br>  用于应用栏图标的言责、不透明度和大小</p>
</li>
<li><p>IconData</p>
</li>
<li><p>IconThemeData</p>
</li>
</ul>
<p>3、Canvas</p>
<ul>
<li>Canvas<br>  用于操作图形的界面</li>
<li>PainterSketch<br>  操作图形的界面</li>
<li>PainterPath<br>  在canvas上绘制的团</li>
<li>CircleProgressBarPainter<br>  操作图形的界面</li>
</ul>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><h4 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h4><p>1、BottomNavigationBarItem<br>2、BottomNavigationbar<br>    底部导航</p>
<h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><p>1、AnimatedList<br>新增、删除选项时可以设置动画<br>2、ListView<br>最常用<br>3、ListBody<br>不常用，按照主轴方向排列子节点</p>
<h4 id="Card"><a href="#Card" class="headerlink" title="Card"></a>Card</h4><p>1、Card<br>卡片用于表示一些相关信息，例如相册，地理位置，用餐，联系方式等。</p>
<h4 id="Bar"><a href="#Bar" class="headerlink" title="Bar"></a>Bar</h4><p>1、AppBar<br>应用栏——顶部导航显示的工具栏<br>2、BottomAppBar<br>底部应用栏<br><img src="media/15498692344135/15498814007297.jpg"></p>
<p>3、BottomNavigationBarItem<br>底部导航应用栏的子项<br>4、SnackBar<br>屏幕底部弹出的提示信息<br>5、Sliverbar<br>SliderApperBar可随内容滚动，一般在scroll滑动视图中。与NestedScrollView配合可实现上提到顶的悬停。<br>6、ScrollbarPainter<br>7、FlexibleSpaceBar<br>类似 Sliverbar, ”扩展和折叠的应用栏“，APPBar的一部风，可以扩展和折叠；<br>8、ButtonBar<br>末端对齐的按钮容器，向左向右看齐的按钮。<br>9、SnackBarAction<br>SnackBar，底部消息右侧有无可操作的行为<br>10、TabBar<br>实现并行界面的横向滑动展示</p>
<h4 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a>Dialog</h4><p>1、AlertDoalog<br>弹出对话框，可自定义操作选项<br>2、Dialog<br>无可操作选项的弹出层<br>3、AboutDialog<br>通常用于展示信息<br>4、SimpleDialog<br>可以为用户提供多个选项选择，有一个可选的标题，显示在选项上方</p>
<h4 id="Scaffold"><a href="#Scaffold" class="headerlink" title="Scaffold"></a>Scaffold</h4><p>1、Scaffold<br>基本的布局结构。Scaffold支持顶栏、侧边栏、底部导航栏等常用布局<br>2、ScaffoldState<br>通常用来控制SnackBars和BottomSheets和Drawer的显示和隐藏。</p>
<h4 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h4><p>1、GridTile<br>GridList中的一种瓷片组合，包含header、body、footer三部分<br>2、GridView<br>常见的滚动列表，会占满给出的空间区域。<br>3、GridPaper<br>会在GridView的item上层浮现一层网格<br>4、SliverGrid<br>可以将多个item以每行两个的形式进行排列<br>5、GridTileBar<br>通常用来做GridTile的header与footer组件。</p>
<h4 id="Scroll"><a href="#Scroll" class="headerlink" title="Scroll"></a>Scroll</h4><p>1、ScrollView<br>滚动视图，属于抽象类，不能直接实例化。<br>ListView: 常用的ScrollView<br>PageView： 每个子widget都是视口窗口大小<br>GridView： 一个现实二维子widget的ScrollView<br>CustomScrollView： 自定义滚动效果的ScrollView<br>SingleChildScrollView: 只有一个子Widget的ScrollView<br>ScrollNotification、NotificationListener： 可以用于在不使用ScrollController的情况下查看滚动位置的widget</p>
<p>2、Scrollable<br>一个可以使内容滚动的Widget<br>3、ScrollbarPainter<br>用户绘制滚定条的CustomPainter。<br>4、ScrollMetrics<br>包含当前ViewPort及滚动位置等信息，抽象类，不可被实例化。<br>5、ScrollPhysics<br>确定滚动组件的物理属性<br>6、BoxScrollView<br>使用单个子布局模型的ScrollView<br>ListView、GridView、CustomScrollView<br>7、CustomScrollView<br>自定义滚动效果的ScrollView<br>8、NestedScrollView （⭐️）<br>可以嵌在另一个滚动视图中的ScrollView</p>
<h4 id="Tab"><a href="#Tab" class="headerlink" title="Tab"></a>Tab</h4><p>1、Tab<br>Tab切换，如果同时传给Tab icon和text，text会展示在icon下面</p>
<h4 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h4><p>1、CheckedPopupMenuItem<br>带有选中标记的弹出菜单，配合PopupMenuButton使用<br>2、DropdownMenuItem<br>DropdownButton创建的一个菜单项，配合DropdownButton使用<br>3、PopupMenuButton<br>一个提供菜单栏弹出对话框的按钮<br>4、PopupMenuDivider<br>菜单栏弹出对话框中每一项的水平线<br>5、PopupMenuEntry<br>弹出菜单的一个基类<br>6、PopupMenuItem</p>
<h4 id="Pick"><a href="#Pick" class="headerlink" title="Pick"></a>Pick</h4><p>1、DayPicker<br>显示给定月份的日期，并可以选择一天<br>2、MonthPicker<br>选择一个月的可滚动月份列表，同上<br>3、YearPicker<br>同上<br>4、ShowdatePicker<br>日期选择器的对话框<br>5、CityPicker<br>显示中国的省市县区，通过函数showCityPicker调用，在容器窗口上弹出遮罩层</p>
<h4 id="Chip"><a href="#Chip" class="headerlink" title="Chip"></a>Chip</h4><p>1、Chip<br>chip是表示属性，文本，实体或动作的元素。<br><img src="media/15498692344135/15499571429653.jpg"></p>
<p>2、ChipTheme<br>描述chip的颜色，形状和文本样式<br>3、ChipThemeData<br>保存chip主题的颜色，形状和文本样式<br>4、ChoiceChip<br>允许从一组选项中进行单一的选择<br>5、FilterChip<br>通过使用标签或者描述性词语来过滤内容<br>6、InputChip<br>输入型chip<br>7、RawChip</p>
<h4 id="Panel"><a href="#Panel" class="headerlink" title="Panel"></a>Panel</h4><p>1、ExpansionPanelList<br>扩展面板，包含一个标题和一个正文，可以展开或者折叠。面板展开，主体可见。</p>
<h4 id="Progress"><a href="#Progress" class="headerlink" title="Progress"></a>Progress</h4><p>1、LinearProgressIndicator<br>一个线性进度条<br>2、CircularProhressIndicator<br>循环进度条，旋转表示进度</p>
<h2 id="Themes"><a href="#Themes" class="headerlink" title="Themes"></a>Themes</h2><h4 id="Materail"><a href="#Materail" class="headerlink" title="Materail"></a>Materail</h4><p>1、MaterialApp<br>代表Material设计风格的应用<br>2、MaterailColor<br>颜色值<br>3、MaterailButton<br>4、MaterailPageRoute<br>页面跳转携带参数替换整个屏幕的页面路由<br>5、MaterailAccentColor<br>用来定义单一的强调色，以及四种色调的色系<br>6、MergeableMaterialItem</p>
<h4 id="Cupertino（IOS-style）"><a href="#Cupertino（IOS-style）" class="headerlink" title="Cupertino（IOS style）"></a>Cupertino（IOS style）</h4><p>1、CupertinoApp<br>Cupertino苹果设计风格的应用，用于创IOS风格应用的顶层组件（Cupertino苹果电脑的全球总公司所在地，位于美国旧金山）。<br>包含了iOS应用程序通常需要的许多widget<br>2、CupertinoButton<br>iOS风格的button<br>3、CupertinoColors<br>iOS平台常用的颜色<br>4、CupertinoIcons<br>Cupertino图标的标识符<br>5、CupertinoNavigationBar<br>iOS风格的导航栏<br>6、CupertinoPageRoute<br>iOS风格全屏切换路由的滑动动画<br>7、CupertinoPageScaffold<br>实现单个iOS应用程序页的页面布局<br>8、CupertinoPicker<br>iOS风格的选择器<br>9、CupertinoPopupSurface<br>像iOS弹出式表面，快速实现一个圆角弹框<br>10、CupertinoScrollbar<br>iOS风格的滚动条<br>11、CupertinoSlider<br>iOS风格的Slider，选择连续性或非连续性的数据<br>12、CupertinoSegmentedControl<br><img src="media/15498692344135/15499590649228.jpg"><br>展示一些用户可以选择的选项<br>13、CupertinoSliverNavigationBar<br>iOS-11风格下拥有较大标题块的导航栏目<br>14、CupertinoSwitch<br>iOS风格的switch开关<br>15、CupertinoTabBar<br>iOS风格的底部导航栏<br>16、CupertinotabScaffold<br>iOS应用程序的选项卡的根布局结构<br>17、CupertinoTabView<br>具有自己的Navigator状态与历史记录的选项卡试图组件。<br>该组件有自己的路由体系，有自己的导航体系，并且他自身内部的导航系统并不与任何父母元素共享<br>18、CupertinoTimerPicker<br>iOS风格下的时间选择组件</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-01-25T14:48:36.000Z" title="1/25/2019, 10:48:36 PM">2019-01-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-04-13T09:16:12.000Z" title="4/13/2019, 5:16:12 PM">2019-04-13</time></span><span class="level-item">6 minutes read (About 861 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/01/25/Mweb%E4%BD%BF%E7%94%A8%E8%85%BE%E8%AE%AFCOS%E4%BD%9C%E4%B8%BA%E5%9B%BE%E5%BA%8A/">Mweb使用腾讯COS作为图床</a></h1><div class="content"><p>新入一盆小老弟同款熊爪，取名金风。</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/F9A1CBCE2ACD37E2D2591AD8613F9556.png!ghost" alt="F9A1CBCE2ACD37E2D2591AD8613F9556"></p>
<hr>
<p>回归主题。接上上上上篇，使用腾讯COS替代七牛作为图床之后。平时使用Mweb作为Markdown写作软件，用着蛮舒服的。但是Mweb集成的图床是七牛的图床，腾讯COS的没有集成。每次发布文章前要把文章中的图片手动上传，然后复制链接。😂 当文章中的图片比较多的时候，我发现太扯淡了…所以想着整个上传的API。结果找了一圈没发现现成的轮子，只能自己造一个了。</p>
<p>思路比较简单，就是利用Mweb可配置自定义的图片上传功能。写一个腾讯COS上传图片的接口，然后配置到Mweb中即可。同时可配置CDN加速、图片处理规则。</p>
<p>github: <a target="_blank" rel="noopener" href="https://github.com/flute/Mweb_tencet_cos">https://github.com/flute/Mweb_tencet_cos</a></p>
<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MWeb使用腾讯云存储COS作为图床</span></span><br><span class="line"><span class="comment"> * 利用COS API，用nodejs作为server上传图片，添加至MWeb的配置中即可</span></span><br><span class="line"><span class="comment"> * 2019-01-25 23:00</span></span><br><span class="line"><span class="comment"> * author: ludis</span></span><br><span class="line"><span class="comment"> * github: https://github.com/flute/Mweb_tencet_cos</span></span><br><span class="line"><span class="comment"> * COS Doc: https://cloud.tencent.com/document/product/436/8629</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">// form表单需要的中间件。</span></span><br><span class="line"><span class="keyword">const</span> mutipart = <span class="built_in">require</span>(<span class="string">&#x27;connect-multiparty&#x27;</span>);</span><br><span class="line"><span class="comment">//  Tecent COS</span></span><br><span class="line"><span class="keyword">const</span> COS = <span class="built_in">require</span>(<span class="string">&#x27;cos-nodejs-sdk-v5&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="comment">// 本地文件临时路径</span></span><br><span class="line">  <span class="attr">temporaryUploadDir</span>: <span class="string">&#x27;./temporary&#x27;</span>,</span><br><span class="line">  <span class="comment">// node服务启动端口</span></span><br><span class="line">  <span class="attr">defaultPort</span>: <span class="number">3000</span>,</span><br><span class="line">  <span class="comment">// 到 控制台密钥管理 获取您的项目 SecretId 和 SecretKey。</span></span><br><span class="line">  <span class="comment">// https://console.cloud.tencent.com/capi</span></span><br><span class="line">  <span class="attr">secretId</span>: <span class="string">&#x27;AKIDsipmK32L..XXXXX..OuOtbSDFpair&#x27;</span>,</span><br><span class="line">  <span class="attr">secretKey</span>: <span class="string">&#x27;VzSwGaimpHj..XXXXX..IoQAn1FMMSVcUz&#x27;</span>,</span><br><span class="line">  <span class="comment">// 到 COS 对象存储控制台 创建存储桶，得到 Bucket（存储桶名称） 和 Region（地域名称）。</span></span><br><span class="line">  <span class="comment">// https://console.cloud.tencent.com/cos4</span></span><br><span class="line">  <span class="attr">bucket</span>: <span class="string">&#x27;ludis-1252396698&#x27;</span>,</span><br><span class="line">  <span class="attr">region</span>: <span class="string">&#x27;ap-beijing&#x27;</span>,</span><br><span class="line">  <span class="comment">// 文件上传后的路径前缀，如上传 test.png 后存储的目录为 ghost/flutter/test.png</span></span><br><span class="line">  <span class="attr">preUrl</span>: <span class="string">&#x27;ghost/images/flutter&#x27;</span>,</span><br><span class="line">  <span class="comment">// 文件上传后的域名</span></span><br><span class="line">  <span class="comment">// 上传成功默认域名： ludis-1252396698.cos.ap-beijing.myqcloud.com</span></span><br><span class="line">  <span class="comment">// 实用万象优图，处理图片</span></span><br><span class="line">  <span class="comment">// 默认图片处理域名： ludis-1252396698.picbj.myqcloud.com</span></span><br><span class="line">  <span class="comment">// 使用cdn加速域名：  ludis-1252396698.image.myqcloud.com</span></span><br><span class="line">  <span class="attr">domain</span>: <span class="string">&#x27;ludis-1252396698.image.myqcloud.com&#x27;</span>,</span><br><span class="line">  <span class="comment">// 图片处理规则，没有可为空</span></span><br><span class="line">  <span class="attr">rule</span>: <span class="string">&#x27;!ghost&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用永久密钥创建实例</span></span><br><span class="line"><span class="keyword">const</span> cos = <span class="keyword">new</span> COS(&#123;</span><br><span class="line">  <span class="attr">SecretId</span>: config.secretId,</span><br><span class="line">  <span class="attr">SecretKey</span>: config.secretKey</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutipartMiddeware = mutipart();</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.use(mutipart(&#123;</span><br><span class="line">  <span class="attr">uploadDir</span>: config.temporaryUploadDir</span><br><span class="line">&#125;));</span><br><span class="line">app.set(<span class="string">&#x27;port&#x27;</span>, process.env.PORT || config.defaultPort);</span><br><span class="line">app.listen(app.get(<span class="string">&#x27;port&#x27;</span>), <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Express started on http://localhost: <span class="subst">$&#123;app.get(<span class="string">&#x27;port&#x27;</span>)&#125;</span> ; press Ctrl-C to terminate.`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/upload&#x27;</span>, mutipartMiddeware, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取文件名、路劲（临时路劲）</span></span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    name,</span><br><span class="line">    path</span><br><span class="line">  &#125; = req.files.file</span><br><span class="line">  <span class="comment">// 上传</span></span><br><span class="line">  upload(name, path, <span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (url) res.json(&#123;</span><br><span class="line">      <span class="attr">url</span>: url</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">else</span> res.send(<span class="string">&#x27;upload failed!&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> upload = <span class="function">(<span class="params">name, path, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 分片上传</span></span><br><span class="line">  cos.sliceUploadFile(&#123;</span><br><span class="line">    <span class="attr">Bucket</span>: config.bucket,</span><br><span class="line">    <span class="attr">Region</span>: config.region,</span><br><span class="line">    <span class="attr">Key</span>: <span class="string">`<span class="subst">$&#123;preUrl&#125;</span>/<span class="subst">$&#123;name&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">FilePath</span>: path</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, data);</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      callback(<span class="literal">null</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback(<span class="string">`https://<span class="subst">$&#123;config.domain&#125;</span>/<span class="subst">$&#123;data.Key&#125;</span><span class="subst">$&#123;config.rule&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置<code>config</code>中所需的各类信息后，启动node服务即可。</p>
<p>然后在Mwe偏好设置中进行配置：</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15484265130175.jpg!ghost"></p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15484265480192.jpg!ghost"></p>
<p>配置完成后。上传图片至图床即可。</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15484266294864.jpg!ghost"></p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15484266535663.jpg!ghost"></p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15484267925068.jpg!ghost"></p>
<p>哦了，这样文章中的所有图片已经自动上传至腾讯COS，并返回正确的链接。舒服了🐣🐣🦉</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-01-20T06:10:47.000Z" title="1/20/2019, 2:10:47 PM">2019-01-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2019-01-20T14:15:24.000Z" title="1/20/2019, 10:15:24 PM">2019-01-20</time></span><span class="level-item">25 minutes read (About 3799 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/01/20/Flutter%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85%E2%80%94%E2%80%94%E5%AE%9E%E7%94%A8%E5%85%A5%E5%9D%91%E6%8C%87%E5%8D%97/">Flutter学习之旅——实用入坑指南</a></h1><div class="content"><p>开篇： 一如前端深似海，<del>从此节操是路人</del>，<del>从此再无安宁日</del>，从此红尘是路人。要说技术更迭速度，还有比前端更快的么😂根本停不下来。这不，Google刚发布Flutter不到一年时间，1.0正式版发布不到两个月。阿里系的闲鱼老大哥，已经率先用Flutter重构了闲鱼，虽然没完全重构，但高频的重度页面都是Flutter的了。这一幕似曾相识，当初RN出来的时候不也是闲鱼团队先吃的螃蟹吗，在这里向闲鱼团队的老哥们致敬🐣。</p>
<p>既然老大哥都出动了，也侧面验证了这项技术的可行性。当小弟的也不能落后嘛，每天抽时间断断续续的学了两周时间，仿部分知乎的客户端，撸了一套客户端出来。前一周主要是熟悉Dart语言和常规的客户端布局方式，后一周主要是掌握使用HTTP的请求、下拉上拉、左滑右滑、长按等常用手势、相机调用、video播放等进阶用法。 两周下来，基本上可以开发80%以上常见的客户端需求。</p>
<p>前期一直在用simulator开发，略有卡顿，心中难免有些疑惑。结果最后release打包到手机后，竟然如丝般顺滑！！！简直喜出望外，完全可以睥睨原生开发，在这一点上的确要优于目前的RN。最重要的是作为Materail Design极简又有质感风格的<del>鸭</del>狗血粉丝，Flutter造出来的界面简直倍爽。至此正式入坑Flutter开发。Google万岁！</p>
<blockquote>
<p>Flutter是谷歌的移动UI框架，可以快速在iOS和Android上构建高质量的原生用户界面。 Flutter可以与现有的代码一起工作。在全世界，Flutter正在被越来越多的开发者和组织使用，并且Flutter是完全免费、开源的。</p>
<p>Beta1版本于2018年2月27日在2018 世界移动大会公布。<br>Beta2版本2018年3月6日发布。<br>1.0版本于2018年12月5日(北京时间)发布</p>
</blockquote>
<p>这里把学习过程中一些常用高频的东西总结出来，基本能满足大多数情况下的开发需求。</p>
<p>完整的代码： <a target="_blank" rel="noopener" href="https://github.com/flute/zhihu_flutter">https://github.com/flute/zhihu_flutter</a></p>
<p>欢迎加入Flutter开拓交流，群聊号码：236379502</p>
<h3 id="Scaffold-主要的属性说明"><a href="#Scaffold-主要的属性说明" class="headerlink" title="Scaffold 主要的属性说明"></a>Scaffold 主要的属性说明</h3><ul>
<li>appBar：显示在界面顶部的一个 AppBar </li>
<li>body：当前界面所显示的主要内容</li>
<li>floatingActionButton： 在 Material 中定义的一个功能按钮。</li>
<li>persistentFooterButtons：固定在下方显示的按钮。<a target="_blank" rel="noopener" href="https://material.google.com/components/buttons.html#buttons-persistent-footer-buttons">https://material.google.com/components/buttons.html#buttons-persistent-footer-buttons</a></li>
<li>drawer：侧边栏控件</li>
<li>bottomNavigationBar：显示在底部的导航栏按钮栏。可以查看文档：Flutter学习之制作底部菜单导航</li>
<li>backgroundColor：背景颜色</li>
<li>resizeToAvoidBottomPadding： 控制界面内容 body 是否重新布局来避免底部被覆盖了，比如当键盘显示的时候，重新布局避免被键盘盖住内容。默认值为 true。</li>
</ul>
<h3 id="底部菜单-bottomNavigationBar，Tab栏切换-TabBar"><a href="#底部菜单-bottomNavigationBar，Tab栏切换-TabBar" class="headerlink" title="底部菜单 bottomNavigationBar，Tab栏切换 TabBar"></a>底部菜单 bottomNavigationBar，Tab栏切换 TabBar</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">TabController controller;</span><br><span class="line"></span><br><span class="line">@override</span><br><span class="line">void initState() &#123;</span><br><span class="line">  super.initState();</span><br><span class="line"></span><br><span class="line">  // initialize the tab controller</span><br><span class="line">  // vsync ??</span><br><span class="line">  controller = new TabController(length: 5, vsync: this);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@override</span><br><span class="line">void dispose() &#123;</span><br><span class="line">  // dispose of tab controller</span><br><span class="line">  controller.dispose();</span><br><span class="line">  super.dispose();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">body: new TabBarView(</span><br><span class="line">  children: &lt;Widget&gt;[new HomeTab(), new IdeaTab(), new ColleagueTab(), new MessageTab(), new MeTab()],</span><br><span class="line">  controller: controller,</span><br><span class="line">),</span><br><span class="line">bottomNavigationBar: new Material(</span><br><span class="line">  // background color of bottom navigation bar</span><br><span class="line">  color: Colors.white,</span><br><span class="line">  textStyle: new TextStyle(</span><br><span class="line">    color: Colors.black45</span><br><span class="line">  ),</span><br><span class="line">  child: new TabBar(</span><br><span class="line">    unselectedLabelColor: Colors.black45,</span><br><span class="line">    labelColor: Colors.blue,</span><br><span class="line">    controller: controller,</span><br><span class="line">    tabs: &lt;Tab&gt;[</span><br><span class="line">      new Tab(</span><br><span class="line">        child: new Container(</span><br><span class="line">          padding: EdgeInsets.only(top: 5),</span><br><span class="line">          child: new Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Icon(Icons.home, size: 25,),</span><br><span class="line">              Text(&#x27;首页&#x27;, style: TextStyle(fontSize: 10),)</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      new Tab(</span><br><span class="line">        child: new Container(</span><br><span class="line">          padding: EdgeInsets.only(top: 5),</span><br><span class="line">          child: new Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Icon(Icons.access_alarm, size: 25,),</span><br><span class="line">              Text(&#x27;想法&#x27;, style: TextStyle(fontSize: 10),)</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      new Tab(</span><br><span class="line">        child: new Container(</span><br><span class="line">          padding: EdgeInsets.only(top: 5),</span><br><span class="line">          child: new Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Icon(Icons.access_time, size: 25,),</span><br><span class="line">              Text(&#x27;大学&#x27;, style: TextStyle(fontSize: 10),)</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      new Tab(</span><br><span class="line">        child: new Container(</span><br><span class="line">          padding: EdgeInsets.only(top: 5),</span><br><span class="line">          child: new Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Icon(Icons.account_balance_wallet, size: 25,),</span><br><span class="line">              Text(&#x27;消息&#x27;, style: TextStyle(fontSize: 10),)</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      new Tab(</span><br><span class="line">        child: new Container(</span><br><span class="line">          padding: EdgeInsets.only(top: 5),</span><br><span class="line">          child: new Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Icon(Icons.adb, size: 25,),</span><br><span class="line">              Text(&#x27;我的&#x27;, style: TextStyle(fontSize: 10),)</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15479578988617.jpg!ghost"></p>
<h3 id="顶栏自定义-appbar：title属性"><a href="#顶栏自定义-appbar：title属性" class="headerlink" title="顶栏自定义 appbar：title属性"></a>顶栏自定义 appbar：title属性</h3><p>顶部搜索栏:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return new Scaffold(</span><br><span class="line">    appBar: new AppBar(</span><br><span class="line">      title: searchBar(),</span><br><span class="line">      backgroundColor: Colors.white,</span><br><span class="line">      bottom: new Text(&#x27;bottom&#x27;),</span><br><span class="line">    ),</span><br><span class="line">    body: new Container()</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 顶部搜索栏</span><br><span class="line"> */</span><br><span class="line">Widget searchBar() &#123;</span><br><span class="line">  return new Container(</span><br><span class="line">    child: new Row(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        new Expanded(</span><br><span class="line">          child: new FlatButton.icon(</span><br><span class="line">            color:Color.fromRGBO(229, 229, 229, 1.0),</span><br><span class="line">            onPressed: ()&#123;</span><br><span class="line">              Navigator.of(context).push(new MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">                return new SearchPage();</span><br><span class="line">              &#125;));</span><br><span class="line">            &#125;,</span><br><span class="line">            icon: new Icon(</span><br><span class="line">              Icons.search,</span><br><span class="line">              color: Colors.black38,</span><br><span class="line">              size: 16.0,</span><br><span class="line">            ),</span><br><span class="line">            label: new Text(</span><br><span class="line">              &quot;诺奖得主为上课推迟发布会&quot;,</span><br><span class="line">              style: new TextStyle(color: Colors.black38)</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        new Container(</span><br><span class="line">          child: new FlatButton.icon(</span><br><span class="line">            onPressed: ()&#123;</span><br><span class="line">              Navigator.of(context).push(new MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">                return new AskPage();</span><br><span class="line">              &#125;));</span><br><span class="line">            &#125;,</span><br><span class="line">            icon: new Icon(</span><br><span class="line">              Icons.border_color,</span><br><span class="line">              color: Colors.blue,</span><br><span class="line">              size: 14.0</span><br><span class="line">            ),</span><br><span class="line">            label: new Text(</span><br><span class="line">              &#x27;提问&#x27;,</span><br><span class="line">              style: new TextStyle(color: Colors.blue),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15479578815954.jpg!ghost"></p>
<h3 id="图片圆角"><a href="#图片圆角" class="headerlink" title="图片圆角"></a>图片圆角</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  margin: EdgeInsets.only(right: 5),</span><br><span class="line">  decoration: new BoxDecoration(</span><br><span class="line">    shape: BoxShape.circle,</span><br><span class="line">    image: new DecorationImage(</span><br><span class="line">      image: new NetworkImage(avatarUrl),</span><br><span class="line">    )</span><br><span class="line">  ),</span><br><span class="line">  width: 30,</span><br><span class="line">  height: 30,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<h4 id="数组里动态添加组件"><a href="#数组里动态添加组件" class="headerlink" title="数组里动态添加组件"></a>数组里动态添加组件</h4><p><a target="_blank" rel="noopener" href="https://github.com/flutter/flutter/issues/3783">https://github.com/flutter/flutter/issues/3783</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bool notNull(Object o) =&gt; o != null;</span><br><span class="line">Widget build() &#123;</span><br><span class="line">  return new Column(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      new Title(),</span><br><span class="line">      new Body(),</span><br><span class="line">      shouldShowFooter ? new Footer() : null</span><br><span class="line">    ].where(notNull).toList(),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Text显示指定行数，超出后显示省略号"><a href="#Text显示指定行数，超出后显示省略号" class="headerlink" title="Text显示指定行数，超出后显示省略号"></a>Text显示指定行数，超出后显示省略号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">    content,</span><br><span class="line">    maxLines: 3,</span><br><span class="line">    overflow: TextOverflow.ellipsis,</span><br><span class="line">    style: new TextStyle(fontSize: 14, color: Colors.black54),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>


<h4 id="margin-负值"><a href="#margin-负值" class="headerlink" title="margin 负值"></a>margin 负值</h4><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/42257668/the-equivalent-of-wrap-content-and-match-parent-in-flutter">https://stackoverflow.com/questions/42257668/the-equivalent-of-wrap-content-and-match-parent-in-flutter</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">return Container(</span><br><span class="line">  width: 40,</span><br><span class="line">  height:40,</span><br><span class="line">  // flutter中的margin没有负值的说法</span><br><span class="line">  // https://stackoverflow.com/questions/42257668/the-equivalent-of-wrap-content-and-match-parent-in-flutter</span><br><span class="line">  transform: Matrix4.translationValues(-20.0, 0.0, 0.0),</span><br><span class="line">  decoration: new BoxDecoration(</span><br><span class="line">    border: Border.all(width: 3, color: Colors.white),</span><br><span class="line">    color: Colors.black,</span><br><span class="line">    shape: BoxShape.circle,</span><br><span class="line">    image: new DecorationImage(</span><br><span class="line">      image: new NetworkImage(&#x27;https://pic3.zhimg.com/50/d2af1b6b1_s.jpg&#x27;)</span><br><span class="line">    )</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>


<h4 id="图片自适应填满container"><a href="#图片自适应填满container" class="headerlink" title="图片自适应填满container"></a>图片自适应填满container</h4><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/45745448/how-do-i-stretch-an-image-to-fit-the-whole-background-100-height-x-100-width">https://stackoverflow.com/questions/45745448/how-do-i-stretch-an-image-to-fit-the-whole-background-100-height-x-100-width</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">new Container(</span><br><span class="line">  height: 200,</span><br><span class="line">  decoration: new BoxDecoration(</span><br><span class="line">    image: new DecorationImage(</span><br><span class="line">      image: NetworkImage(&#x27;https://pic3.zhimg.com/50/v2-f9fd4b13a46f2800a7049a5724e5969f_400x224.jpg&#x27;),</span><br><span class="line">      fit: BoxFit.fill</span><br><span class="line">    )</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<h4 id="布局方式"><a href="#布局方式" class="headerlink" title="布局方式"></a>布局方式</h4><p>justify-content: mainAxisAlignment<br>align-items:  crossAxisAlignment</p>
<p>column 设置crossAxisAlignment: stretch后子元素宽度为100%，如果想让子元素宽度不为100%， 将其包裹在Row元素中即可。</p>
<h4 id="flutter-row-and-column"><a href="#flutter-row-and-column" class="headerlink" title="flutter row and column"></a>flutter row and column</h4><p><a target="_blank" rel="noopener" href="https://medium.com/jlouage/flutter-row-column-cheat-sheet-78c38d242041">https://medium.com/jlouage/flutter-row-column-cheat-sheet-78c38d242041</a></p>
<h4 id="捕捉点击事件"><a href="#捕捉点击事件" class="headerlink" title="捕捉点击事件"></a>捕捉点击事件</h4><p>使用<code>GestureDetector</code>包裹<code>widget</code>即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">child: new GestureDetector(</span><br><span class="line">    onTap: click,</span><br><span class="line">    child: Text(</span><br><span class="line">      name,</span><br><span class="line">      style: TextStyle(color: Colors.black87),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>

<h4 id="Dart-数组方法"><a href="#Dart-数组方法" class="headerlink" title="Dart 数组方法"></a>Dart 数组方法</h4><p><a target="_blank" rel="noopener" href="https://codeburst.io/top-10-array-utility-methods-you-should-know-dart-feb2648ee3a2">https://codeburst.io/top-10-array-utility-methods-you-should-know-dart-feb2648ee3a2</a></p>
<h4 id="PopupMenuButton-下拉弹窗菜单"><a href="#PopupMenuButton-下拉弹窗菜单" class="headerlink" title="PopupMenuButton 下拉弹窗菜单"></a>PopupMenuButton 下拉弹窗菜单</h4><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/43349013/how-to-open-a-popupmenubutton">https://stackoverflow.com/questions/43349013/how-to-open-a-popupmenubutton</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">class DetailPage extends StatefulWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  DetailPageState createState() =&gt; DetailPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class DetailPageState extends State&lt;DetailPage&gt; &#123;</span><br><span class="line">  final GlobalKey _menuKey = new GlobalKey();</span><br><span class="line">....</span><br><span class="line">....</span><br><span class="line">....</span><br><span class="line">  </span><br><span class="line">child: new Row(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      new Container(</span><br><span class="line">        child: new GestureDetector(</span><br><span class="line">          onTap: () &#123;</span><br><span class="line">            dynamic state = _menuKey.currentState;</span><br><span class="line">            state.showButtonMenu();</span><br><span class="line">          &#125;,</span><br><span class="line">          child: new Container(</span><br><span class="line">            child: new Text(&#x27;默认排序&#x27;),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      new PopupMenuButton(</span><br><span class="line">        icon: Icon(Icons.keyboard_arrow_down),</span><br><span class="line">        offset: Offset(0, 50),</span><br><span class="line">        key: _menuKey,</span><br><span class="line">        itemBuilder: (_) =&gt; &lt;PopupMenuItem&lt;String&gt;&gt;[</span><br><span class="line">          new PopupMenuItem&lt;String&gt;(</span><br><span class="line">              child: const Text(&#x27;默认排序&#x27;), value: &#x27;default&#x27;),</span><br><span class="line">          new PopupMenuItem&lt;String&gt;(</span><br><span class="line">              child: const Text(&#x27;按时间排序&#x27;), value: &#x27;timeline&#x27;),</span><br><span class="line">        ],</span><br><span class="line">        onSelected: (_) &#123;&#125;</span><br><span class="line">      )</span><br><span class="line">      </span><br><span class="line">    ],</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477176736745.jpg!ghost"></p>
<h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>水平分割线  Divider<br>垂直分割线  VerticalDivider (无效？？？)</p>
<h3 id="swiper"><a href="#swiper" class="headerlink" title="swiper"></a>swiper</h3><p><a target="_blank" rel="noopener" href="https://pub.dartlang.org/packages/flutter_swiper">https://pub.dartlang.org/packages/flutter_swiper</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;package:flutter_swiper/flutter_swiper.dart&#x27;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">var images = [</span><br><span class="line">  &#x27;https://pic3.zhimg.com/v2-5806d9e33e36fa772c8da56c931bb416_b.jpg&#x27;,</span><br><span class="line">  &#x27;https://pic1.zhimg.com/50/v2-f355ca177e011626938b479f0e2e3e03_hd.jpg&#x27;,</span><br><span class="line">  &#x27;https://pic2.zhimg.com/v2-d8e47ed961b93b875ad814104016bdfd_b.jpg&#x27;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">child: new Swiper(</span><br><span class="line">    itemBuilder: (BuildContext context,int index)&#123;</span><br><span class="line">      return new Image.network(images[index], fit: BoxFit.cover,);</span><br><span class="line">    &#125;,</span><br><span class="line">    itemCount: 3,</span><br><span class="line">    pagination: new SwiperPagination(),</span><br><span class="line">    //control: new SwiperControl(),</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>

<h3 id="floatingActionButton-浮动button"><a href="#floatingActionButton-浮动button" class="headerlink" title="floatingActionButton 浮动button"></a>floatingActionButton 浮动button</h3><p><a target="_blank" rel="noopener" href="https://proandroiddev.com/a-deep-dive-into-floatingactionbutton-in-flutter-bf95bee11627">https://proandroiddev.com/a-deep-dive-into-floatingactionbutton-in-flutter-bf95bee11627</a></p>
<p>floatingActionButton 配合 Scaffold 使用最佳</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Scaffold(</span><br><span class="line">    floatingActionButton: new FloatingActionButton(</span><br><span class="line">        onPressed: ()&#123;&#125;,</span><br><span class="line">        child: Icon(Icons.edit),</span><br><span class="line">        //mini: true,</span><br><span class="line">      ),</span><br><span class="line">    // 默认右下角，可设置位置。</span><br><span class="line">    floatingActionButtonLocation: FloatingActionButtonLocation.centerFloat,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="滑动视图"><a href="#滑动视图" class="headerlink" title="滑动视图"></a>滑动视图</h3><p>SingleChildScrollView</p>
<p>水平方向滑动 <code>scrollDirection: Axis.horizontal</code></p>
<h3 id="高斯模糊"><a href="#高斯模糊" class="headerlink" title="高斯模糊"></a>高斯模糊</h3><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/43550853/how-do-i-do-the-frosted-glass-effect-in-flutter">https://stackoverflow.com/questions/43550853/how-do-i-do-the-frosted-glass-effect-in-flutter</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;dart:ui&#x27;;</span><br><span class="line"></span><br><span class="line">new BackdropFilter(</span><br><span class="line">    filter: new ImageFilter.blur(sigmaX: 10.0, sigmaY: 10.0),</span><br><span class="line">    child: Text(desc, style: TextStyle(color: Colors.white),),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<h3 id="对话框弹窗"><a href="#对话框弹窗" class="headerlink" title="对话框弹窗"></a>对话框弹窗</h3><p><a target="_blank" rel="noopener" href="https://docs.flutter.io/flutter/material/AlertDialog-class.html">https://docs.flutter.io/flutter/material/AlertDialog-class.html</a></p>
<p>AlertDialog</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">void _showDialog(BuildContext context) &#123;</span><br><span class="line">    // flutter defined function</span><br><span class="line">    showDialog(</span><br><span class="line">      context: context,</span><br><span class="line">      builder: (BuildContext context) &#123;</span><br><span class="line">        // return object of type Dialog</span><br><span class="line">        return AlertDialog(</span><br><span class="line">          title: Text(&#x27;Rewind and remember&#x27;),</span><br><span class="line">          content: SingleChildScrollView(</span><br><span class="line">            child: ListBody(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                Text(&#x27;You will never be satisfied.&#x27;),</span><br><span class="line">                Text(&#x27;You\’re like me. I’m never satisfied.&#x27;),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          actions: &lt;Widget&gt;[</span><br><span class="line">            // usually buttons at the bottom of the dialog</span><br><span class="line">            new FlatButton(</span><br><span class="line">              child: new Text(&quot;Close&quot;),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Navigator.of(context).pop();</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">// 调用</span><br><span class="line">....</span><br><span class="line">onPressed: ()&#123;</span><br><span class="line">  _showDialog(context);</span><br><span class="line">&#125;,</span><br><span class="line">....</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478804991394.jpg!ghost"></p>
<h4 id="HTTP-请求、JSON编码解码"><a href="#HTTP-请求、JSON编码解码" class="headerlink" title="HTTP 请求、JSON编码解码"></a>HTTP 请求、JSON编码解码</h4><p><a target="_blank" rel="noopener" href="https://flutterchina.club/networking/">https://flutterchina.club/networking/</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载库</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:convert&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:io&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> request = <span class="keyword">await</span> httpClient.getUrl(<span class="built_in">Uri</span>.parse(url));</span><br><span class="line">  <span class="keyword">var</span> response = <span class="keyword">await</span> request.close();</span><br><span class="line">  <span class="keyword">if</span> (response.statusCode == HttpStatus.OK) &#123;</span><br><span class="line">    <span class="keyword">var</span> json = <span class="keyword">await</span> response.transform(UTF8.decoder).join();</span><br><span class="line">    <span class="keyword">var</span> data = JSON.decode(json);</span><br><span class="line">    result = data[<span class="string">&#x27;origin&#x27;</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result =</span><br><span class="line">        <span class="string">&#x27;Error getting IP address:\nHttp status <span class="subst">$&#123;response.statusCode&#125;</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">  result = <span class="string">&#x27;Failed getting IP address&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存返回的数据</span></span><br><span class="line"><span class="comment">// error: setState() called after dispose()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// If the widget was removed from the tree while the message was in flight,</span></span><br><span class="line"><span class="comment">// we want to discard the reply rather than calling setState to update our</span></span><br><span class="line"><span class="comment">// non-existent appearance.</span></span><br><span class="line"><span class="keyword">if</span> (!mounted) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">setState(() &#123;</span><br><span class="line">  _ipAddress = result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="时间控制：延时"><a href="#时间控制：延时" class="headerlink" title="时间控制：延时"></a>时间控制：延时</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;dart:async&#x27;;</span><br><span class="line">Future&lt;Null&gt; _onRefresh() &#123;</span><br><span class="line">    Completer&lt;Null&gt; completer = new Completer&lt;Null&gt;();</span><br><span class="line"></span><br><span class="line">    new Timer(new Duration(seconds: 3), () &#123;</span><br><span class="line">      print(&quot;timer complete&quot;);</span><br><span class="line">      completer.complete();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return completer.future;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新-RefreshIndicator"><a href="#下拉刷新-RefreshIndicator" class="headerlink" title="下拉刷新 RefreshIndicator"></a>下拉刷新 RefreshIndicator</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">new RefreshIndicator(</span><br><span class="line">  onRefresh: _onRefresh,</span><br><span class="line">  child: new SingleChildScrollView(</span><br><span class="line">    child: new Container(</span><br><span class="line">      padding: EdgeInsets.all(10),</span><br><span class="line">      child: new Text(_jsonData),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="上拉加载更多"><a href="#上拉加载更多" class="headerlink" title="上拉加载更多"></a>上拉加载更多</h3><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b3abfc4518825622c14a6f1">https://juejin.im/post/5b3abfc4518825622c14a6f1</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ScrollController _controller = new ScrollController();</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line">    _controller.addListener(()&#123;</span><br><span class="line">      if(_controller.position.pixels == _controller.position.maxScrollExtent) &#123;</span><br><span class="line">        print(&#x27;下拉加载&#x27;);</span><br><span class="line">        _getMoreData();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @override</span><br><span class="line">  void dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    super.dispose();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  scroll controller: _controller</span><br><span class="line">  ...</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<h3 id="flutter运行模式"><a href="#flutter运行模式" class="headerlink" title="flutter运行模式"></a>flutter运行模式</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4db65478aaa3">https://www.jianshu.com/p/4db65478aaa3</a></p>
<h3 id="flutter学习资源"><a href="#flutter学习资源" class="headerlink" title="flutter学习资源"></a>flutter学习资源</h3><p><a target="_blank" rel="noopener" href="http://flutter.link/">http://flutter.link/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  zh git:(master) ✗ flutter clean</span><br><span class="line">Deleting &#x27;build/&#x27;.</span><br><span class="line">➜  zh git:(master) ✗ rm -rf ios/Flutter/App.framework ios/Flutter/Flutter.framework</span><br><span class="line">➜  zh git:(master) ✗ rm -rf /Users/ludis/Library/Developer/Xcode/DerivedData/Runner-</span><br></pre></td></tr></table></figure>

<h3 id="报错解决"><a href="#报错解决" class="headerlink" title="报错解决"></a>报错解决</h3><p>1、在安卓真机release后 ios simulator无法编译</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Launching lib/main.dart on iPhone X in debug mode...</span><br><span class="line">Xcode build done.                                            1.0s</span><br><span class="line">Failed to build iOS app</span><br><span class="line">Error output from Xcode build:</span><br><span class="line">↳</span><br><span class="line">** BUILD FAILED **</span><br><span class="line">Xcode&#x27;s output:</span><br><span class="line">↳</span><br><span class="line">=== BUILD TARGET Runner OF PROJECT Runner WITH CONFIGURATION Debug ===</span><br><span class="line">diff: /Users/ludis/Desktop/opt/flutter/zh/ios/Pods/Manifest.lock: No such file or directory</span><br><span class="line">error: The sandbox is not in sync with the Podfile.lock. Run &#x27;pod install&#x27; or update your CocoaPods installation.</span><br><span class="line">Could not build the application for the simulator.</span><br><span class="line">Error launching application on iPhone X.</span><br><span class="line">Exited (sigterm)</span><br></pre></td></tr></table></figure>

<p>解决</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ios</span><br><span class="line">pod install</span><br></pre></td></tr></table></figure>

<p>常见问题: <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bf3002de6a5e">https://www.jianshu.com/p/bf3002de6a5e</a></p>
<h3 id="Flutter-scroll-animation"><a href="#Flutter-scroll-animation" class="headerlink" title="Flutter scroll animation"></a>Flutter scroll animation</h3><p><a target="_blank" rel="noopener" href="https://medium.com/flutter-community/scrolling-animation-in-flutter-6a6718b8e34f">https://medium.com/flutter-community/scrolling-animation-in-flutter-6a6718b8e34f</a></p>
<h3 id="布局指南"><a href="#布局指南" class="headerlink" title="布局指南"></a>布局指南</h3><p>在scrollView的滚动布局中，如果使用column组件，并为其添加Expanded扩展子组件的话，这两者会存在冲突。<br>如果坚持要使用此布局，在column设置<code>mainAxisSize: MainAxisSize.min</code>，同时子组件由<code>Expanded</code>改为<code>Flexible</code>即可。</p>
<h3 id="表单、校验"><a href="#表单、校验" class="headerlink" title="表单、校验"></a>表单、校验</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pengshaomin/p/8945720.html">https://www.cnblogs.com/pengshaomin/p/8945720.html</a></p>
<p>1、单行文本输入框 TextFormField</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new TextFormField(</span><br><span class="line">    maxLength: 32,</span><br><span class="line">    onSaved: (val)=&gt; this._config = val,</span><br><span class="line">    validator: (v)=&gt;(v == null || v.isEmpty)?&quot;请选择配置&quot;: null,</span><br><span class="line">    decoration: new InputDecoration(</span><br><span class="line">      labelText: &#x27;配置&#x27;,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477173563724.jpg!ghost"></p>
<p>2、多行输入框 <code>keyboardType: TextInputType.multiline,</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new TextField(</span><br><span class="line">    keyboardType: TextInputType.multiline,</span><br><span class="line">    maxLines: 3,</span><br><span class="line">    maxLength: 100,</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477172797449.jpg!ghost"></p>
<p>2、单选Radio</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">new Radio(</span><br><span class="line">    groupValue: this.radio,</span><br><span class="line">    activeColor: Colors.blue,</span><br><span class="line">    value: &#x27;aaa&#x27;,</span><br><span class="line">    onChanged: (String val) &#123;</span><br><span class="line">      // val 与 value 的类型对应</span><br><span class="line">      this.setState(() &#123;</span><br><span class="line">        this.radio = val;  // aaa</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477172439574.jpg!ghost"></p>
<p>3、复选 CheckBox</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">new Checkbox(</span><br><span class="line">    value: flutter,</span><br><span class="line">    activeColor: Colors.blue,</span><br><span class="line">    onChanged: (val) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        flutter = val;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477172267230.jpg!ghost"></p>
<p>4、switch</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Switch(</span><br><span class="line">  activeColor: Colors.green,</span><br><span class="line">  value: flutter,</span><br><span class="line">  onChanged: (val) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      flutter = val;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477172073429.jpg!ghost"></p>
<p>5、slider</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">new Slider(</span><br><span class="line">  value: _slider,</span><br><span class="line">  min: 0.0,</span><br><span class="line">  max: 100.0,</span><br><span class="line">  onChanged: (val) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _slider = val;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477171919844.jpg!ghost"></p>
<p>6、DateTimePicker</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置存储日期的变量</span></span><br><span class="line"><span class="built_in">DateTime</span> _dateTime = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示文字Text，设置点击事件，点击后打开日期选择器</span></span><br><span class="line">  <span class="keyword">new</span> GestureDetector(</span><br><span class="line">    onTap: ()&#123;</span><br><span class="line">      _showDatePicker();</span><br><span class="line">    &#125;,</span><br><span class="line">    child: <span class="keyword">new</span> Container(</span><br><span class="line">      child: <span class="keyword">new</span> Text(_dateTime.toLocal().toString()),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 打开日期选择器</span></span><br><span class="line">  <span class="keyword">void</span> _showDatePicker() &#123;</span><br><span class="line">    _selectDate(context);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;<span class="built_in">Null</span>&gt; _selectDate(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">DateTime</span> _picked = <span class="keyword">await</span> showDatePicker(</span><br><span class="line">      context: context,</span><br><span class="line">      initialDate: _dateTime,</span><br><span class="line">      firstDate: <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2016</span>),</span><br><span class="line">      lastDate: <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2050</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(_picked != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="built_in">print</span>(_picked);</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _dateTime = _picked;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477170908533.jpg!ghost"></p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477171059841.jpg!ghost"></p>
<p>7、TimePIcker</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  TimeOfDay _time = <span class="keyword">new</span> TimeOfDay.now();</span><br><span class="line">  </span><br><span class="line"><span class="comment">// text显示当前时间</span></span><br><span class="line"><span class="keyword">new</span> GestureDetector(</span><br><span class="line">    onTap: _showTimePicker,</span><br><span class="line">    child: <span class="keyword">new</span> Text(_time.format(context)),</span><br><span class="line">  ),</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 显示timpicker</span></span><br><span class="line">  <span class="keyword">void</span> _showTimePicker()&#123;</span><br><span class="line">    _selectTime(context);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;<span class="built_in">Null</span>&gt; _selectTime(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> TimeOfDay _picker = <span class="keyword">await</span> showTimePicker(</span><br><span class="line">      context: context,</span><br><span class="line">      initialTime: _time,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span>(_picker != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="built_in">print</span>(_picker);</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _time = _picker;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477174977571.jpg!ghost"></p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15477170712000.jpg!ghost"></p>
<h3 id="Toast-showSnackBar"><a href="#Toast-showSnackBar" class="headerlink" title="Toast/showSnackBar"></a>Toast/showSnackBar</h3><p><strong>showSnackBar:</strong></p>
<p><a target="_blank" rel="noopener" href="https://material.io/design/components/snackbars.html#usage">https://material.io/design/components/snackbars.html#usage</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void _showToast(BuildContext context) &#123;</span><br><span class="line">  final scaffold = Scaffold.of(context);</span><br><span class="line">  scaffold.showSnackBar(</span><br><span class="line">    SnackBar(</span><br><span class="line">      content: const Text(&#x27;Added to favorite&#x27;),</span><br><span class="line">      action: SnackBarAction(</span><br><span class="line">        label: &#x27;UNDO&#x27;, </span><br><span class="line">        onPressed: scaffold.hideCurrentSnackBar</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Toast:</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PonnamKarthik/FlutterToast">https://github.com/PonnamKarthik/FlutterToast</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> _showToast(<span class="built_in">String</span> title) &#123;</span><br><span class="line">  Fluttertoast.showToast(</span><br><span class="line">    msg: title,</span><br><span class="line">    toastLength: Toast.LENGTH_SHORT,</span><br><span class="line">    gravity: ToastGravity.CENTER,</span><br><span class="line">    timeInSecForIos: <span class="number">1</span>,</span><br><span class="line">    backgroundColor: Color.fromRGBO(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.85</span>),</span><br><span class="line">    textColor: Colors.white</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="Popover-popup"><a href="#Popover-popup" class="headerlink" title="Popover/popup"></a>Popover/popup</h3><p><strong>popup:</strong> CupertinoActionSheet</p>
<p><a target="_blank" rel="noopener" href="http://flatteredwithflutter.com/actionsheet-in-flutter/">http://flatteredwithflutter.com/actionsheet-in-flutter/</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MaterialButton(</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    _showActionSheet();</span><br><span class="line">  &#125;,</span><br><span class="line">  child: <span class="keyword">new</span> Text(<span class="string">&#x27;show ActionSheet&#x27;</span>, style: TextStyle(color: Colors.white),),</span><br><span class="line">  color: Colors.greenAccent,</span><br><span class="line">),</span><br><span class="line">                        </span><br><span class="line"><span class="keyword">void</span> _showActionSheet() &#123;</span><br><span class="line">  showCupertinoModalPopup(</span><br><span class="line">    context: context,</span><br><span class="line">    builder: (BuildContext context) =&gt; actionSheet(),</span><br><span class="line">  ).then((value) &#123;</span><br><span class="line">    Scaffold.of(context).showSnackBar(<span class="keyword">new</span> SnackBar(</span><br><span class="line">      content: <span class="keyword">new</span> Text(<span class="string">&#x27;You clicked <span class="subst">$value</span>&#x27;</span>),</span><br><span class="line">    ));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget actionSheet()&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> CupertinoActionSheet(</span><br><span class="line">    title: <span class="keyword">new</span> Text(<span class="string">&#x27;title&#x27;</span>),</span><br><span class="line">    message: <span class="keyword">const</span> Text(<span class="string">&#x27;your options are&#x27;</span>),</span><br><span class="line">    actions: &lt;Widget&gt;[</span><br><span class="line">      CupertinoActionSheetAction(</span><br><span class="line">        child: <span class="keyword">const</span> Text(<span class="string">&#x27;yes&#x27;</span>),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          Navigator.pop(context, <span class="string">&#x27;yes&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      CupertinoActionSheetAction(</span><br><span class="line">        child: <span class="keyword">const</span> Text(<span class="string">&#x27;no&#x27;</span>),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          Navigator.pop(context, <span class="string">&#x27;no&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      )</span><br><span class="line">    ],</span><br><span class="line">    cancelButton: CupertinoActionSheetAction(</span><br><span class="line">      child: <span class="keyword">new</span> Text(<span class="string">&#x27;cancel&#x27;</span>),</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        Navigator.pop(context, <span class="string">&#x27;Cancel&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478083088933.jpg!ghost"></p>
<h3 id="IOS风格组件"><a href="#IOS风格组件" class="headerlink" title="IOS风格组件"></a>IOS风格组件</h3><p><a target="_blank" rel="noopener" href="https://flutter-es.io/widgets/cupertino/">https://flutter-es.io/widgets/cupertino/</a></p>
<h3 id="Dismissible-滑动删除"><a href="#Dismissible-滑动删除" class="headerlink" title="Dismissible 滑动删除"></a>Dismissible 滑动删除</h3><p><a target="_blank" rel="noopener" href="https://flutter.io/docs/cookbook/gestures/dismissible">https://flutter.io/docs/cookbook/gestures/dismissible</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">new Dismissible(</span><br><span class="line">  // Each Dismissible must contain a Key. Keys allow Flutter to</span><br><span class="line">  // uniquely identify Widgets.</span><br><span class="line">  key: Key(item),</span><br><span class="line">  onDismissed: (direction) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      items.removeAt(index);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // Then show a snackbar!</span><br><span class="line">    Scaffold.of(context)</span><br><span class="line">        .showSnackBar(SnackBar(content: Text(&quot;$item dismissed&quot;)));</span><br><span class="line">  &#125;,</span><br><span class="line">  // Show a red background as the item is swiped away</span><br><span class="line">  background: Container(color: Colors.red),</span><br><span class="line">  child: ListTile(title: Text(&#x27;$item&#x27;)),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>


<h3 id="Swipe-左滑右滑删除"><a href="#Swipe-左滑右滑删除" class="headerlink" title="Swipe 左滑右滑删除"></a>Swipe 左滑右滑删除</h3><p><a target="_blank" rel="noopener" href="https://github.com/letsar/flutter_slidable">https://github.com/letsar/flutter_slidable</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">Widget _swipe(<span class="built_in">int</span> i, <span class="built_in">String</span> title, <span class="built_in">String</span> desc) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Slidable(</span><br><span class="line">    delegate: <span class="keyword">new</span> SlidableDrawerDelegate(),</span><br><span class="line">    actionExtentRatio: <span class="number">0.25</span>,</span><br><span class="line">    child: <span class="keyword">new</span> Container(</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      child: <span class="keyword">new</span> GestureDetector(</span><br><span class="line">        onTap: ()&#123;&#125;,</span><br><span class="line">        onDoubleTap: ()&#123;&#125;,</span><br><span class="line">        onLongPress: ()&#123;&#125;,</span><br><span class="line">        child: <span class="keyword">new</span> ListTile(</span><br><span class="line">          leading: <span class="keyword">new</span> CircleAvatar(</span><br><span class="line">            backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">            child: <span class="keyword">new</span> Text(</span><br><span class="line">              <span class="string">&#x27;<span class="subst">$i</span>&#x27;</span>,</span><br><span class="line">              style: TextStyle(color: Colors.orange),</span><br><span class="line">            ),</span><br><span class="line">            foregroundColor: Colors.white,</span><br><span class="line">          ),</span><br><span class="line">          title: <span class="keyword">new</span> Text(</span><br><span class="line">            <span class="string">&#x27;<span class="subst">$title</span>&#x27;</span>,</span><br><span class="line">            maxLines: <span class="number">1</span>,</span><br><span class="line">            overflow: TextOverflow.ellipsis,</span><br><span class="line">            style: TextStyle(color: Colors.black87, fontSize: <span class="number">16</span>),</span><br><span class="line">          ),</span><br><span class="line">          subtitle: <span class="keyword">new</span> Text(</span><br><span class="line">            <span class="string">&#x27;<span class="subst">$desc</span>&#x27;</span>,</span><br><span class="line">            style: TextStyle(color: Colors.blue[<span class="number">300</span>]),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      )</span><br><span class="line">    ),</span><br><span class="line">    actions: &lt;Widget&gt;[</span><br><span class="line">      <span class="keyword">new</span> IconSlideAction(</span><br><span class="line">        caption: <span class="string">&#x27;Archive&#x27;</span>,</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">        icon: Icons.archive,</span><br><span class="line">        onTap: () =&gt; _showSnackBar(<span class="string">&#x27;Archive&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="keyword">new</span> IconSlideAction(</span><br><span class="line">        caption: <span class="string">&#x27;Share&#x27;</span>,</span><br><span class="line">        color: Colors.indigo,</span><br><span class="line">        icon: Icons.share,</span><br><span class="line">        onTap: () =&gt; _showSnackBar(<span class="string">&#x27;Share&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">    secondaryActions: &lt;Widget&gt;[</span><br><span class="line">      <span class="keyword">new</span> IconSlideAction(</span><br><span class="line">        caption: <span class="string">&#x27;More&#x27;</span>,</span><br><span class="line">        color: Colors.black45,</span><br><span class="line">        icon: Icons.more_horiz,</span><br><span class="line">        onTap: () =&gt; _showSnackBar(<span class="string">&#x27;More&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      <span class="keyword">new</span> IconSlideAction(</span><br><span class="line">        caption: <span class="string">&#x27;Delete&#x27;</span>,</span><br><span class="line">        color: Colors.red,</span><br><span class="line">        icon: Icons.delete,</span><br><span class="line">        onTap: () =&gt; _showSnackBar(<span class="string">&#x27;Delete&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478783652757.jpg!ghost"></p>
<h3 id="常用手势-GestureDetector"><a href="#常用手势-GestureDetector" class="headerlink" title="常用手势 GestureDetector"></a>常用手势 GestureDetector</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new GestureDetector(</span><br><span class="line">  onTap: ()&#123;_showToast(&#x27;点击: $i&#x27;);&#125;,</span><br><span class="line">  onDoubleTap: ()&#123;_showToast(&#x27;连点: $i&#x27;);&#125;,</span><br><span class="line">  onLongPress: ()&#123;_showToast(&#x27;长按: $i&#x27;);&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<h3 id="flutter-常用组件"><a href="#flutter-常用组件" class="headerlink" title="flutter 常用组件"></a>flutter 常用组件</h3><p><a target="_blank" rel="noopener" href="https://github.com/flutter/plugins">https://github.com/flutter/plugins</a></p>
<h3 id="camera-image-picker"><a href="#camera-image-picker" class="headerlink" title="camera / image_picker"></a>camera / image_picker</h3><p><a target="_blank" rel="noopener" href="https://medium.com/flutter-community/implementing-camera-feature-in-flutter-f7f6a7a5e6dd">https://medium.com/flutter-community/implementing-camera-feature-in-flutter-f7f6a7a5e6dd</a></p>
<p>image_picker： (最常用场景，从相册选择或拍照得到照片)</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span> _picture;</span><br><span class="line"><span class="built_in">dynamic</span> _gallery;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> FlatButton.icon(</span><br><span class="line">  icon: Icon(Icons.camera),</span><br><span class="line">  label: Text(<span class="string">&#x27;选择头像&#x27;</span>),</span><br><span class="line">  onPressed: ()&#123;</span><br><span class="line">    _optionsDialogBox();</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br><span class="line">            </span><br><span class="line">Future&lt;<span class="keyword">void</span>&gt; _optionsDialogBox() &#123;</span><br><span class="line">  <span class="keyword">return</span> showDialog(context: context,</span><br><span class="line">    builder: (BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> AlertDialog(</span><br><span class="line">          content: <span class="keyword">new</span> SingleChildScrollView(</span><br><span class="line">            child: <span class="keyword">new</span> ListBody(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                GestureDetector(</span><br><span class="line">                  child: <span class="keyword">new</span> Text(<span class="string">&#x27;Take a picture&#x27;</span>),</span><br><span class="line">                  onTap: openCamera,</span><br><span class="line">                ),</span><br><span class="line">                Padding(</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">                ),</span><br><span class="line">                GestureDetector(</span><br><span class="line">                  child: <span class="keyword">new</span> Text(<span class="string">&#x27;Select from gallery&#x27;</span>),</span><br><span class="line">                  onTap: openGallery,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> openCamera() <span class="keyword">async</span> &#123;</span><br><span class="line">  Navigator.of(context).pop();</span><br><span class="line">  <span class="keyword">var</span> picture = <span class="keyword">await</span> ImagePicker.pickImage(</span><br><span class="line">    source: ImageSource.camera,</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  setState(() &#123;</span><br><span class="line">    _picture = picture;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> openGallery() <span class="keyword">async</span> &#123;</span><br><span class="line">  Navigator.of(context).pop();</span><br><span class="line">  <span class="keyword">var</span> gallery = <span class="keyword">await</span> ImagePicker.pickImage(</span><br><span class="line">    source: ImageSource.gallery,</span><br><span class="line">  );</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    _gallery = gallery;      </span><br><span class="line">  &#125;);    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478902760777.jpg!ghost"><br><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478902961097.jpg!ghost"><br><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478903093117.jpg!ghost"><br><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478903169005.jpg!ghost"></p>
<p>camera：  (高阶用法，打开相机，实时获取相机流，可以定制拍照、录像等按钮。可用于相机扫码、实时识别、直播等场景)</p>
<p><a target="_blank" rel="noopener" href="https://pub.dartlang.org/packages/camera">https://pub.dartlang.org/packages/camera</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">camera: ^0.2.9</span><br><span class="line"></span><br><span class="line">import &#x27;package:camera/camera.dart&#x27;;</span><br><span class="line"></span><br><span class="line">class _CameraState extends State&lt;CameraWidget&gt; &#123;</span><br><span class="line">  List&lt;CameraDescription&gt; cameras;</span><br><span class="line">  CameraController controller;</span><br><span class="line">  bool _isReady = false;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line">    _setupCameras();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;void&gt; _setupCameras() async &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      // initialize cameras.</span><br><span class="line">      cameras = await availableCameras();</span><br><span class="line">      // initialize camera controllers.</span><br><span class="line">      controller = new CameraController(cameras[0], ResolutionPreset.medium);</span><br><span class="line">      await controller.initialize();</span><br><span class="line">    &#125; on CameraException catch (_) &#123;</span><br><span class="line">      // do something on error.</span><br><span class="line">    &#125;</span><br><span class="line">    if (!isMounted) return;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _isReady = true;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    if (!_isReady) return new Container();</span><br><span class="line">    return new Container(</span><br><span class="line">        height: 200,</span><br><span class="line">        child: AspectRatio(</span><br><span class="line">          aspectRatio: controller.value.aspectRatio,</span><br><span class="line">          child: CameraPreview(controller),</span><br><span class="line">        ),</span><br><span class="line">      )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15478908406777.jpg!ghost"></p>
<h3 id="video-player"><a href="#video-player" class="headerlink" title="video player"></a>video player</h3><p><a target="_blank" rel="noopener" href="https://github.com/flutter/plugins/tree/master/packages/video_player">https://github.com/flutter/plugins/tree/master/packages/video_player</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">video_player: ^0.8.0</span><br><span class="line"></span><br><span class="line">import &#x27;package:video_player/video_player.dart&#x27;;</span><br><span class="line"></span><br><span class="line">VideoPlayerController _controller;</span><br><span class="line">bool _isPlaying = false;</span><br><span class="line"></span><br><span class="line">@override</span><br><span class="line">void initState() &#123;</span><br><span class="line">super.initState();</span><br><span class="line">_controller = VideoPlayerController.network(</span><br><span class="line">  &#x27;https://www.quirksmode.org/html5/videos/big_buck_bunny.mp4&#x27;,</span><br><span class="line">)</span><br><span class="line">  ..addListener(() &#123;</span><br><span class="line">    final bool isPlaying = _controller.value.isPlaying;</span><br><span class="line">    if (isPlaying != _isPlaying) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _isPlaying = isPlaying;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  ..initialize().then((_) &#123;</span><br><span class="line">    // Ensure the first frame is shown after the video is initialized, even before the play button has been pressed.</span><br><span class="line">    setState(() &#123;&#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@override</span><br><span class="line">void dispose() &#123;</span><br><span class="line">    _controller?.dispose();</span><br><span class="line">    super.dispose();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 显示、控制</span><br><span class="line">  _controller.value.initialized</span><br><span class="line">  ? AspectRatio(</span><br><span class="line">      aspectRatio: _controller.value.aspectRatio,</span><br><span class="line">      child: new Container(</span><br><span class="line">        padding: EdgeInsets.all(10),</span><br><span class="line">        color: Colors.black,</span><br><span class="line">        child: VideoPlayer(_controller),</span><br><span class="line">        </span><br><span class="line">      ),</span><br><span class="line">    )</span><br><span class="line">  : Container(</span><br><span class="line">    child: new Text(&#x27;视频加载中~&#x27;),</span><br><span class="line">  ),</span><br><span class="line">  new FlatButton.icon(</span><br><span class="line">    label: Text(&#x27;播放/暂停&#x27;),</span><br><span class="line">    icon: Icon(</span><br><span class="line">      _controller.value.isPlaying ? Icons.pause : Icons.play_arrow,</span><br><span class="line">    ),</span><br><span class="line">    onPressed: _controller.value.isPlaying</span><br><span class="line">    ? _controller.pause</span><br><span class="line">    : _controller.play,</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15479549937184.jpg!ghost"></p>
<h3 id="AudioPlayer"><a href="#AudioPlayer" class="headerlink" title="AudioPlayer"></a>AudioPlayer</h3><p><a target="_blank" rel="noopener" href="https://github.com/rxlabz/audioplayer">https://github.com/rxlabz/audioplayer</a></p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15479571438277.jpg!ghost"></p>
<p>Flutter的学习还在路上，列了个To Do List。继续加油：</p>
<p><img src="https://ludis-1252396698.image.myqcloud.com/ghost/images/flutter/15479598688866.jpg!ghost"></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">Previous</a></div><div class="pagination-next"><a href="/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/18/">18</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://img.ikstatic.cn/MTYzMTE3MTU3NDM3MCM1MzYjcG5n.png" alt="Ludis"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Ludis</p><p class="is-size-6 is-block">Valar Morghulis, Valar Dohaeris</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">177</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">17</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/flute" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/flute"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/3852099619"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:552452006@qq.com"><i class="far fa-envelope"></i></a></div></div></div><!--!--><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-30T07:42:16.000Z">2021-06-30</time></p><p class="title"><a href="/2021/06/30/React-Antd-Warning%E7%A7%BB%E9%99%A4%E5%A4%A7%E6%B3%95%E2%80%94%E2%80%94%E6%95%B4%E4%B8%AA%E4%B8%96%E7%95%8C%E6%B8%85%E5%87%80%E4%BA%86/">React/Antd Warning移除大法——整个世界清净了</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-05-14T10:41:14.000Z">2020-05-14</time></p><p class="title"><a href="/2020/05/14/IntersectionObserver/">IntersectionObserver</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-06T13:45:55.000Z">2020-02-06</time></p><p class="title"><a href="/2020/02/06/%E5%BE%AE%E5%B1%81%E6%81%A9%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%E4%B9%8B-%E2%80%94%E2%80%94-V2Ray/">微屁恩使用指南之 —— V2Ray</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-10T07:45:26.000Z">2019-12-10</time></p><p class="title"><a href="/2019/12/10/H5%E5%9C%A8%E5%85%A8%E5%B1%8FWebview%E4%B8%AD%E5%8F%8C%E7%AB%AF%E9%80%82%E9%85%8D%E5%88%98%E6%B5%B7%E5%B1%8F/">H5在全屏Webview中双端适配刘海屏</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-07-25T09:58:45.000Z">2019-07-25</time></p><p class="title"><a href="/2019/07/25/vue-%E9%A1%B9%E7%9B%AE%E5%9C%A8%E4%BD%8E%E9%85%8D%E6%9C%BA%E5%99%A8%E4%B8%8A%E7%BA%BF%E5%8F%8A%E4%BC%98%E5%8C%96/">vue 项目在低配机器上线及优化</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">March 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">December 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/11/"><span class="level-start"><span class="level-item">November 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/10/"><span class="level-start"><span class="level-item">October 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/09/"><span class="level-start"><span class="level-item">September 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/08/"><span class="level-start"><span class="level-item">August 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/07/"><span class="level-start"><span class="level-item">July 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/02/"><span class="level-start"><span class="level-item">February 2016</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/12/"><span class="level-start"><span class="level-item">December 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/11/"><span class="level-start"><span class="level-item">November 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/10/"><span class="level-start"><span class="level-item">October 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/09/"><span class="level-start"><span class="level-item">September 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/08/"><span class="level-start"><span class="level-item">August 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/07/"><span class="level-start"><span class="level-item">July 2015</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/06/"><span class="level-start"><span class="level-item">June 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/05/"><span class="level-start"><span class="level-item">May 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/04/"><span class="level-start"><span class="level-item">April 2015</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/03/"><span class="level-start"><span class="level-item">March 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/02/"><span class="level-start"><span class="level-item">February 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/01/"><span class="level-start"><span class="level-item">January 2015</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/12/"><span class="level-start"><span class="level-item">December 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/11/"><span class="level-start"><span class="level-item">November 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/10/"><span class="level-start"><span class="level-item">October 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/09/"><span class="level-start"><span class="level-item">September 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/08/"><span class="level-start"><span class="level-item">August 2014</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/07/"><span class="level-start"><span class="level-item">July 2014</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/06/"><span class="level-start"><span class="level-item">June 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/05/"><span class="level-start"><span class="level-item">May 2014</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/04/"><span class="level-start"><span class="level-item">April 2014</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/03/"><span class="level-start"><span class="level-item">March 2014</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/02/"><span class="level-start"><span class="level-item">February 2014</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/01/"><span class="level-start"><span class="level-item">January 2014</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/12/"><span class="level-start"><span class="level-item">December 2013</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/11/"><span class="level-start"><span class="level-item">November 2013</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/10/"><span class="level-start"><span class="level-item">October 2013</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ghost/"><span class="tag">Ghost</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/H5/"><span class="tag">H5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTTPS/"><span class="tag">HTTPS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React-Native/"><span class="tag">React Native</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sublime/"><span class="tag">Sublime</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/npm/"><span class="tag">npm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E8%A7%86%E5%89%A7/"><span class="tag">电视剧</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BE%8E%E9%A3%9F/"><span class="tag">美食</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">3</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/facvion.png" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2021 Ludis</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/flute"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>